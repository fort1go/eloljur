(self.webpackChunkeljur_build_frontend=self.webpackChunkeljur_build_frontend||[]).push([[9129],{71799:function(t,e,r){var n=r(63872);n.__esModule&&(n=n.default),'string'==typeof n&&(n=[[t.id,n,'']]),n.locals&&(t.exports=n.locals);var o=r(75944).Z,i=r(78825).Z;t.exports.__inject__=function(t){t?o('2725c5b9',n,t):i('2725c5b9',n,!0,{'shadowMode':!0,'safeShadowMode':!0,'sourceMap':!1})}},82879:function(t,e,r){var n=r(96148);n.__esModule&&(n=n.default),'string'==typeof n&&(n=[[t.id,n,'']]),n.locals&&(t.exports=n.locals);var o=r(75944).Z,i=r(78825).Z;t.exports.__inject__=function(t){t?o('15ea652e',n,t):i('15ea652e',n,!0,{'shadowMode':!0,'safeShadowMode':!0,'sourceMap':!1})}},72614:function(t,e,r){'use strict';var n=r(60191);e.Z=function(){return(0,n.y7)(r.e(3885).then(r.bind(r,20149)))}},64485:function(t,e,r){'use strict';function n(t){return n='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&'function'==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?'symbol':typeof t},n(t)}function o(t,e,r){var o;return o=function(t,e){if('object'!=n(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||'default');if('object'!=n(o))return o;throw new TypeError('@@toPrimitive must return a primitive value.')}return('string'===e?String:Number)(t)}(e,'string'),(e='symbol'==n(o)?o:String(o))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}r.d(e,{Z:function(){return s}});var i=r(60191),a={props:{backdropBlur:{type:Boolean,default:!1},fill:{type:Boolean,default:!1},size:{type:String,default:i.Tt.MEDIUM,validator:i.QC},title:{type:String,default:''}}};var s=(0,r(51900).Z)(a,(function(){var t=this,e=t._self._c;return e('div',{class:o(o(o(o(o({},t.$style.loading,!0),t.$style['loading--blur'],t.backdropBlur),t.$style['loading--fill'],t.fill),t.$style['loading--small'],'small'===t.size),t.$style['loading--big'],'big'===t.size)},[e('div',{class:t.$style.loading__title},[e('i',{class:['fa-fw fa-circle-notch fa-spin',{fa:'big'!==t.size,fas:'big'===t.size}]}),t._v(' '),t._t('default',(function(){return[t._v(t._s(t.title))]}))],2)])}),[],!1,(function(t){var e=r(87462);e.__inject__&&e.__inject__(t),this.$style=e.locals||e}),null,null,!0).exports},43110:function(t,e){'use strict';e.Z={isTen:!1,isCS:!1,isPercent:!1,isRating:!1,isLetteredTen:!1,debtIsControlLackOfMark:!1,roundResultTo:0,groupBySets:!1,avgControl:{}}},15091:function(t,e,r){'use strict';r.d(e,{K5:function(){return o},tq:function(){return i}});var n='max-width: 896px';function o(){try{return window.matchMedia(n).matches||window.matchMedia('('.concat(n,')')).matches}catch(t){return!1}}function i(){return function(){try{var t,e,r=document.body||document.querySelector('body');return!(null!=r&&null!==(t=r.classList)&&void 0!==t&&t.contains('body'))||(null==r||null===(e=r.classList)||void 0===e?void 0:e.contains('body--fluid'))}catch(t){return!1}}()&&o()}},9704:function(t,e,r){'use strict';var n=r(45489);e.Z=function(t,e){if(!t)return Promise.reject((0,n.Iu)('error.generic'));var r=window.theOnlyWayToGenerateUrlForMethodCall(t,e,'/journal-index-rpc-action');return fetch(r,{credentials:'include'}).then((function(t){return t.json()})).then((function(t){return t?t&&t.error?Promise.reject(t.error||(0,n.Iu)('error.generic')):t:Promise.reject((0,n.Iu)('error.generic'))}),(function(t){return Promise.reject(t||(0,n.Iu)('error.generic'))})).catch((function(t){return Promise.reject(t||(0,n.Iu)('error.generic'))}))}},96114:function(t,e,r){'use strict';var n=r(9704);e.Z=function(t,e){return void 0===t||void 0===e?Promise.reject():(0,n.Z)('user.set_pref',{pref:t,value:e})}},46189:function(t,e,r){'use strict';r.d(e,{V:function(){return u},l:function(){return c}});var n=r(24983);function o(t){return o='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&'function'==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?'symbol':typeof t},o(t)}function i(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function a(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?i(Object(r),!0).forEach((function(e){s(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function s(t,e,r){var n;return n=function(t,e){if('object'!=o(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||'default');if('object'!=o(n))return n;throw new TypeError('@@toPrimitive must return a primitive value.')}return('string'===e?String:Number)(t)}(e,'string'),(e='symbol'==o(n)?n:String(n))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function c(t){var e=t.replace(/(....-..-..).*/,'$1'),r=t.replace(/....-..-..([^N]*)N.*/,'$1'),n=t.replace(/.*N([^_]*)_.*/,'$1');return{date:e,num:r,lessonNum:r,nm:n,columnNum:n}}function u(t,e){var r=e||window.curcol;if(t=t||r&&r.id,!r&&!t)return!1;var o=window.$,i=r.parentNode;if(r){var s=o(r).data('column-title');if(s)return{part:s}}var u=window,l=u.curgrp,f=u.pres;if(t==='g'.concat(l,'_yearly'))return{part:'Годовая'};if('g'.concat(l,'_inner_exams')===t)return{part:n.Z.partName};if(!f){var d=c(t),m=i&&i.getAttribute('nosched'),g=i&&i.getAttribute('twoless');return a(a({},d),{},{nosched:m,twoless:g})}return/\s[0-9]{1,2}\sкл\./.test(t)?{part:t.replace(/([^_]*)\s[0-9]{1,2}\sкл\._.*/,'$1')}:{part:t.replace(/([^_]*)_.*/,'$1')}}},71938:function(t,e,r){'use strict';function n(t,e){null!=e&&!1!==e||(e=window.grps),Array.isArray(e)||(e=e instanceof Object?Object.values(e):[e]),Array.isArray(t)||(t=t instanceof Object?Object.values(t):[t]);var r=[];return t.forEach((function(t){e.forEach((function(e){r.push('#g'.concat(e,'_').concat(t))}))})),r.join(',')}r.d(e,{e:function(){return n}})},48765:function(t,e,r){'use strict';function n(t){var e,r=parseFloat(t);switch(!0){case!r:e='color: #808080 !important;';break;case r>0&&r<50:e='color: #DB7093 !important;';break;case r>=50:e='color: #006400 !important;'}return e}r.d(e,{h:function(){return n}})},9499:function(t,e,r){'use strict';r.d(e,{q:function(){return a},x:function(){return i}});var n=r(97377),o=16;function i(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o;return(0,n.x0)(t)}function a(){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o;return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:'i')+(0,n.x0)(t)}},24983:function(t,e){'use strict';var r,n=window,o=n.$,i=n.JournalTeacher,a=n.JournalConfig,s=n.group,c=(null==a||null===(r=a.intl)||void 0===r?void 0:r.inner_exam)||o('#inner_exam').val(),u=o('#inner_exam_short').val();e.Z={autoSet:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:'marks';if(s=null!==(t=s)&&void 0!==t?t:window.curgrp,'marks'===e){var r=document.querySelectorAll('#g'.concat(s,'_journal [id$=_avg_cw_years] div.cell:not(.cell_inactive)')),n=document.querySelectorAll('#g'.concat(s,'_journal [id$=_inner_exams] div.cell:not(.cell_inactive)'));r.forEach((function(t,e){var r=o(t).attr('name'),a=parseFloat(t.textContent);if(!Number.isNaN(a)&&a>0){a=a.toFixed();var s=o(n[e]);s.text(a),i.setPartMark(r,c,a,'',null,s)}}))}else if('results'===e){var u=document.querySelectorAll('#g'.concat(s,'_marks .id_inner_exam div.cell:not(.cell_inactive)')),l=a.journalAvgCwYearMarks[s]||[];u.forEach((function(t,e){var r=o(t),n=r.attr('name'),a=parseFloat(l[n]);!Number.isNaN(a)&&a>0&&(a=a.toFixed(),r.text(a),i.setPartMark(n,c,a,'',null,r))}))}},partName:c,partShortName:u}},51487:function(t,e,r){'use strict';var n=r(57814),o=r(71938),i=r(45489),a=r(9704);var s=function(t){return void 0===t?Promise.reject((0,i.Iu)('error.generic')):(0,a.Z)('user.set_marks_highlight_mode',{mode:t})},c=r(96114),u=r(58579),l=r(8849),f=r(43110),d=r(72614),m=r(87597),g=r(64485),v=(0,r(48059).Z)().url('/journal-api-extra_hours-action?action=extra_hours.update').errorType('json').options({credentials:'include'});var h={components:{InputNumber:d.Z,Button:m.Z,Loading:g.Z},props:{extraHours:{type:Number,required:!0},groupId:{type:Number,required:!0},period:{type:String,required:!0},className:{type:String,required:!0}},data:function(){return{loading:!1,error:null,value:this.extraHours}},computed:{canUpdate:function(){return this.value!==this.extraHours}},methods:{onSave:function(){var t,e=this;this.loading=!0,this.error=null,this.canUpdate&&(t={hours:this.value,load_id:window.journal_load_ids[this.groupId],period:this.period},v.json(t).post().json()).then((function(){e.$emit('updated',e.value)})).finally((function(){e.loading=!1})).catch((function(t){var r;e.error=(null==t||null===(r=t.json)||void 0===r?void 0:r.error)||t.message||t}))}}},p=h;var b=(0,r(51900).Z)(p,(function(){var t=this,e=t._self._c;return e('div',{class:t.$style.root},[t.loading?e('Loading',{attrs:{'fill':''}}):t._e(),e('div',{staticClass:'columns columns--gutter columns--gutter-small'},[e('div',{staticClass:'column-55'},[e('InputNumber',{attrs:{'size':'small','max':999,'min':0,'step':1,'fill':''},model:{value:t.value,callback:function(e){t.value=e},expression:'value'}})],1),e('div',{staticClass:'column-45'},[e('Button',{attrs:{'color':'green','size':'small','fill':'','disabled':!t.canUpdate},on:{'click':t.onSave}},[t._v(' Сохранить ')])],1)]),t.error?e('div',{staticClass:'color-red',class:t.$style.error},[t._v(t._s(t.error)+'d')]):t._e()],1)}),[],!1,(function(t){var e=r(75172);e.__inject__&&e.__inject__(t),this.$style=e.locals||e}),null,null,!0),y=b.exports,w=i.w3.extend(y);function _(t){return function(t){if(Array.isArray(t))return k(t)}(t)||function(t){if('undefined'!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t['@@iterator'])return Array.from(t)}(t)||function(t,e){if(!t)return;if('string'==typeof t)return k(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);'Object'===r&&t.constructor&&(r=t.constructor.name);if('Map'===r||'Set'===r)return Array.from(t);if('Arguments'===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return k(t,e)}(t)||function(){throw new TypeError('Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.')}()}function k(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}window.addEventListener('load',(function(){var t=window,e=t.$,r=t.showLoadingScreen,i=t.hideLoadingScreen,a=t.JournalConfig;if(e&&a){var d=(a||f.Z).avgControl;d=d||{};var m,g=function(t,o,i,a){var s=t.hasClass('active')?a:i;e(undefined).toggleClass('active'),n._.hide(),r(),(0,c.Z)(o,s).then((function(){top.location.reload()})).catch((function(t){console.error(t)}))};if(e('#journalContextZoom').on('click','button',(function(){var t=parseInt(e(this).text(),10);e('body').hasClass('body--zoom_'+t)||(e(this).siblings().removeClass('active'),e(this).addClass('active'),n._.hide(),r(),(0,c.Z)('journal_scale',t).catch((function(t){console.error(t)})),setTimeout((function(){e('body').removeClass('body--zoom_65 body--zoom_70 body--zoom_75 body--zoom_80 body--zoom_85 body--zoom_90 body--zoom_95 body--zoom_100').addClass('body--zoom_'+t),window.Grid.refresh(),i()}),10))})),window.JournalConfig&&a.show){e('#showtwo').on('click',(function(){var t=window.curgrp,r=!e(this).hasClass('active');e(this).toggleClass('active');var n=r?'yes':'no';window.JournalConfig.avgControl.last_two_show=r,(0,c.Z)('journal_marks_showtwo',n);var i=(0,u.Z)(t);e((0,o.e)('journal [id$=_avg] div.cell',[t])).each((function(){(0,l.jO)(this,i)}))})),e('#miss_reasons').on('click',(function(){r();var t=!e(this).hasClass('active');e(this).toggleClass('active');var n=t?'yes':'no';(0,c.Z)('journal_marks_miss_reasons',n).catch((function(t){console.error(t)}));var a=e((0,o.e)('marks')).find('div.cells div.cell[miss_reason]');return['b','u','n'].forEach((function(e){a.filter('[miss_reason="'+e+'"]').toggleClass('cell--miss-'+e,t)})),e('#miss_reasons_legend').toggleClass('opacity50',!t),i(),!1})),e('#showavgcolumn').on('click',(function(){var t=!e(this).hasClass('active');e(this).toggleClass('active');var r=t?'yes':'no';return(0,c.Z)('journal_marks_showavgcolumn',r).catch((function(t){console.error(t)})),e((0,o.e)(['avg_header','avg'])).toggleClass('cells_invisible',!t).toggleClass('hide',!t),window.Grid.refresh(),!1})),e('#hidemovedstudents').on('click',(function(){var t=!e(this).hasClass('active');e(this).toggleClass('active');var r=t?'yes':'no';(0,c.Z)('hide_moved_students_in_journal',r),e((0,o.e)('marks  > .cells:last > .cell.transition.cell_inactive')).each((function(){var r=this.getAttribute('name');e(this).parents('.grid-group').find('div.cell[name="'.concat(r,'"]')).toggleClass('hide',t)})),e((0,o.e)('num')).each((function(){e(this).find('.cell:not(.hide)').each((function(t){var r=this.getAttribute('name'),n=t+1,o=n%2==1;e(this).text(n),e('div.cell[name="'.concat(r,'"]')).toggleClass('cell-color-odd',o).toggleClass('cell-color-even',!o)}))}))}));var v=e('#grid').find('div.cell-day-status'),h=e('#column_icons_buttons').find('.button');h.on('click',(function(){if(!e(this).hasClass('active')){h.removeClass('active'),e(this).addClass('active');var t=e(this).data('val');'yes'===t?(v.children().removeClass('fa-hidden'),e('#showhtandthemetooltip').prop('disabled',!1)):'only_for_unfilled'===t?(v.find('.green.fa').addClass('fa-hidden'),v.find('.red.fa').removeClass('fa-hidden'),e('#showhtandthemetooltip').prop('disabled',!0)):'no'===t&&(v.children().addClass('fa-hidden'),e('#showhtandthemetooltip').prop('disabled',!0)),(0,c.Z)('journal_HT_and_theme_icons',t).catch((function(t){console.error(t)}))}return!1}));var p=e('#marks_highlight_buttons button');p.on('click',(function(){if(!e(this).hasClass('active')){p.removeClass('active'),e(this).addClass('active');var t=e(this).data('val');s(t).then((function(){window.MarksHighlighting.highlightAllCommonCells(t),a.marks_highlight=t}),(function(t){alert(t)})).catch((function(t){console.error(t)}))}return!1})),e('#showhtandthemetooltip').on('click',(function(){var t=!e(this).hasClass('active');e(this).toggleClass('active');var r=t?'yes':'no';return'yes'===r?v.find('.showTooltip').tooltip({attr:'tooltip_title'}):(v.find('.showTooltip').each((function(){e(this).attr('tooltip_title',e(this).data('title'))})),v.find('.showTooltip').removeData('title').tooltip({title2:!0})),(0,c.Z)('journal_HT_and_theme_tooltips',r),!1})),e('#showavgcw').on('click',(function(){var t=!e(this).hasClass('active');e(this).toggleClass('active');var r=t?'yes':'no';return(0,c.Z)('journal_marks_showavgcw',r),e((0,o.e)(['avg_cw_header','avg_cw'])).toggleClass('cells_invisible',!t).toggleClassy(t),window.Grid.refresh(),!1})),e('#showavgnotcw').on('click',(function(){var t=!e(this).hasClass('active');e(this).toggleClass('active');var r=t?'yes':'no';return(0,c.Z)('journal_marks_showavgnotcw',r),e((0,o.e)(['avg_not_cw_header','avg_not_cw'])).toggleClass('cells_invisible',!t).toggleClassy(t),window.Grid.refresh(),!1})),e('#showconstavgwithdebts').on('click',(function(){var t=!e(this).hasClass('active');e(this).toggleClass('active');var r=t?'yes':'no';return(0,c.Z)('journal_marks_showavgwithdebts',r),e((0,o.e)(['avg_not_cw_with_debt_header','const_avg_with_debts'])).toggleClass('cells_invisible',!t).toggleClassy(t),window.Grid.refresh(),!1}));var b=e('#ext_show_cat'),y=e('#ext_show_avg'),k=e('#ext_show_target, #ext_show_target_student_journal');b.on('click',(function(){return e(this).hasClass('active')?(e(this).removeClass('active'),(0,c.Z)('journal_marks_ext','none').then((function(){top.location.reload()})).catch((function(t){console.error(t)}))):(e(this).addClass('active'),y.removeClass('active'),k.removeClass('active'),(0,c.Z)('journal_marks_ext','cat').then((function(){top.location.reload()})).catch((function(t){console.error(t)}))),n._.hide(),r(),!1})),y.on('click',(function(){return e(this).hasClass('active')?(e(this).removeClass('active'),(0,c.Z)('journal_marks_ext','none').then((function(){top.location.reload()})).catch((function(t){console.error(t)}))):(e(this).addClass('active'),b.removeClass('active'),k.removeClass('active'),(0,c.Z)('journal_marks_ext','avg').then((function(){top.location.reload()})).catch((function(t){console.error(t)}))),n._.hide(),r(),!1})),k.on('click',(function(){return e(this).hasClass('active')?(e(this).removeClass('active'),s('normal').then((function(){(0,c.Z)('journal_marks_ext','none').then((function(){top.location.reload()})).catch((function(t){console.error(t)}))}),(function(t){alert(t)})).catch((function(t){console.error(t)}))):(e(this).addClass('active'),b.removeClass('active'),y.removeClass('active'),s('isp').then((function(){(0,c.Z)('journal_marks_ext','target').then((function(){top.location.reload()})).catch((function(t){console.error(t)}))}),(function(t){alert(t)})).catch((function(t){console.error(t)}))),n._.hide(),r(),!1})),e('#ext_show_previous_final_marks').on('click',(function(){g(e(this),'journal_marks_show_prev_finals','yes','no')})),e('#ext_show_custom_column_final_marks').on('click',(function(){g(e(this),'journal_marks_show_custom_finals','yes','no')}));var A=e((0,o.e)('settings')),S=A.siblings('.button');A.on('click',(function(){return n._.toggle(this,{id:'contextSettings',alignHorizontal:'right',isFixed:window.Grid&&1===window.Grid.posMode,isInGrid:!0,onShow:function(){S.removeClass('active'),A.addClass('active')},onClose:function(){S.removeClass('active'),A.removeClass('active')}}),!1}))}(m=_(document.querySelectorAll('.js-extra-hours-count-editable')))&&m.length&&m.forEach((function(t){t.addEventListener('click',(function(t){var r=window.curgrp,i=window.JournalConfig.groupsData[r],a=window.JournalConfig.sp,s=window.JournalConfig.classTitle,c=new w({propsData:{extraHours:Number(i.extraHours||0),groupId:r,period:a,className:s}});c.$on('updated',(function(a){i.extraHours=a,t.target.innerText=i.extraHours,n._.hide({id:'extra-hours-editor'}),e((0,o.e)('journal [id$=_avg_extra_hours] div.cell',[r])).each((function(){(0,l.it)(this,(0,u.Z)(r))}))})),n._.toggle(t.target,{id:'extra-hours-editor',closable:!1,noPadding:!0,alignHorizontal:'center',vue:c})}))}))}}))},17595:function(t,e,r){'use strict';function n(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=0,i=0;(e=t,function(t){return t.filter((function(t){var e,r;return!(null===(e=t.set)||void 0===e||!e.control||null===(r=t.set)||void 0===r||!r.lms_type||'mark'===t.set.lms_type&&''===t.mark)}))}(e).map((function(t){return'debt'===t.set.lms_type&&(t.mark=1),t}))).forEach((function(t){var e=t.set;if(!e||!e.inactive){var r=Number(e.weight)||1,a=parseFloat(t.mark)*r;if(!n||0!==a){var s=1;Number.isNaN(a)&&!Number(t.set.control)&&1!==Number(t.set.control)||(s=r),o+=s,i+=a}}}));var a=0;return o>0&&(a=i/o),{marksNumber:o,sum:i,totalAverage:0!==a?a.toFixed(r):a}}r.d(e,{QE:function(){return n}})},45221:function(t,e,r){'use strict';r.d(e,{Z:function(){return O}});var n=r(64082),o=r(46189);var i=r(50361),a=r.n(i);function s(t){return s='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&'function'==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?'symbol':typeof t},s(t)}function c(t){return function(t){if(Array.isArray(t))return u(t)}(t)||function(t){if('undefined'!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t['@@iterator'])return Array.from(t)}(t)||function(t,e){if(!t)return;if('string'==typeof t)return u(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);'Object'===r&&t.constructor&&(r=t.constructor.name);if('Map'===r||'Set'===r)return Array.from(t);if('Arguments'===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return u(t,e)}(t)||function(){throw new TypeError('Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.')}()}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function l(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function f(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?l(Object(r),!0).forEach((function(e){d(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function d(t,e,r){var n;return n=function(t,e){if('object'!=s(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||'default');if('object'!=s(n))return n;throw new TypeError('@@toPrimitive must return a primitive value.')}return('string'===e?String:Number)(t)}(e,'string'),(e='symbol'==s(n)?n:String(n))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var m={sum:0,marksNumber:0,gainedPercent:0,maxPossibleMark:0,substruct:0,notInRatingScale:!1,moreMiss:!1,moreMinMarks:!1,partMarkPercent:''},g={withoutCwAcc:f({},m),cwAcc:f({},m),totalAverageAcc:f({},m),cwWithDebts:f({},m)};function v(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return t.reduce((function(t,n){var o=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=!(!t.set||!t.set.weight||0===Number(t.set.weight)),o=n?t.set.weight:r,i=window;o=i.weight_on?o:1,o=i.weight_float?o:Number(o);var s=parseFloat(t.mark),c=s*o,u=a()(g);return o=0===c&&0===o?0:o,t.set.id&&0===t.set.weight&&e.isIgnoreMarkWeightZeroForAvg||(t.set&&t.set.control?(u.cwAcc.sum+=c||0,u.cwAcc.marksNumber+=o):e.countAvgNotCwIfTypeWithWeightZero&&!n?(u.withoutCwAcc.sum+=s,u.withoutCwAcc.marksNumber+=1):e.countAvgNotCwIfTypeWithWeightZero||(u.withoutCwAcc.sum+=c||0,u.withoutCwAcc.marksNumber+=o),u.totalAverageAcc.sum+=c||0,u.totalAverageAcc.marksNumber+=o),u}(n,e,r);return Object.keys(t).forEach((function(e){Object.keys(t[e]).forEach((function(r){Number.isNaN(o[e][r])||(t[e][r]+=o[e][r])}))})),t}),a()(g))}function h(t,e,r){var n=r.usualWeight,o=v(t,e,n),i=t.filter((function(t){return Number(t.set.control)})),a=t.filter((function(t){return!Number(t.set.control)})),s=t.map((function(t){return t.set}));t.forEach((function(t,e){s[e].value=t.mark}));var c=function(t,e,r){var n={cwAcc:{maxPossibleMark:0},withoutCwAcc:{maxPossibleMark:0},totalAverageAcc:{maxPossibleMark:0}};return t.reduce((function(t,o){var i=window,a=i.weight_on,s=i.weight_float,c=o.weight||0===o.weight?o.weight:e;a||(c=1),s||(c=parseInt(String(c),10));var u=o.max_mark*c;return o.inactive||Number.isNaN(o.value)&&r.ignore_justifiable_miss&&o.miss&&('b'===o.miss||'u'===o.miss)&&!Number(o.control)||Number.isNaN(u)?t:(Number(o.control)?n.cwAcc.maxPossibleMark+=u:n.withoutCwAcc.maxPossibleMark+=u,r.required_works_on&&!o.required||(n.totalAverageAcc.maxPossibleMark+=u),n)}),n)}(s,n,e);return o.cwAcc.maxPossibleMark=c.cwAcc.maxPossibleMark,o.withoutCwAcc.maxPossibleMark=c.withoutCwAcc.maxPossibleMark,o.totalAverageAcc.maxPossibleMark=c.totalAverageAcc.maxPossibleMark,t.forEach((function(t){t.set&&t.set.substruct&&(o.totalAverageAcc.substruct+=1)})),Object.keys(o).forEach((function(t){var e=o[t];e.gainedPercent=e.sum/e.maxPossibleMark*100||0,(e.gainedPercent>100||e.gainedPercent<0)&&(e.gainedPercent=100)})),(0===o.withoutCwAcc.maxPossibleMark&&0===o.withoutCwAcc.sum&&a.length&&o.withoutCwAcc.maxPossibleMark||0===o.withoutCwAcc.maxPossibleMark&&a.length)&&(o.withoutCwAcc.gainedPercent=100),(0===o.cwAcc.maxPossibleMark&&0===o.cwAcc.sum&&i.length&&o.cwAcc.maxPossibleMark||0===o.cwAcc.maxPossibleMark&&i.length)&&(o.cwAcc.gainedPercent=100),(0===o.totalAverageAcc.maxPossibleMark&&0===o.totalAverageAcc.sum&&(i.length||a.length)&&o.totalAverageAcc.maxPossibleMark||0===o.totalAverageAcc.maxPossibleMark&&(i.length||a.length))&&(o.totalAverageAcc.gainedPercent=100),e.calc_avg_rating&&(o.withoutCwAcc.maxPossibleMark||o.withoutCwAcc.gainedPercent?o.cwAcc.maxPossibleMark||o.cwAcc.gainedPercent?o.totalAverageAcc.gainedPercent=Math.round((o.withoutCwAcc.gainedPercent+o.cwAcc.gainedPercent)/2).toFixed(0):o.totalAverageAcc.gainedPercent=Math.round(o.withoutCwAcc.gainedPercent):o.totalAverageAcc.gainedPercent=Math.round(o.cwAcc.gainedPercent)),o}function p(t,e,r,n){var o=n.typesForMaxMark,i=n.incomingMarks;return e.declaring_marks_on?function(t,e,r,n,o){var i={calc_avg_rating:r.calc_avg_rating,usualWeight:n,required_works_on:r.required_works_on,typesForMaxMark:o,ignore_justifiable_miss:r.ignore_justifiable_miss},a=h(t,r,i),s=a.cwAcc;(s.gainedPercent>100||0===s.sum&&0===s.maxPossibleMark)&&(s.gainedPercent=100);var u=0,l=t.reduce((function(e,o,i){var a=o.set.control,s=o.set.declaring_ignore,l=o.set.weight||n;if(a){var f=l*Number(o.mark)/(Number(o.set.max_mark)*l)*100,d=t.slice(u,i);u=i;var m=f>=r.declaring_marks_percent||s?d.filter((function(t){return!t.set.control})):[];return[].concat(c(e),c(m))}return c(e)}),[]),f=0===u?u:u+1,d=t.slice(f).filter((function(t){return!Number(t.set.control)}));l.push.apply(l,c(d.filter((function(t){return!t.set.transition})))),l.push.apply(l,c(t.filter((function(t){return t.set.transition&&!Number(t.set.control)}))));var m=h(l,r,i).withoutCwAcc;m.maxPossibleMark=a.withoutCwAcc.maxPossibleMark,m.gainedPercent=m.maxPossibleMark>0?Number((m.sum/m.maxPossibleMark*100).toFixed(0)):'100',(m.gainedPercent>100||0===m.sum&&0===m.maxPossibleMark)&&(m.gainedPercent=100);var g=h([].concat(c(l),c(t.filter((function(t){return Number(t.set.control)})))),r,i).totalAverageAcc;g.maxPossibleMark=a.totalAverageAcc.maxPossibleMark,g.gainedPercent=g.maxPossibleMark>0?Number((g.sum/g.maxPossibleMark*100).toFixed(0)):'100',(g.gainedPercent>100||0===g.sum&&0===g.maxPossibleMark)&&(g.gainedPercent=100),g.marksNumber=a.totalAverageAcc.marksNumber;var v=o.some((function(t){var r=(t.date||'').slice(0,10),n=e.find((function(t){return t.set&&t.set.date&&t.set.date.includes(r)}));return!(n&&n.set&&Number(n.set.control)&&n.set.transition||!Number(t.control))})),p=t.some((function(t){return!!Number(t.set.control)})),b={cwAcc:s,withoutCwAcc:m,totalAverageAcc:g};return v&&!p&&Object.keys(b).forEach((function(t){Object.keys(b[t]).forEach((function(e){b[t][e]=0}))})),b}(t,i,e,r,o):h(t,e,{calc_avg_rating:e.calc_avg_rating,required_works_on:e.required_works_on,ignore_justifiable_miss:e.ignore_justifiable_miss,usualWeight:r,typesForMaxMark:o})}function b(t){return Object.keys(t).forEach((function(e){if('id'!==e){var r=t[e].sum/t[e].marksNumber||0;t[e].totalAverage=r}})),t}function y(t,e){var r=Math.pow(10,e);return(Math.round(t*r)/r).toFixed(e)}function w(t){return w='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&'function'==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?'symbol':typeof t},w(t)}function _(t){return function(t){if(Array.isArray(t))return k(t)}(t)||function(t){if('undefined'!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t['@@iterator'])return Array.from(t)}(t)||function(t,e){if(!t)return;if('string'==typeof t)return k(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);'Object'===r&&t.constructor&&(r=t.constructor.name);if('Map'===r||'Set'===r)return Array.from(t);if('Arguments'===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return k(t,e)}(t)||function(){throw new TypeError('Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.')}()}function k(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function A(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function S(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?A(Object(r),!0).forEach((function(e){x(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):A(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function x(t,e,r){return(e=C(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function j(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,'value'in n&&(n.writable=!0),Object.defineProperty(t,C(n.key),n)}}function C(t){var e=function(t,e){if('object'!=w(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||'default');if('object'!=w(n))return n;throw new TypeError('@@toPrimitive must return a primitive value.')}return('string'===e?String:Number)(t)}(t,'string');return'symbol'==w(e)?e:String(e)}var P=function(){function t(e,r,n,o,i,a,s,c,u,l){var f;!function(t,e){if(!(t instanceof e))throw new TypeError('Cannot call a class as a function')}(this,t),this.marks=[],this.sets=[],this.allowedMarks=[],this.usualWeight=1,this.markSystem='',this.currentSystemMethod=null,this.typesForMaxMark=[],this.studentId='',this.localSets=[],this.CSPeriodIsStarted=!1,this.marksRaw=[],this.marktype=!1,this.incomingMarks=[],this.missCount=0,this.lescount=0,this.countLessons=0,this.countLessonsWithoutMiss=0,this.marks=e,this.incomingMarks=e,this.sets=this.marks.map((function(t){return t.set})),this.allowedMarks=n,this.config=r,this.usualWeight=o,this.currentSystemMethod=null,this.typesForMaxMark=i,this.groupId=String(a),this.studentId=String(s),this.currentAcc={},this.localSets=[],this.CSPeriodIsStarted=u,this.marksRaw=l||[],this.marktype=c,window.teacher?this.localSets=this.config.groupsData?this.config.groupsData[this.groupId].sets:[]:void 0!==this.config.sets_by_lessons&&void 0!==this.config.sets_by_lessons[this.studentId]&&(this.localSets=this.config.sets_by_lessons[this.studentId]),this.parseMarks(),this.defineMarkSystem(),f=this.config.groupBySets?this.getAverageBySets():this.currentSystemMethod(),this.currentAcc=this.finalTransformsWithResult(f);var d=this.getCountLessons(),m=d.countLessons,g=d.countLessonsWithoutMiss;this.countLessons='default'===this.config.type_calc_miss_in_part?m:this.lescount,this.countLessonsWithoutMiss=g}var e,r,i;return e=t,r=[{key:'roundTo',get:function(){var t=2,e=this.config.avgControl;return t=void 0===e||void 0===e.round?t:e.round,(void 0!==this.config.isPercent&&this.config.isPercent||void 0!==this.config.isRating&&this.config.isRating)&&(t=1),this.config.isCS&&this.marktype&&(t=0),t}},{key:'acuniq',get:function(){return this.marks?this.marks.length:0}},{key:'parseMarks',value:function(){var t=this,e=this.marks.map((function(e){e.set.lescount&&(t.lescount+=1),e.set.misscount&&(t.missCount+=1);var r=(0,n.p)(e,t.config,t.allowedMarks);return r?(e.parsed=r,e):e})).reduce((function(t,e){if(!(e&&e.parsed&&e.parsed.marks&&e.parsed.marks.length))return t;var r=2===e.parsed.marks.length?[e,{mark:e.mark,parsed:S({},e.parsed),set:S({},e.set)}]:[e];return r.forEach((function(t,e){if(t&&t.parsed){var r=t.parsed.marks;t.mark=0===e?parseFloat(r[0]):parseFloat(r[1])}})),[].concat(_(t),r)}),[]);if(this.config.required_works_on&&(this.config.groupBySets||this.config.isRating)){var r=this.sets.filter((function(e){return 1===Number(e.required)&&(!t.config.groupBySets||0!==Number(e.set_id))}));r.forEach((function(o,i){var a=o.date,s=e.some((function(t){return t.set.date===a}));if(!s&&(1===Number(o.control)||!t.config.ignore_justifiable_miss||'u'!==o.miss&&'b'!==o.miss)){var c={mark:0,parsed:(0,n.p)(0,t.config,t.allowedMarks),set:r[i]};e.push(c)}}))}this.config.countAvgWithTypesOnly&&(e=e.filter((function(t){return t.set.id>0}))),this.config.countAvgNotCwIfTypeWithWeightZero&&(e=e.map((function(t){return t.set.id>0&&0===t.set.weight&&(t.set.control=!1),t}))),this.marks=e}},{key:'defineMarkSystem',value:function(){var t=this;this.config.isCS?(this.markSystem='criterial',this.currentSystemMethod=this.getCriterialAverage):this.config.isRating?(this.markSystem='rating',this.currentSystemMethod=this.getRatingAverage,this.marks=this.marks.filter((function(t){return t.set}))):(this.markSystem='ariphmetic',this.currentSystemMethod=this.getAriphmeticAverage),this.marks=this.marks.filter((function(e){return!!(!Number.isNaN(parseFloat(e.mark))||t.config.isRating&&t.config.max_mark_on&&e.set&&0!==e.set.id||t.config.groupBySets)&&(t.config.isRating&&e.set&&0===e.set.id&&(e.set.max_mark=0),!0)}))}},{key:'resetAccValues',value:function(t){var e=['sum','totalAverage','gainedPercent','notInRatingScale'];Object.keys(t).forEach((function(r){e.forEach((function(e){t[r].marksNumber&&!String(t[r][e]).includes('NaN')||Object.keys(t[r]).includes(e)&&(t[r][e]='')}))}))}},{key:'isKrMark',value:function(t){return 1===Number(t.set.control)&&0!==Number(t.set.set_id)}},{key:'getAverageBySets',value:function(){var t=this,e=[],r=[];this.marks.forEach((function(n){t.isKrMark(n)?e.push(n):r.push(n)}));var n=this.marks.reduce((function(t,e){var r=e.set.set_id;return t[r]||(t[r]=[]),t[r].push(e),t}),{}),o=this.getAverageData(e),i=this.getAverageData(r),a=Object.keys(n).reduce((function(e,r){return S(S({},e),{},x({},r,t.getAverageData(n[r])))}),{}),s=this.getSetsAverage(a,this.localSets);return a.sets=this.localSets,{totalAverageAcc:S({},s),cwAcc:S({},o),withoutCwAcc:S({},i),localSets:a}}},{key:'getSetsAverage',value:function(t,e){var r=this,n=0,o=0;Object.keys(e).forEach((function(i){var a=e[i],s=Number(a.weight)||1;t[i]&&Number(t[i].totalAverage)&&(o+=parseFloat(y(t[i].totalAverage,r.roundTo))*s),n+=s}));var i=0;return n>0&&(i=o/n),{marksNumber:n,sum:o,totalAverage:i}}},{key:'getAverageData',value:function(t){var e=this,r=0,n=0;t.forEach((function(t){var o=t.set;if(!o||!o.inactive){var i=Number(o.weight)||1,a=parseFloat(t.mark)*i;e.config.isRating&&e.config.max_mark_on&&Number(t.set.id)&&(a*=100/Number(o.max_mark));var s=1;Number.isNaN(a)&&!Number(t.set.control)&&1!==Number(t.set.control)||(s=i),r+=s,n+=a}}));var o=0;return r>0&&(o=n/r),{marksNumber:r,sum:n,totalAverage:o}}},{key:'checkMiss',value:function(t){var e=this.config.avgControl,r=e&&e.min_presence_percent,n=e&&void 0!==e.min_marks?e.min_marks:3;this.acuniq<n&&(t.moreMinMarks=!0),r&&Math.round(100*this.missCount/this.countLessons)>100-r&&(t.moreMiss=!0)}},{key:'getCriterialAverage',value:function(){var t=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=c(Array.from(new Set(t.filter((function(t){return t.set&&(t.set.id||0===Number(t.set.id))&&t.set.control})))).map((function(t){return t.set.id}))).reduce((function(e,r){return f(f({},e),{},d({},r,t.filter((function(t){return t.set&&t.set.id===r}))))}),{}),o=Object.keys(n).map((function(t){return v(n[t],e,r)}));return Object.keys(n).forEach((function(t,e){o[e].id=Number(t)})),o}(this.marks,this.config,this.usualWeight);t.forEach((function(t){b(t)}));var e=this.getAriphmeticAverage();return this.CSPeriodIsStarted||Object.keys(e.totalAverageAcc).forEach((function(t){e.totalAverageAcc[t]=e.withoutCwAcc[t]})),S(S({},e),{},{sets:t})}},{key:'getAriphmeticAverage',value:function(){var t=v(this.marks,this.config,this.usualWeight);return this.config.countAvgTotalCWOnly&&(t.totalAverageAcc=S({},t.cwAcc)),b(t)}},{key:'getRatingAverage',value:function(){var t=b(p(this.config.ignore_simple_marks?this.marks.filter((function(t){return t.set&&Object.keys(t.set).length&&(t.set.id||t.set.mtype&&t.set.mtype.length)||t.set.old_trs&&t.set.mdate})):this.marks,this.config,this.usualWeight,{typesForMaxMark:this.typesForMaxMark,incomingMarks:this.incomingMarks})),e=30;if(this.config.isRating&&void 0!==window.rating_scale&&(e=window.rating_scale[3].min),Object.keys(t).forEach((function(r){var n=t[r].gainedPercent;parseInt(n,10)<e&&(t[r].notInRatingScale=!0)})),window.part_max_mark_on){var r=window.journal_part_max_marks?Number(window.journal_part_max_marks[this.groupId]):Number(this.config.part_max_mark_list[this.studentId]),n=t.totalAverageAcc,o=n.sum>=r?100:Math.round(n.sum/r*100);n.partMarkPercent=o?''.concat(o,'%'):''}return t}},{key:'finalTransformsWithResult',value:function(t){var e=this;return t=this.round(t,this.roundTo),Object.keys(t).forEach((function(r){e.config.groupBySets&&'totalAverageAcc'===r&&(t[r].gainedPercent=t[r].sum),e.config.groupBySets&&'withoutCwAcc'===r&&(t[r].sum=t[r].totalAverage),t[r].gainedPercent=''.concat(Math.round(parseFloat(t[r].gainedPercent)),'%'),t[r].sum=y(t[r].sum,e.roundTo),t[r].totalAverage=y(t[r].totalAverage,e.roundTo)})),t}},{key:'returnTotalValues',value:function(t,e){if(this.resetAccValues(t),'totalAverageAcc'===e&&this.checkMiss(t[e]),this.config&&this.config.isLetteredTen){var r=function(t,e){if(!e&&!Array.isArray(e))return t.toString();var r=e[(t=Math.round(t))-1];return String(t>0&&t<11?r:t)}(t[e].totalAverage,this.config.letteredTenMarks||[]);r=r?r.toString().toUpperCase():r,t[e].totalAverage=r}return this.deletePrivateKeys(t[e])}},{key:'getCells',value:function(){var t=this.marksRaw.filter((function(t){return t.set&&!Number.isNaN(t.set.id)})).reduce((function(t,e){var r,n=(0,o.l)(e.set.date);return S(S({},t),{},x({},n.date,S(S({},(null==t?void 0:t[n.date])||{}),{},x({},n.num||'0',[].concat(_((null==t||null===(r=t[n.date])||void 0===r?void 0:r[n.num||'0'])||[]),[e])))))}),{});return Object.keys(t).forEach((function(e){Object.prototype.hasOwnProperty.call(t,e)&&(t[e]=Object.values(t[e]))})),Object.values(t)}},{key:'getCountLessons',value:function(){return this.getCells().reduce((function(t,e){return t.countLessons+=e.length,t.countLessonsWithoutMiss+=e.filter((function(t){return t.every((function(t){return'miss'!==t.set.missType}))})).length,t}),{countLessons:0,countLessonsWithoutMiss:0})}},{key:'getTotalExtraHours',value:function(){return this.countLessonsWithoutMiss}},{key:'getAverageByLocalSets',value:function(){return this.currentAcc.localSets}},{key:'getCwAverage',value:function(){return this.returnTotalValues(this.currentAcc,'cwAcc')}},{key:'getWithoutCwAverage',value:function(){return this.returnTotalValues(this.currentAcc,'withoutCwAcc')}},{key:'getTotalAverage',value:function(){if(this.config.subtract_rating_ball_for_miss){var t=Number(this.config.subtract_rating_ball_for_miss)*this.currentAcc.totalAverageAcc.substruct;this.currentAcc.totalAverageAcc.gainedPercent=''.concat(parseInt(this.currentAcc.totalAverageAcc.gainedPercent,10)-t,'%')}return this.returnTotalValues(this.currentAcc,'totalAverageAcc')}},{key:'getSetAverage',value:function(t){var e=this.getCriterialAverage().sets.find((function(e){return e.id===Number(t)}))||{};delete e.id;var r=this.round(e,0).totalAverageAcc||{};return this.deletePrivateKeys(r)}},{key:'deletePrivateKeys',value:function(t){var e=[];switch(this.markSystem){case'ariphmetic':case'criterial':e=['maxPossibleMark','gainedPercent','substruct','gainedPercent','notInRatingScale','partMarkPercent'];break;case'rating':e=['totalAverage','substruct'];break;default:e=[]}var r=t;return Object.keys(r).forEach((function(t){e.indexOf(t)>-1&&delete r[t]})),r}},{key:'round',value:function(t,e){var r=this,n=void 0===e?this.roundTo:e,o=t;return Object.keys(o).forEach((function(t){if('sets'!==t&&'localSets'!==t){var e=o[t];e.sum=y(e.sum,n),e.totalAverage=y(e.totalAverage,n)}else'localSets'===t&&(o[t]=r.round(o[t],n))})),o}}],r&&j(e.prototype,r),i&&j(e,i),Object.defineProperty(e,'prototype',{writable:!1}),t}(),O=P},8849:function(t,e,r){'use strict';r.d(e,{Fw:function(){return l},it:function(){return v},jO:function(){return h},nG:function(){return f},pj:function(){return m},c:function(){return g},On:function(){return d}});var n=r(83886),o=r(48765);function i(t,e){var r='undefined'!=typeof Symbol&&t[Symbol.iterator]||t['@@iterator'];if(!r){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if('string'==typeof t)return a(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);'Object'===r&&t.constructor&&(r=t.constructor.name);if('Map'===r||'Set'===r)return Array.from(t);if('Arguments'===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a(t,e)}(t))||e&&t&&'number'==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError('Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.')}var i,s=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return s=t.done,t},e:function(t){c=!0,i=t},f:function(){try{s||null==r.return||r.return()}finally{if(c)throw i}}}}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function s(t,e,r){var n,o=null==r||null===(n=r.lessonIdsByName)||void 0===n?void 0:n[e];if(!o)return'';var a=null==r?void 0:r.paletteScalesByLessonId[o];if(!a)return'';var s,c=-Math.round(-parseFloat(t)),u=i(a);try{for(u.s();!(s=u.n()).done;){var l=s.value;if(c>=l.min&&c<=l.max)return'color: '.concat(l.color,' !important;')}}catch(t){u.e(t)}finally{u.f()}return''}function c(t,e,r){return r?t&&r[t]&&r[t][e]?r[t][e]:r[e]:null}function u(t){t.classList.remove('cell_avg_not_enough'),t.classList.remove('notclosed'),t.removeAttribute('min_marks'),t.removeAttribute('last_two'),t.removeAttribute('miss')}function l(t,e,r){var n;if(t){var i=window,a=i.$,l=i.JournalConfig,f=l.isSpecialColorfulMarksEnabled,d=c((a(t).parent().parent().attr('id')||'').replace(/g([0-9]*)\_.*/,'$1'),t.getAttribute('name')||'',e);if(d){u(t);var m=d.total,g=l.compute_rating_percent?m.gainedPercent:m.sum;if(null!==(n=window.JournalConfig.palette)&&void 0!==n&&n.isGradationMarksEnabled){var v=s(g,String(t.getAttribute('name')),window.JournalConfig.palette);t.setAttribute('style',v)}else f&&(t.style=(0,o.h)(g));t.innerText=g}}}function f(t,e,r){if(t){var i=window.$,a=r||window.JournalConfig,l=a.isRating,f=a.isSpecialColorfulMarksEnabled,d=c((i(t).parent().parent().attr('id')||'').replace(/g([0-9]*)\_.*/,'$1'),t.getAttribute('name')||'',e);if(d){u(t);var m=!1,g=d.cw,v=l?g.sum:g.totalAverage;if(l){t.innerHTML=(0,n.Z)(v,'','',g.gainedPercent,''),g.notInRatingScale&&(m=!0)}else{var h;if(null!==(h=window.JournalConfig.palette)&&void 0!==h&&h.isGradationMarksEnabled){var p=s(v,String(t.getAttribute('name')),a.palette);t.setAttribute('style',p)}else f&&(t.style=(0,o.h)(v));t.innerText=v}t.classList.toggle('notclosed',m)}}}function d(t,e,r){if(t){var i=window.$,a=r||window.JournalConfig,l=a.isRating,f=a.isSpecialColorfulMarksEnabled,d=c((i(t).parent().parent().attr('id')||'').replace(/g([0-9]*)\_.*/,'$1'),t.getAttribute('name')||'',e);if(d){u(t);var m=!1,g=d.withoutCw,v=l?g.sum:g.totalAverage;if(l){t.innerHTML=(0,n.Z)(v,'','',g.gainedPercent,''),g.notInRatingScale&&(m=!0)}else{var h;if(null!==(h=window.JournalConfig.palette)&&void 0!==h&&h.isGradationMarksEnabled){var p=s(v,String(t.getAttribute('name')),window.JournalConfig.palette);t.setAttribute('style',p)}else f&&(t.style=(0,o.h)(v));t.innerText=v}t.classList.toggle('notclosed',m)}}}function m(t,e,r){var n;if(t){var i=window.$,a=r||window.JournalConfig,l=a.isSpecialColorfulMarksEnabled;if(a.show.const_avg_with_debts_enabled){var f=c((i(t).parent().parent().attr('id')||'').replace(/g([0-9]*)\_.*/,'$1'),t.getAttribute('name')||'',e);if(f){u(t);var d=f.cwWithDebts.totalAverage;if(d){if(null!==(n=window.JournalConfig.palette)&&void 0!==n&&n.isGradationMarksEnabled){var m=s(d,String(t.getAttribute('name')),window.JournalConfig.palette);t.setAttribute('style',m)}else l&&(t.style=(0,o.h)(d));t.innerText=d,t.classList.toggle('notclosed',!1)}}}}}function g(t,e,r){var n;if(t){var i=window.$,a=r||window.JournalConfig,l=(i(t).parent().parent().attr('id')||'').replace(/g([0-9]*)\_.*/,'$1'),f=i(t).parent().attr('mt_id')||'',d=c(l,t.getAttribute('name')||'',e);if(d){u(t);var m=d.sets[f]||{},g=m.totalAverage?(Math.round(m.totalAverage*Math.pow(10,a.roundAverageTo))/Math.pow(10,a.roundAverageTo)).toFixed(a.roundAverageTo):'';if(null!==(n=window.JournalConfig.palette)&&void 0!==n&&n.isGradationMarksEnabled){var v=s(g,String(t.getAttribute('name')),window.JournalConfig.palette);t.setAttribute('style',v)}else a.isSpecialColorfulMarksEnabled&&(t.style=(0,o.h)(g));t.innerText=g}}}function v(t,e){var r=($(t).parent().parent().attr('id')||'').replace(/g([0-9]*)\_.*/,'$1'),n=c(r,t.getAttribute('name')||'',e),o=window.JournalConfig.groupsData[r];if($(t).removeClass('cell--extra-hours-notenough').removeClass('cell--extra-hours-enough'),o&&o.isExtra&&o.extraHours){var i=o.extraHours||0;n.totalExtraHours<i?$(t).addClass('cell--extra-hours-notenough'):$(t).addClass('cell--extra-hours-enough'),t.innerText=n.totalExtraHours}}function h(t,e,r){if(t){var i=window,a=i.$,l=i.JournalConfig,f=l.isExtday,d=l.studentId,m=l.currentGroup,g=f&&d?d:t.getAttribute('name')||'',v=f&&m?m:(a(t).parent().parent().attr('id')||'').replace(/g([0-9]*)\_.*/,'$1'),h=!1,p=r||window.JournalConfig,b=!!window.part_max_mark_list&&window.part_max_mark_list[g],y=c(v,g,e);if(y){u(t);var w=y.total,_=y.localSets,k=function(t){return t.isRating?t.compute_rating_percent?'gainedPercent':'sum':'totalAverage'}(window.JournalConfig),A=w[k];p.isRating&&w&&w.notInRatingScale&&!p.part_max_mark_on&&!b&&(h=!0),p.isRating&&p.isGainedPercentShowInResult&&(w.partMarkPercent=w.gainedPercent),function(t,e,r,i){var a=i.part_max_mark_on;if(i.isRating&&a)t.innerHTML=(0,n.Z)(e.sum,'','',e.partMarkPercent,'');else{var c,u=e.sum?r:'';if(null!==(c=i.palette)&&void 0!==c&&c.isGradationMarksEnabled){var l=s(u,String(t.getAttribute('name')),i.palette);t.setAttribute('style',l)}else i.isSpecialColorfulMarksEnabled&&(t.style=(0,o.h)(u));t.textContent=u}}(t,w,A,p),w.moreMiss&&(t.classList.add('cell_avg_not_enough'),t.setAttribute('miss','yes')),w.moreMinMarks&&(t.classList.add('cell_avg_not_enough'),t.setAttribute('min_marks','yes')),(document.querySelectorAll('.cells[data-column-type=avg]')||[]).forEach((function(t){var e=t.getAttribute('set_id'),r=t.querySelector('.cell[name="'.concat(g,'"]'));if(e&&r){var n='';e&&_&&_[e]&&_[e]&&(n=_[e].totalAverage),r.innerHTML=n}})),t.classList.toggle('notclosed',h)}else t.classList.remove('notclosed')}}},58579:function(t,e,r){'use strict';r.d(e,{Z:function(){return x}});var n=r(17595),o=r(43110),i=r(15769),a={color:'#000',colorname:'black',control:!1,declaring_ignore:!1,global:!1,id:0,max_mark:'',mtype:'',mtype_short:'',required:!1,set_id:0,weight:1};function s(t){return s='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&'function'==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?'symbol':typeof t},s(t)}function c(t){return function(t){if(Array.isArray(t))return u(t)}(t)||function(t){if('undefined'!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t['@@iterator'])return Array.from(t)}(t)||function(t,e){if(!t)return;if('string'==typeof t)return u(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);'Object'===r&&t.constructor&&(r=t.constructor.name);if('Map'===r||'Set'===r)return Array.from(t);if('Arguments'===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return u(t,e)}(t)||function(){throw new TypeError('Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.')}()}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function l(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function f(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?l(Object(r),!0).forEach((function(e){d(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function d(t,e,r){var n;return n=function(t,e){if('object'!=s(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||'default');if('object'!=s(n))return n;throw new TypeError('@@toPrimitive must return a primitive value.')}return('string'===e?String:Number)(t)}(e,'string'),(e='symbol'==s(n)?n:String(n))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function m(t){return m='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&'function'==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?'symbol':typeof t},m(t)}function g(t){return function(t){if(Array.isArray(t))return v(t)}(t)||function(t){if('undefined'!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t['@@iterator'])return Array.from(t)}(t)||function(t,e){if(!t)return;if('string'==typeof t)return v(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);'Object'===r&&t.constructor&&(r=t.constructor.name);if('Map'===r||'Set'===r)return Array.from(t);if('Arguments'===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return v(t,e)}(t)||function(){throw new TypeError('Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.')}()}function v(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function h(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function p(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?h(Object(r),!0).forEach((function(e){b(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function b(t,e,r){var n;return n=function(t,e){if('object'!=m(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||'default');if('object'!=m(n))return n;throw new TypeError('@@toPrimitive must return a primitive value.')}return('string'===e?String:Number)(t)}(e,'string'),(e='symbol'==m(n)?n:String(n))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function y(t,e){var r=window.JournalConfig,n=(r||o.Z).avgControl;n=n||{};var s=document.querySelector('.grid-group[data-grid-group="'.concat(r.isExtday?0:e,'"]')),u=s?s.querySelectorAll('.cell[name="'.concat(r.isExtday?e:t,'"]')):[],l=[],d=[],m=null,v=Array.from(u).map((function(t){if(null===t)return{};var e=t.parentElement;if(null===e)return{};var o,s,c,u,l,f,d,g,v,h,b=(o=e.getAttribute('mt_id'),u=window.mtypes||{},Object.keys(u).map(Number).some((function(t){return void 0!==(s=Object.keys(u[t]).find((function(t){return Number(t)===Number(o)})))&&(c=t,!0)})),void 0!==c&&void 0!==s?u[c][s]:a),y=(l=t,d=b,g=(f=e).getAttribute('max_mark'),v=f.getAttribute('weight'),h=null!==v?Number(v):1,{weight:parseFloat(d.weight||h),max_mark:parseFloat(g||d.max_mark),required:parseFloat(d.required||f.getAttribute('mt_required')),id:parseFloat(d.id||f.getAttribute('mt_id')),set_id:parseFloat(f.getAttribute('set_id')),control:parseFloat(d.control||f.getAttribute('mt_control'))||l.classList.contains('cont')?1:0,date:f.getAttribute('id'),transition:l.classList.contains('transition'),maxMarkToCut:0,inactive:!1,substruct:!1,miss:'',lescount:!1,misscount:!1}),w=t.querySelector('.cell-data'),_=p({},y),k=t.classList.contains('transition')&&t.classList.contains('with_marks');if(_.inactive=t.classList.contains('cell_inactive')&&!t.classList.contains('cell--locked'),e.classList.contains('cells_hanging')||e.classList.contains('skip'))return{};k&&(_.maxMarkToCut=_.max_mark*_.weight);var A=t.getAttribute('miss_reason')||t.getAttribute('miss_type');A&&(_.miss=A,_.missType=t.getAttribute('miss_type'),'b'===A||'u'===A?_.maxMarkToCut=_.max_mark*_.weight:'n'!==A&&'miss'!==A||(_.substruct=!0,y.maxMarkToCut=0));var S=t.getAttribute('lms_type');S&&(_.lms_type=S);var x='';if(w?x=w.textContent:t.querySelector('input')&&(x=t.querySelector('input').value),x.indexOf('н')>-1&&x.trim().length>1){var j=x;x=j.slice(0,j.indexOf('н'))+j.slice(j.indexOf('н')+1)}var C=e.getAttribute('id');C&&n&&void 0!==n.min_presence_percent&&e&&'0'===String(C).replace(/.*N(.*)_.*/,'$1')&&(_.lescount=!0,x.toLowerCase().includes('н')&&(_.misscount=!0));var P={mark:x,set:p({},_)};return''!==x.trim()&&(m=(0,i.Z)(P,t,r,m)),P})),h=v.filter((function(t){return t.mark||t.set&&t.set.maxMarkToCut&&0!==t.set.id&&!Number.isNaN(t.set.id)||t.set&&0===t.set.maxMarkToCut&&0!==t.set.id&&!Number.isNaN(t.set.id)||r.isRating&&t.set&&t.set.id&&!Number.isNaN(t.set.id)||r.groupBySets&&t.set&&Number(t.set.control)})).reduce((function(t,e){var r,n=null==e||null===(r=e.set)||void 0===r||null===(r=r.date)||void 0===r?void 0:r.replace(/(.*)(N.+)/,'$1');return Object.prototype.hasOwnProperty.call(t,n)?t[n].push(e):t[n]=[e],t}),{}),b=Object.values(h).map((function(t){var e=t.some((function(t){return t.mark&&'н'!==String(t.mark).toLowerCase()||t.set.required&&'0'===String(t.mark)&&''===String(t.mark).trim()})),r=!e&&t.some((function(t){return t.mark&&('н'===String(t.mark).toLowerCase()||'miss'===t.set.miss)})),n=t.some((function(t){return t.set.required}));return t.map((function(t,o){return t.set.misscount=!1,t.set.lescount=!1,o||(t.set.misscount=r,t.set.lescount=e||r||n),t}))}));d.push.apply(d,g(b.flat()));var y={data:d,dataRaw:g(v),id:t};return l.push(y),function(t,e){return window.old_marks?(t.forEach((function(t){Object.keys(window.old_marks).forEach((function(r){if(Number(r)===e){var n=window.old_marks[r];if(Object.keys(n).indexOf(t.id)>-1&&n[t.id]&&n[t.id].length){var o=n[t.id].map((function(t){var e=f(f({},t),{},{required:parseFloat(t.required||0),id:parseFloat(t.id||0),set_id:parseFloat(t.set_id||0),control:parseFloat(t.control||0),weight:parseFloat(t.weight||1)});return e.weight=parseFloat(e.weight),{mark:e.mark,set:e}}));t.data=[].concat(c(o),c(t.data))}}}))})),t):t}(l,e)}var w=r(45221);function _(t){return _='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&'function'==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?'symbol':typeof t},_(t)}function k(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function A(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?k(Object(r),!0).forEach((function(e){S(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):k(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function S(t,e,r){var n;return n=function(t,e){if('object'!=_(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||'default');if('object'!=_(n))return n;throw new TypeError('@@toPrimitive must return a primitive value.')}return('string'===e?String:Number)(t)}(e,'string'),(e='symbol'==_(n)?n:String(n))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function x(t,e){var r=window,o=r.JournalConfig,i=r.allow_marks,a=void 0!==t?[Number(t)]:window.groups,s={},c=document.querySelectorAll('.grid-group');o&&o.isRating&&c.length&&c.forEach((function(t){var e=t.dataset.gridGroup;if(void 0!==e){var r=Array.from(t.querySelectorAll('.cells_header')||[]).map((function(t){return{id:t.getAttribute('mt_id'),date:t.getAttribute('id'),max_mark:parseFloat(t.getAttribute('max_mark')||''),weight:t.getAttribute('weight'),required:t.getAttribute('mt_required'),control:t.getAttribute('mt_control')}})).filter((function(t){return'0'!==t.id}));s[e]=r}}));var u={};return a&&a.length&&a.forEach((function(t){var r=document.querySelector('.grid-group[data-grid-group="'.concat(o.isExtday&&e?0:t,'"]'))||null;if(null!==r){u[t]={};var a=void 0===e?Array.from(r.querySelectorAll('#g'.concat(t,'_fio .cell[name]'))).map((function(t){var e;return null!==(e=t.getAttribute('name'))&&void 0!==e?e:''})).filter(Boolean):[String(e)],c=document.querySelectorAll('#g'.concat(t,'_journal [id*=_avg][mt_id] div.cell')),l=[];Array.from(c).forEach((function(t){var e=t.parentElement&&t.parentElement.getAttribute('mt_id');e&&l.push(e)})),a.forEach((function(e){var r=y(e,t),a=new w.Z(r[0].data,o,o.isExtday?i[t]:i,1,s?s[t]:[],t,e,!1,Boolean(c.length),r[0].dataRaw),f=l.reduce((function(t,e){return A(A({},t),{},S({},e,a.getSetAverage(e)))}),{});if(u[t][e]={cw:a.getCwAverage(),withoutCw:a.getWithoutCwAverage(),total:a.getTotalAverage(),localSets:a.getAverageByLocalSets(),totalExtraHours:a.getTotalExtraHours(),sets:f},o.show.const_avg_with_debts_enabled){var d,m,g=(0,n.QE)(r[0].dataRaw,null!==(d=null===(m=o.avgControl)||void 0===m?void 0:m.round)&&void 0!==d?d:1,o.isIgnoreMarkZeroForAvg);u[t][e].cwWithDebts=g}}))}})),u}},15769:function(t,e,r){'use strict';r.d(e,{Z:function(){return o}});var n=r(43110);function o(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:n.Z,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=t.mark,a=r.isRating?0:2,s=window,c=s.teacher,u=s.additionalColumnForCW,l=r.avgControl,f=o,d=!(!(l=l||{})||void 0===l.last_two_show)&&Boolean(l.last_two_show),m=!1;return(Number(i)===a||parseFloat(i)<a)&&(1===i.length||i<=a||i.includes('/'))||i<=a?(r.isRating&&r.max_mark_on&&r.required_works_on&&!t.set.required||(m=!0),t.set.control&&(m=!0,f=e)):Number.isNaN(i)||(t.set.control&&r.isRating&&r.max_mark_on&&i/t.set.max_mark<.3&&!r.debtIsControlLackOfMark&&(m=!0,f=e),i>a&&(!f||!c||!1!==u&&u!=t.set.id||r.isRating&&r.max_mark_on||(m=!1))),e.classList.toggle('debts',m),d||r.isRating||(m=!1),e.classList.toggle('notclosed',m),f}},9158:function(t,e,r){'use strict';function n(t){return n='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&'function'==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?'symbol':typeof t},n(t)}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,'value'in n&&(n.writable=!0),Object.defineProperty(t,i(n.key),n)}}function i(t){var e=function(t,e){if('object'!=n(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||'default');if('object'!=n(o))return o;throw new TypeError('@@toPrimitive must return a primitive value.')}return('string'===e?String:Number)(t)}(t,'string');return'symbol'==n(e)?e:String(e)}r.d(e,{nC:function(){return c},Do:function(){return u},wo:function(){return l}});var a=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError('Cannot call a class as a function')}(this,t),this.storage=new WeakMap}var e,r,n;return e=t,r=[{key:'set',value:function(t,e){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;t&&e&&(this.storage.has(t)||this.storage.set(t,new Map),null===(r=this.storage.get(t))||void 0===r||r.set(e,n))}},{key:'get',value:function(t,e){var r;return t&&e?null===(r=this.storage.get(t))||void 0===r?void 0:r.get(e):null}},{key:'has',value:function(t,e){var r,n;return!(!t||!e)&&null!==(r=null===(n=this.storage.get(t))||void 0===n?void 0:n.has(e))&&void 0!==r&&r}},{key:'remove',value:function(t,e){var r;t&&e&&(null===(r=this.storage.get(t))||void 0===r||r.delete(e))}}],r&&o(e.prototype,r),n&&o(e,n),Object.defineProperty(e,'prototype',{writable:!1}),t}(),s=new a;function c(t,e){return s.get(t,e)}function u(t,e){return s.has(t,e)}function l(t,e,r){s.set(t,e,r)}},91248:function(t,e,r){'use strict';function n(t,e){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!e)return!1;var n=Array.isArray(e)?e:Object.values(e)||[];return 0!==n.length&&(r?n.indexOf(t)>-1:n.some((function(e){return String(e)===String(t)})))}r.d(e,{d:function(){return n}})},55125:function(t,e,r){'use strict';function n(t,e){Object.keys(e).forEach((function(r){t.style[r]=e[r]}))}function o(t,e){t&&(t instanceof HTMLElement?n(t,e):Array.from(t).forEach((function(t){return n(t,e)})))}r.d(e,{Z:function(){return o},o:function(){return n}})},12773:function(t,e,r){'use strict';r.d(e,{Z:function(){return o}});var n=r(78650);function o(t){if(!t)return{left:0,top:0};var e=(0,n.Z)(t),r=function(t){if(!(t&&t instanceof HTMLElement))return{left:0,top:0};var e,r,o,i={top:0,left:0};if('fixed'===getComputedStyle(t).position)r=t.getBoundingClientRect();else{r=(0,n.Z)(t),e=t.ownerDocument,o=t.offsetParent||e.documentElement;try{for(;o&&(o===e.body||o===e.documentElement)&&('static'===o.style.position||'static'===getComputedStyle(o).position);)o=o.parentNode}catch(t){}if(o&&o!==t&&1===o.nodeType){var a=getComputedStyle(o);(i=(0,n.Z)(o)).top+=parseInt(a['border-top-width'],10)||0,i.left+=parseInt(a['border-left-width'],10)||0}}var s=o instanceof HTMLElement?getComputedStyle(o):{'margin-top':0,'margin-left':0};return{top:r.top-i.top-parseInt(s['margin-top'],10),left:r.left-i.left-parseInt(s['margin-left'],10)}}(t);return{top:Math.max(e.top,r.top),left:Math.max(e.left,r.left)}}},78650:function(t,e,r){'use strict';function n(t){if(!t)return{left:0,top:0};if(!t.getBoundingClientRect)return{top:0,left:0};var e=t.getBoundingClientRect(),r=t.ownerDocument&&t.ownerDocument.defaultView||window;return{top:e.top+(r.pageYOffset||0),left:e.left+(r.pageXOffset||0)}}r.d(e,{Z:function(){return n}})},83886:function(t,e,r){'use strict';r.d(e,{Z:function(){return o}});var n=r(48765);function o(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:'',r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:'',o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:'',i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:'',a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:'';if((e=null==e?'':e.toString().toLowerCase().trim())&&'&nbsp;'!==e||a!==(window.miss_symbol_small||'н')||(e=window.miss_symbol||'Н',a=''),window.isSpecialColorfulMarksEnabled){var s=(0,n.h)(e||a||i||o||r);t='<div class="cell-data" style="'.concat(s,'">').concat(e,'</div>')+'<div class="cell-corner-1" style="'.concat(s,'">').concat(r,'</div>')+'<div class="cell-corner-2" style="'.concat(s,'">').concat(o,'</div>')+'<div class="cell-corner-3" style="'.concat(s,'">').concat(i,'</div>')+'<div class="cell-corner-4" style="'.concat(s,'">').concat(a,'</div>')}else t='<div class="cell-data">'.concat(e,'</div>')+'<div class="cell-corner-1">'.concat(r,'</div>')+'<div class="cell-corner-2">'.concat(o,'</div>')+'<div class="cell-corner-3">'.concat(i,'</div>')+'<div class="cell-corner-4">'.concat(a,'</div>');return t}},64082:function(t,e,r){'use strict';r.d(e,{p:function(){return b}});var n=r(91248);var o=r(97398),i=r.n(o),a=r(81763),s=r.n(a);function c(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:'undefined'!=typeof Symbol&&t[Symbol.iterator]||t['@@iterator'];if(null!=r){var n,o,i,a,s=[],c=!0,u=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(s.push(n.value),s.length!==e);c=!0);}catch(t){u=!0,o=t}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return s}}(t,e)||f(t,e)||function(){throw new TypeError('Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.')}()}function u(t){return u='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&'function'==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?'symbol':typeof t},u(t)}function l(t){return function(t){if(Array.isArray(t))return d(t)}(t)||function(t){if('undefined'!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t['@@iterator'])return Array.from(t)}(t)||f(t)||function(){throw new TypeError('Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.')}()}function f(t,e){if(t){if('string'==typeof t)return d(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return'Object'===r&&t.constructor&&(r=t.constructor.name),'Map'===r||'Set'===r?Array.from(t):'Arguments'===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?d(t,e):void 0}}function d(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function m(t){var e=Number(t);return s()(e)&&i()(e)}function g(t,e){return t.some((function(t){return!(0,n.d)(t,e)||''===String(t).trim()}))}function v(t){return t&&t.length?Math.min.apply(Math,l(t)):0}function h(t){return t&&t.length?Math.max.apply(Math,l(t)):0}function p(t,e,r){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return r&&e>0?Number(t)<=e:(0,n.d)(t,o)}function b(t,e){var r,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(!o||!o.length)return!1;if('string'==typeof t||'number'==typeof t)r={mark:t};else{if('object'!==u(t)||null===t||void 0===t.mark)return!1;r=t}var a=r.mark.toString().trim().toLowerCase(),s=r.miss;if(s=s||!1,''===a)return{mark:'',display:'',marks:[],miss:s};if('0'===a&&null!=e&&e.isIgnoreMarkZeroForAvg)return{mark:'',display:a,marks:[],miss:s};var l=[],f=parseInt(a,10),d=parseFloat(a),b=e&&e.isPercent||!1,y=e&&e.isRating||!1,w=e&&e.isCS||!1,_=r.isPartMark||!1,k=_&&e&&e.isPrePart||!1,A=e&&e.isLetteredTen||!1,S=r.isExam||!1,x=!1;'ЕГЭ'!==S&&'ЕГЭ (п)'!==S&&'ЕГЭ (б)'!==S||(S=!1,x=!0);var j,C,P,O,M=e&&e.max_allow_mark||0,N=e&&e.max_mark_on||!1,E=e&&e.weight_on||!1,T=e&&e.allow_missmark||!1,I=e&&e.allow_markmark||!1,Z=e&&e.allowplus||!1,L=e&&e.allowTwoMarks||!1,D=e&&e.allow_count_float_marks||!1,F=e&&e.roundResultTo?e.roundResultTo:0,q=(0,n.d)(a,o);if('нн'===a)return!1;if(a===(window.miss_symbol_small||'н'))return!((_||S||x)&&!q)&&(s=s||!0,y&&null!=e&&e.declaring_marks_on&&'object'===u(t)&&null!==(j=t.set)&&void 0!==j&&j.control&&null!==(C=t.set)&&void 0!==C&&C.required?{mark:0,display:a,marks:[0],miss:s}:{mark:'',display:'',marks:[],miss:s});if(!q&&a.length>1&&(a[0]===(window.miss_symbol_small||'н')||a[a.length-1]===(window.miss_symbol_small||'н'))){if(!T)return!1;a=a[0]===(window.miss_symbol_small||'н')?a.substr(1):a.substr(0,a.length-1),q=(0,n.d)(a,o);var $=t,R=Number(null==$?void 0:$.max_mark);if(L&&a.indexOf('/')>-1){if(a.split('/').some((function(t){return!p(t,R,N,o)})))return!1}else if(2===a.length){var z=c(a.split(''),2),H=z[0],B=z[1];if(H===B||g([H,B],o))return!1}else if(!p(a,R,N,o))return!1;m(f)&&(f=parseInt(a,10),d=parseFloat(a)),s=s||!0}if(y&&(_||k||S))return!!(!s&&q||m(f)&&f>=0&&f<=100)&&{mark:a,display:a,marks:[f],miss:s};if(A&&e&&e.letteredTenMarks&&(P=a,((O=e.letteredTenMarks)||Array.isArray(O))&&O.some((function(t){return t===P.toString()})))){var W=function(t,e){if(e&&Array.isArray(e)){var r=e.map((function(t){return t.toString()})).indexOf(t.toString())+1;return String(''!==t&&r>0?r:t)}return t.toString()}(a,e.letteredTenMarks);return{mark:W,display:a,marks:[W],miss:s}}var J,G,U=function(t){var e=[];return Object.values(t).forEach((function(t){var r=parseFloat(t);m(t)&&e.push(r)})),e}(o);if((_||k||S)&&!b&&m(d)&&F>0){var Y,V;if(U.length&&(Y=v(U),V=h(U)),void 0!==Y&&void 0!==V&&d>=Y&&d<=V){var K=d.toFixed(F);return{mark:K,display:K,marks:[K],miss:s}}return!1}if(!r.markType&&i)if(r.markTypeId){var Q=Number(r.markTypeId);i&&i[Q]&&(r.markType=i[Q])}else if(r.obj){var X=r.obj;if(X){var tt=X.parentElement;if(tt){var et=tt.parentElement;if(et){var rt=Number(et.getAttribute('mt_id'))||0;i&&i[rt]&&(r.markType=i[rt])}}}}if(y){if(N&&m(a)){var nt;if(void 0!==r.obj){var ot=window.$;nt=Number(ot(r.obj).parents('.cells_marks').attr('max_mark'))}else nt=void 0!==r.max_mark?Number(r.max_mark):r.markType&&r.markType.id&&'0'!==String(r.markType.id)&&void 0!==r.markType.max_mark?Number(r.markType.max_mark):r.set&&r.set.id&&'0'!==String(r.set.id)&&void 0!==r.set.max_mark?Number(r.set.max_mark):h(U);if(void 0!==nt&&0===nt&&(nt=h(U)),void 0!==nt&&m(nt))return!(f<0||f>parseInt(nt,10))&&(!('0.'===a.toString()||a.toString().length>1&&'0'===a.toString().slice(0,1)&&'.'!==a.toString().slice(1,2))&&{mark:a,display:a,marks:[a],miss:s})}if((0,n.d)(a,o)||''===a)return{mark:a,display:a,marks:[a],miss:s};if(!m(a))return!1;if(void 0!==M&&0!==M||(M=h(U)),!(_||k||S)&&E){var it;if(r.obj)it=(0,window.$)(r.obj).parents('.cells_marks').attr('weight');else void 0!==r.weight&&(it=r.weight);if(void 0!==it){var at=parseInt(it,10);return d>=0&&d<=at&&{mark:a,display:a,marks:[a],miss:s}}}if(d>=0&&d<=M&&1===a.length)return{mark:a,display:a,marks:[a],miss:s};if(1===a.length&&m(d))return{mark:a,display:a,marks:[a],miss:s}}if((0,n.d)(a,o)||'н/а'===a||x&&f.toString()===a&&f>=0&&f<=100)return(!_||a!==(window.miss_symbol_small||'н'))&&{mark:a,display:a,marks:[a],miss:s};if(b&&Z&&!_&&('-'===a.slice(-1)||'+'===a.slice(-1)||'.'===a.slice(-1))&&(0,n.d)(a.slice(0,-1),o))return{mark:a,display:a,marks:[parseFloat(a)],miss:s};if((''===a||Z&&!_&&(0,n.d)(a.substr(0,1),o))&&('-'===a.substr(1,1)||'+'===a.substr(1,1)||'.'===a.substr(1,1))&&'/'!==a.substr(2,1)&&a.length<3)return{mark:a,display:a,marks:[parseFloat(a)],miss:s};if(D&&m(d))return U.length&&(J=v(U),G=h(U)),void 0!==J&&void 0!==G&&d>=J&&d<=G&&{mark:a,display:a,marks:[d],miss:s};if(I&&(!_||S)&&!w&&-1===a.indexOf('/')&&2===a.length&&!_&&!y){if(g(l=[a.substr(0,1),a.substr(1,1)],o))return!1;if(l[0]===l[1]&&l[0]!==(window.miss_symbol_small||'н'))return!1;var st=[String((parseInt(l[0],10)+parseInt(l[1],10))/2)];return{mark:a,display:a,marks:l=[].concat(st),miss:s}}return(l=L&&(!_||S)&&a.indexOf('/')>-1?a.split('/'):k&&a.indexOf('-')>0?a.split('-'):[a]).length<=2&&(!g(l,o)&&((!b&&!y||-1===a.indexOf('/'))&&{mark:a,display:a,marks:l,miss:s}))}window.journalParseMark||(window.journalParseMark=b)},63872:function(t,e,r){var n=r(84873),o=r(76542)(n);o.push([t.id,'.TP4x4DJLSTDZ7DDdGCsg{-webkit-box-pack:center;-webkit-box-align:center;align-content:center;align-items:center;background-color:hsla(30,1%,45%,.4);border-radius:4px;color:#464543;display:-webkit-box;display:flex;font-size:16px;justify-content:center;line-height:24px;min-height:144px;padding:32px}.coYv4zf5ZPuhHusoiDeA{bottom:0;left:0;min-height:0;padding:0;position:absolute;right:0;top:0;z-index:49}.eP5sI2zQSHmvbExiPbz3,.coYv4zf5ZPuhHusoiDeA{background-color:hsla(30,1%,45%,.3)}@supports ((-webkit-backdrop-filter:blur(4px)) or (backdrop-filter:blur(4px))){.eP5sI2zQSHmvbExiPbz3{-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);background-color:hsla(30,1%,45%,.2)}}.RB1Bv2EeZjqpHyYP8WZt{font-size:14px;line-height:20px}.MuBIBVYqhz_sxraxgw2A{font-size:24px;line-height:32px}.YxRueT0iS_v_MN9Cdi7z{text-align:center}','']),o.locals={'loading':'TP4x4DJLSTDZ7DDdGCsg','loading--fill':'coYv4zf5ZPuhHusoiDeA','loading--blur':'eP5sI2zQSHmvbExiPbz3','loading--small':'RB1Bv2EeZjqpHyYP8WZt','loading--big':'MuBIBVYqhz_sxraxgw2A','loading__title':'YxRueT0iS_v_MN9Cdi7z'},t.exports=o},96148:function(t,e,r){var n=r(84873),o=r(76542)(n);o.push([t.id,'.rKI5zXNNPxO0qC0yzQSc{padding:10px;position:relative;width:220px}.HpfjyMwYVdCzXm3mEzIa{font-weight:700;margin-top:10px}','']),o.locals={'root':'rKI5zXNNPxO0qC0yzQSc','error':'HpfjyMwYVdCzXm3mEzIa'},t.exports=o},87462:function(t,e,r){'use strict';r.r(e),r.d(e,{'default':function(){return o.a}});var n=r(71799),o=r.n(n),i={};for(var a in n)'default'!==a&&(i[a]=function(t){return n[t]}.bind(0,a));r.d(e,i)},75172:function(t,e,r){'use strict';r.r(e),r.d(e,{'default':function(){return o.a}});var n=r(82879),o=r.n(n),i={};for(var a in n)'default'!==a&&(i[a]=function(t){return n[t]}.bind(0,a));r.d(e,i)}},function(t){t.O(0,[4684,5743,3349],(function(){return e=51487,t(t.s=e);var e}));t.O()}]);