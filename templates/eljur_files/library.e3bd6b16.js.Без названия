function rpc(){this.parameters=[]}function IntlConstruct(){var e={};return{lang:void 0,set:function(t,o){e[t+'']=o},setData:function(t){for(var o in t)e[o]=t[o+'']},get:function(t){return null!=e[t+'']?e[t+'']:t}}}function fixedHeaderSet(e,t,o,r){if(null==t&&(t=$('#fixedHeaderContainer')),null==r&&(r=$('#g'+e+'_journal')),null==o&&(o=$('#marker')),t.removeClass('hide').show(),1==r.length){var n=t.position(),i=o.position();null==n&&(n={top:0,left:0}),null==i&&(i={top:0,left:0}),window.startPosition=n.top-20,window.endPosition=i.top,window.fixedHeight=r.children('div').outerHeight(),height<10&&(window.height=r.children('table').outerHeight())}}function fixedHeaderRestore(e,t,o){null!=t&&0!=t.length||(t=$('#g'+e+'_journal')),null!=o&&0!=o.length||(o=$('#marker')),1==t.length&&($fixedHeaderContainer=$('#fixedHeaderContainer,.table_header_container:visible').first(),_fixedHeaderRestore(t,$fixedHeaderContainer,o))}function _fixedHeaderRestore(e,t,o){var r;1==e.length&&(null==(r=t.position())&&(r={top:0,left:0}),window.startPosition=r.top,null==(r=o.position())&&(r={top:0,left:0}),r&&(window.endPosition=r.top),window.height=e.children('div').outerHeight(),(null==window.height||null==window.height||window.height<10)&&(window.height=e.children('table').outerHeight()))}function showLoadingScreen(e,t){null==e&&(e=window.trans('action.loading')+'...'),null==t&&(t=!0),$('#loading-screen-caption').html(e),$('#loading-screen').addClass('loading-screen--visible').toggleClass('loading-screen--with-circle',t)}function hideLoadingScreen(){$('#loading-screen').removeClass('loading-screen--visible')}rpc.prototype.controlExit=function(e,t){if(!($('#rpcloading').length>0)){window.onbeforeunload=function(){if($.active>0)return t},this.msg=e;var o=$('a').filter('[href!="#"][id!="teacher-rebuke"]:not(.has-modal):not(.ajax_ht):not(.cw_analyse):not(.get-kes-analyse):not(.ajax_add_lesson):not(.printjournal):not(.ajax_markprint)');o.each((function(){var e=$(this).data('events');null!=(e=e?e.click:void 0)&&0!=e.length||$(this).addClass('rpc-href').data('rpcControlExit',!0)})),o.filter('.rpc-href').on('click',(function(e){$.active>0?(e.preventDefault(),alert(t)):$(this).data('rpcControlExit',!1)})).removeClass('rpc-href'),$('body').append('<div id="rpcloading">'+e+'</div>'),$('#rpcloading').hide(),$(document).ajaxStart((function(){$('#rpcloading').show()})).ajaxStop((function(){$('#rpcloading').hide()})).ajaxError((function(e,t,o,r){'Not Found'!==r&&confirm('Ошибка подключения: '+r)}))}},rpc.prototype.addParameter=function(e,t){this.parameters.push([e,t])},rpc.prototype.post=function(e,t,o,r){var n='',l='';for(i=0;i<this.parameters.length;i++){var a=encodeURIComponent(this.parameters[i][1]);n+=l+this.parameters[i][0]+'='+a,l='&'}var s=r||!1;try{$.ajax({type:'POST',url:e,data:n,error:o,success:t,async:!s})}catch(e){console.error(e)}this.parameters=[]},window.theOnlyWayToGenerateUrlForMethodCall=function(e,t,o){return t=t||{},(o=o||'')+'?method='+e+'&'+Object.keys(t).map((function(e){return encodeURIComponent(e)+'='+encodeURIComponent(t[e])})).join('&')},function(e,t,o){'use strict';var r=['mouseevent','activeclass','attribute','animation','autorotate','deeplinking','pauseonhover','delay','container'],n='> ul.ej-tabs__tabs > li.ej-tab:not(.ej-tab--plus)',i='> div.ej-tabs__panel';e.fn.tabslet=function(t){t=e.extend({mouseevent:'click',activeclass:'active',attribute:'href',animation:!1,autorotate:!1,deeplinking:!1,pauseonhover:!0,delay:2e3,active:1,container:!1,controls:{prev:'.prev',next:'.next'},mini:!1},t);return this.each((function(){var o=e(this),l=[],a=t.container?e(t.container):o,s=(a=a.first()).find(i);o.removeClass('ej-tabs--small'),o.removeClass('ej-tabs--big'),s.each((function(){l.push(e(this).hasClass('hide'))}));var c=o.find(n),d=t.active-1,u=t.size||o.attr('size');if(t.small||'small'===u)o.addClass('ej-tabs--small');else if(t.big||'big'===u)o.addClass('ej-tabs--big');else{var h=o.width(),f=0;c.each((function(){f+=e(this).width()})),f>=h&&o.addClass('ej-tabs--small')}if(!o.data('tabslet-init')){o.data('tabslet-init',!0);var p,m=function(){c.off('click').on('click',(function(r,n){r.preventDefault();var i=n?c.find('a['+o.opts.attribute+'="'+n+'"]').parent():e(this);i.trigger('_before'),c.removeClass(t.activeclass),i.addClass(t.activeclass),s.hideClassy(),d=c.index(i);var l=n||i.find('a').attr(o.opts.attribute);o.opts.deeplinking&&(location.hash=l),o.opts.animation?a.find(l).animate({opacity:'show'},'slow',(function(){i.trigger('_after')})):(a.find(l).showClassy(),i.trigger('_after'))}))};o.opts=[],e.map(r,(function(e,r){o.opts[e]=o.data(e)||t[e]})),o.opts.active=o.opts.deeplinking?function(){var r=[];c.find('a').each((function(){r.push(e(this).attr(o.opts.attribute))}));var n=r.indexOf(location.hash);return n>-1?n+1:o.data('active')||t.active}():o.data('active')||t.active,s.hideClassy(),o.opts.active&&(s.eq(o.opts.active-1).showClassy(),c.eq(o.opts.active-1).addClass(t.activeclass));var g=function(){d=++d%c.length,'hover'==o.opts.mouseevent?c.eq(d).trigger('mouseover'):c.eq(d).trigger('click'),o.opts.autorotate&&(clearTimeout(p),p=setTimeout(g,o.opts.delay),o.mouseover((function(){o.opts.pauseonhover&&clearTimeout(p)})))};o.opts.autorotate&&(p=setTimeout(g,o.opts.delay),o.hover((function(){o.opts.pauseonhover&&clearTimeout(p)}),(function(){p=setTimeout(g,o.opts.delay)})),o.opts.pauseonhover&&o.on('mouseleave',(function(){clearTimeout(p),p=setTimeout(g,o.opts.delay)}))),m();o.off('show').on('show',(function(e,t){e.stopPropagation(),function(e){e=Math.max(0,e),e=Math.min(e,c.length),c.eq(e).trigger('click')}(t)})),o.off('refresh').on('refresh',(function(e){e.stopPropagation(),(s=a.find(i)).hideClassy(),(c=o.find(n)).removeClass(t.activeclass),m(),c.last().trigger('click'),o.trigger('destroy'),o.data('tabslet-init',!1),o.tabslet()})),o.off('destroy').on('destroy',(function(r){r.stopPropagation(),o.removeData().find(n).each((function(o){e(this).removeClass(t.activeclass)})),a.find(i).each((function(t){e(this).toggleClassy(l[t])}))}))}}))}}(jQuery),window.intl=IntlConstruct(),function(e){function t(e){return'none'!==e.css('display')}e.fn.colorizetable=function(t,o){return o=o||!1,e(this).each((function(){var r=!t,n=o?':visible':'';e(this).children(n).each((function(){e(this).toggleClass('trwhite',!r).toggleClass('trgray',r),r=!r}))}))},e.fn.disableBlock=function(t){return e(this).each((function(){var o=e(this),r=e('<div class="disabler"></div>'),n='disabler'.concat(window.guidGenerator());function i(){var e=o.height(),t=o.width(),n=o.position();r.css({width:t,height:e,left:n.left})}o.data('disabler',r),o.data('disabler-id',n),o.addClass('disable-block'),t&&t.color&&r.addClass('disabler--color'),o.on('click.'.concat(n).concat(', tap.').concat(n),(function(e){e.preventDefault(),e.stopPropagation()})).before(r),!1!==t&&o.find('input,button,label').filter(':not(:disabled)').attr('prev-disabled',!0).prop('disabled',!0),e(document.documentElement).on('onLoadJsReady.'.concat(n),(function(){i()})),e(window).on('resize.'.concat(n),(function(){i()})),i()}))},e.fn.enableBlock=function(){return e(this).each((function(){var t=e(this).removeClass('disable-block'),o=t.data('disabler'),r=t.data('disabler-id');'string'==typeof r&&o&&o.length&&(t.find('input,button,label').filter('[prev-disabled]').removeAttr('prev-disabled').prop('disabled',!1),t.off('click.'.concat(r).concat(', tap.').concat(r)),o.remove(),e(document.documentElement).off('onLoadJsReady.'.concat(r)),e(window).off('resize.'.concat(r)))}))},e.fn.eljurtabs=function(){var t=window.isMobile&&window.isMobile(),o=e(this);if(0==o.length)return o;if(t){var r=o.children('.navigation-tabs__item.active');if(r&&r.length)try{o.scrollLeft(r.position().left-parseInt(o.css('padding-left'),10))}catch(e){}return o}if(0==o.length||t)return o;var n=o.children('.navigation-tabs__item,.navigation-tabs__items__icon');n.each((function(){var t=e(this).width()+35+2;this.setAttribute('data-width',t)}));var i=o.find('.navigation-tabs__more');i.removeClass('hide');var l=i.width();return e(window).off('.tabs').on('resize.tabs',(function(){n.addClass('hide');var e=o.width()-l-35,t=0;n.each((function(){t+=Number(this.getAttribute('data-width')),this.classList.toggle('hide',t>e)}));var r=n.filter('.hide');i.toggleClass('hide',0==r.length),i.off('click').on('click',(function(){var e=['<ul class="context__items context__items--scroll">'];r.each((function(){e.push('<a class="context__item" href="',this.getAttribute('href'),'">',this.innerText.trim(),'</a>')})),e.push('</ul>'),Context.toggle(this,{id:'contexttabsMore',html:e.join(''),dropdown:!0,alignHorizontal:'right',color:'white',leftfix:3,onShow:function(){i.addClass('active')},onClose:function(){i.removeClass('active')}})}))})).trigger('resize.tabs'),n},e.fn.autocompleteOff=function(){return e(this).each((function(){var t=e(this),o=t.attr('autocomplete');if(o&&'off'!==o&&'never'!==o){var r=['street-address','address-line1','address-line2','address-line3','locality','city','administrative-area','state','province','region','postal-code','country-name','email','tel','tel-country-code','tel-national','tel-area-code','tel-local','tel-extension','phone','phone-full','phone-country-code','phone-national','phone-area-code','phone-local','phone-extension'],n=o.split(' ');if(1===n.length){if(-1!==r.indexOf(n[0]))return!0}else if(n.length>1&&(r.filter((function(e){return-1!==n.indexOf(e)})),r.length>0))return!0}var i=t.attr('readonly');(i=!0===i||'true'===i)||t.attr('type','text').prop('type','text').attr('autocomplete','off').attr('x-autocomplete','off')}))},e.fn.hasHorizontalScrollbar=function(){var t=e(this).get(0);return t.scrollWidth>t.clientWidth},e.fn.hasVerticalScrollbar=function(){var t=e(this).get(0);return t.scrollHeight>t.clientHeight},e.fn.placeholder=function(){return e(this)},e.fn.attrn=function(t){return parseInt(e(this).attr(t),10)},e.fn.absolutePosition=function(){var t=e(this),o=t.position(),r=t.offset();return o.top=Math.max(o.top,r.top),o.left=Math.max(o.left,r.left),o},e.fn.showClassy=function(o){return o?e(this).each((function(){var o=e(this);o.removeClass('hide'),t(o)||o.show()})):e(this).removeClass('hide')},e.fn.hideClassy=function(o){return o?e(this).each((function(){var o=e(this);o.addClass('hide'),t(o)&&o.hide()})):e(this).addClass('hide')},e.fn.toggleClassy=function(t,o){return t?e(this).showClassy(o):e(this).hideClassy(o)},e.fn._val=e.fn.val,e.fn.val=function(t){return arguments.length?e(this).each((function(){var o=e(this);if(o.is('select')&&null==t){var r=o.find('option:not(:disabled)').first().attr('value');return o._val(r)}return o._val(t)})):e(this)._val()}}(jQuery),window.getCaretPosition=function(e){var t=0;if(document.selection){e.focus();var o=document.selection.createRange();o.moveStart('character',-e.value.length),t=o.text.length}else(e.selectionStart||'0'==e.selectionStart)&&(t=e.selectionStart);return t},window.setCaretPosition=function(e,t){if(e)if(e.setSelectionRange)e.focus(),e.setSelectionRange(t,t);else if(e.createTextRange){var o=e.createTextRange();o.collapse(!0),o.moveEnd('character',t),o.moveStart('character',t),o.select()}},window.capitalize=function(e){return e[0].toUpperCase()+e.slice(1)},window.base64_encode_unicode=function(e){return btoa(encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,(function(e,t){return String.fromCharCode('0x'+t)})))},Math.roundToSign=function(e,t){return(Math.round(e*Math.pow(10,t))/Math.pow(10,t)).toFixed(t)},Math.ceilToSign=function(e,t){return(Math.ceil(e*Math.pow(10,t))/Math.pow(10,t)).toFixed(t)},Math.floorToSign=function(e,t){return(Math.floor(e*Math.pow(10,t))/Math.pow(10,t)).toFixed(t)},function(e){e.fn.serializeObject=function(){var t=this,o={},r={},n={'validate':/^[a-zA-Z_-][a-zA-Z0-9_-]*(?:\[(?:\d*|[a-zA-Z0-9_-]+)\])*$/,'key':/[a-zA-Z0-9_-]+|(?=\[\])/g,'push':/^$/,'fixed':/^\d+$/,'named':/^[a-zA-Z0-9_-]+$/};return this.build=function(e,t,o){return e[t]=o,e},this.push_counter=function(e){return void 0===r[e]&&(r[e]=0),r[e]++},e.each(e(this).serializeArray(),(function(){if(n.validate.test(this.name)){for(var r,i=this.name.match(n.key),l=this.value,a=this.name;void 0!==(r=i.pop());)a=a.replace(new RegExp('\\['+r+'\\]$'),''),r.match(n.push)?l=t.build([],t.push_counter(a),l):r.match(n.fixed)?l=t.build([],r,l):r.match(n.named)&&(l=t.build({},r,l));o=e.extend(!0,o,l)}})),o},e.fn.numericOnly=function(){return this.each((function(){e(this).on('keydown',(function(e){-1!==[46,8,9,27,13,110,190].indexOf(e.keyCode)||65==e.keyCode&&(!0===e.ctrlKey||!0===e.metaKey)||67==e.keyCode&&(!0===e.ctrlKey||!0===e.metaKey)||88==e.keyCode&&(!0===e.ctrlKey||!0===e.metaKey)||e.keyCode>=35&&e.keyCode<=39||(e.shiftKey||e.keyCode<48||e.keyCode>57)&&(e.keyCode<96||e.keyCode>105)&&e.preventDefault()}))}))}}(jQuery),window.camelCaseToDash=function(e){return e.replace(/([a-z])([A-Z])/g,'$1-$2').toLowerCase()},window.createElementString=function(e,t,o){var r=[];return Object.keys(t).forEach((function(e){var o=t[e];null!=o&&!1!==o&&(!0!==o?r.push(window.camelCaseToDash(e)+'="'+o+'"'):r.push(window.camelCaseToDash(e)))})),o?'<'+e+' '+r.join(' ').trim()+'>'+o+'</'+e+'>':'<'+e+' '+r.join(' ').trim()+'/>'},window.explode=function(e,t){return 2!=arguments.length||void 0===arguments[0]||void 0===arguments[1]?null:''!==e&&!1!==e&&null!==e&&('function'==typeof e||'object'==typeof e||'function'==typeof t||'object'==typeof t?[]:(!0===e&&(e='1'),t.toString().split(e.toString())))},window.str_trim=function(e){return e instanceof String||(e=e.toString()),e.trim()},window.str_replace=function(e,t,o){return o.split(e).join(t)},window.in_array=function(e,t){if(null==t||null==t||0==t.length)return!1;for(var o=0;o<t.length;o++)if(e==t[o])return!0;return!1},window.htmlspecialchars_decode=function(e,t){var o=0,r=0,n=!1;void 0===t&&(t=2),e=null==e?'':e.toString().replace(/&lt;/g,'<').replace(/&gt;/g,'>');var i={ENT_NOQUOTES:0,ENT_HTML_QUOTE_SINGLE:1,ENT_HTML_QUOTE_DOUBLE:2,ENT_COMPAT:2,ENT_QUOTES:3,ENT_IGNORE:4};if(0===t&&(n=!0),'number'!=typeof t){for(t=[].concat(t),r=0;r<t.length;r++)0===i[t[r]]?n=!0:i[t[r]]&&(o|=i[t[r]]);t=o}return t&i.ENT_HTML_QUOTE_SINGLE&&(e=e.replace(/&#0*39;/g,'\'')),n||(e=e.replace(/&quot;/g,'"')),e=e.replace(/&amp;/g,'&')},window.implode=function(e,t){return t instanceof Array?t.join(e):t},window.ucfirst=function(e){return e.charAt(0).toUpperCase()+e.substr(1,e.length-1)},window.guidGenerator=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+'-'+e()+'-'+e()+'-'+e()+'-'+e()+e()+e()},window.guidIdGenerator=function(){for(var e=window.guidGenerator();e.match(/^\d/);)e=guidGenerator();return e},function(e){e.fn.datepickerField=function(t){return t=t||{},e(this).each((function(){var o=this,r=e(o);if('destroy'!==t){if(r.data('ej-datepicker'))return r.trigger('destroy'),void r.datepickerField(t);var n=r.attr('id'),i=r.val();null!=n&&''!==n||(n=window.guidIdGenerator(),r.attr('id',n));var l=n+'Field',a=t&&t.showYear?'d MMMM yyyy':'d MMMM',s=window.createElementString('ej-datepicker',{id:l,buttonClear:t.enableClear||r.attr('buttonclear')||r.attr('button-clear'),displayFormat:a||r.attr('dateformat')||r.attr('date-format'),minDate:t.minDate||r.attr('mindate')||r.attr('min-date'),maxDate:t.maxDate||r.attr('maxdate')||r.attr('max-date'),value:i,disabled:r.attr('disabled')}),c=e(s);c.on('change.datepicker',(function(){if(this.value!==o.value){o.value=this.value,r.trigger('change');var e=document.createEvent('HTMLEvents');e.initEvent('change',!1,!0),o.dispatchEvent(e)}})),r.off('destroy').on('destroy',(function(){c.remove(),c.off('change.datepicker'),r.removeClass('hide'),r.data('ej-datepicker',null),r.attr('type',r.data('original-type'))})),r.data('original-type',r.attr('type')),r.attr('type','hidden'),r.addClass('hide'),c.insertAfter(r),r.data('ej-datepicker',c)}else r.trigger('destroy')}))}}(jQuery),function(e){var t={buttons:'minus-plus'},o='ej-input-number';e.fn.inputNumber=function(r){return r=e.extend({},t,r||{}),e(this).each((function(){var t=this,n=e(t);if('destroy'!==r){if(n.data(o))return n.trigger('destroy'),void n.inputNumber(r);var i=n.prop('id');void 0!==i&&''!==i||(i=window.guidIdGenerator(),n.prop('id',i));var l=n.is('input'),a=window.createElementString(o,{id:i+'InputNumber',buttons:r.buttons||n.attr('buttons'),disabled:n.is(':disabled'),editable:l,min:r.min||n.attr('min'),max:r.max||n.attr('max'),readonly:n.is('[readonly]'),step:r.step||n.attr('step'),size:r.size||null,value:r.value||(l?t.value:n.text())}),s=e(a),c=s.get(0),d=t.value;n.on('change',(function(){t.value!==c.value&&s.val(t.value)})),s.on('change',(function(){if(c.value!==t.value){n.attr('current-value',c.value).attr('prev-value',d).val(c.value).trigger('change');var e=document.createEvent('HTMLEvents');e.initEvent('change',!1,!0),t.dispatchEvent(e),d=String(c.value),l||n.text(c.value)}})),n.off('destroy').on('destroy',(function(){n.data(o,null),n.data('options',null),n.attr('type',n.data('original-type')),n.removeClass('hide'),s.remove()})),n.data('original-type',n.attr('type')),n.attr('type','hidden'),n.attr('prev-value',t.value),n.addClass('hide'),s.insertAfter(n),n.data(o,s),n.data('options',r)}'destroy'===r&&n.trigger('destroy')}))}}(jQuery),function(e){'use strict';function t(e,t,o){var r=t.absolutePosition(),n=o&&o.width?o.width:e.outerWidth()||e.width(),i=e.height();return r.left=Math.round(r.left+t.outerWidth()/2-n/2),r.top=Math.round(r.top-i-14),'TD'===t[0].tagName&&(r.top+=13),o&&o.width&&(r.width=o.width),r}function o(e){return(e=e||{}).id=e.id||window.guidIdGenerator(),e.text=e.text||'','<div id="'+e.id+'" class="tooltip" style="top:-9999px;left:-9999px"><div id="'+e.id+'-text" class="tooltip__text">'+e.text+'</div></div>'}e.fn.tooltip=function(r){var n=e('#tooltip');0===n.length&&(e('body').append(o({id:'tooltip',text:''})),n=e('#tooltip'),window.$tooltipElement=n);var i=e('#tooltip-text'),l='mouseenter.tooltip mouseover.tooltip touch.tooltip',a='mouseleave.tooltip';return e(this).each((function(){var s=e(this),c=s.data('tooltip-element');if(c&&(c.remove(),s.data('tooltip-element',null)),s.off(l).off(a),r&&'hide'===r){var d=s.data('tooltip-id');return d&&(e(window).off('resize.'+d),e('#'+d).removeClass('tooltip--visible').prop('style','')),!0}var u,h=s.data('title');if(r&&!0===r.title2&&(u=s.data('title2')),void 0!==r&&void 0!==r.attr&&''!==r.attr?h=s.attr(r.attr):void 0!==r&&void 0!==r.text&&''!==r.text?h=r.text:h||(h=s.attr('title')),h&&(h=String(h).trim()),''!==h||r&&!0===r.title2)if(s.data('title',h),r&&!0===r.showOnStart){var f=r.id||s.data('tooltip-id')||window.guidIdGenerator(),p=e(o({id:f,text:h})).appendTo('body'),m=t(p,s);p.css(m),p.addClass('tooltip--visible'),r&&r.color&&p.addClass('tooltip--'+r.color);var g=function(){if(p.hasClass('tooltip--visible')){var e=t(p,s,r);p.css(e)}else p.trigger('removeResizeListener')};p.trigger('removeResizeListener').on('removeResizeListener',(function(){p.off('removeResizeListener'),window.removeEventListener('resize',g,{passive:!0})})),window.addEventListener('resize',g,{passive:!0}),p.on('tooltipHide click',(function(){p.removeClass('tooltip--visible').prop('style','')})),s.data('tooltip-id',f),s.data('tooltip-element',p)}else(void 0!==h&&''!==h||void 0!==u&&''!==u)&&(s.on(l,(function(){setTimeout((function(){void 0!==u&&''!==u&&''!==h?void 0!==h?i.html(h+' <div class="hr hr2"></div>'+u):i.html(u):void 0!==u&&''!==u?i.html(u):i.html(h);var e=t(n,s,r);n.css(e).addClass('tooltip--visible'),r&&r.color&&n.addClass('tooltip--'+r.color)}),window.isMobile&&window.isMobile()?200:10)})),s.on(a,(function(){n.removeAttr('style'),n.removeClass('tooltip--visible')})))}))},e(document.documentElement).off('click.tooltip').on('click.tooltip',(function(t){void 0!==window.$tooltipElement&&void 0===e(t.target).data('title')&&window.$tooltipElement.css({top:-9999,left:-9999})}))}(window.jQuery),function(e){e.fn.switcher=function(t){return t=t||{},e(this).each((function(){var o=e(this),r=o.is('input'),n=r?o:o.find('input[type="checkbox"]');if('destroy'!==t){if(o.data('ej-switcher'))return o.trigger('destroy'),void o.switcher(t);var i=n.attr('id');null!=i&&''!==i||(i=window.guidIdGenerator(),n.attr('id',i));var l={id:i+'Switcher',disabled:n.is(':disabled'),checked:n.is(':checked')};['labelOff','labelOn','label'].forEach((function(e){l[e]=t[e]||o.attr(e),l[e]||r||(l[e]=n.attr(e))}));var a=window.createElementString('ej-switcher',l),s=e(a);n.on('change',(function(){s.get(0).checked!==n.get(0).checked&&s.prop('checked',this.checked)})),s.on('change',(function(){s.get(0).checked!==n.get(0).checked&&(n.prop('checked',this.checked),n.trigger('change'))})),o.off('destroy').on('destroy',(function(){o.data('ej-switcher',null),s.remove()})),o.addClass('hide'),s.insertAfter(o),o.data('ej-switcher',s)}'destroy'===t&&o.trigger('destroy')}))},e.fn.checkboxSlider=e.fn.switcher}(window.jQuery),function(e){e.fn.eljurAccordion=function(t){return t=t instanceof Object?t:{},e(this).each((function(){var o='> .ej-accordion > .ej-accordion__header',r=e(this);r.off('click',o).on('click',o,(function(o){if(!o.target.closest('.ej-accordion__actions')){var r=e(this.parentNode);r.toggleClass('ej-accordion--expanded'),t.toggleAll&&r.hasClass('ej-accordion--expanded')&&r.siblings('.ej-accordion').removeClass('ej-accordion--expanded');var n=e(this.parentNode.parentNode).children('.ej-accordion'),i=n.filter('.ej-accordion--expanded').length,l=n.length===i;e(this.parentNode.parentNode).prev('.ej-accordions-before').find('.ej-accordions-before__button').text(window.trans(l?'action.collapse_all':'action.expand_all'))}}));var n=r.find('.ej-accordions-before__button').first();n.length||(n=r.prev('.ej-accordions-before').find('.ej-accordions-before__button').first()),n.length&&n.off('click').on('click',(function(t){t.stopPropagation();var o=e(this.parentNode).next('.ej-accordions').children('.ej-accordion'),r=o.filter('.ej-accordion--expanded').length,n=o.length===r;o.toggleClass('ej-accordion--expanded',!n),e(this).text(window.trans(n?'action.expand_all':'action.collapse_all'))}))}))}}(jQuery);var Grid,eljurSelectHandlerPostfix='EjSelect';function EljurFixedHeader(e,t){if($('#loading').filter(':not(.hide)').length>0)return setTimeout((function(){EljurFixedHeader(e,t)}),40),!0;if(void 0===e||0===e.length){var o=$('#fixedHeader'),r=$('#fixedHeaderContainer'),n=$('#table_header_shadow'),i=$('#marker');EljurFixedHeaderGroup(curgrp,o,r,n,i,!1,t)}else Object.values(e).forEach((function(e){var o=$('#g'+e+'_fixedHeader'),r=$('#g'+e+'_fixedHeaderContainer'),n=$('#g'+e+'_table_header_shadow'),i=$('#g'+e+'_marker');EljurFixedHeaderGroup(e,o,r,n,i,!1,t)}))}function _scrollAddFixation(e){return _scrollClearCSS(e),e.addClass('table_header_fixed'),e.removeClass('table_header_absolute'),1}function _scrollRemoveFixation(e){return _scrollClearCSS(e),e.removeClass('table_header_fixed'),e.removeClass('table_header_absolute'),0}function _scrollAddFixationAbsolute(e,t){return _scrollRemoveFixation(t),t.addClass('table_header_absolute').css('top',e),void 0===window.Grid&&$('#day_container').css('top',e),2}function _scrollClearCSS(e){return e.css('top','').css('position',''),0}!function(e){e.fn.decorateSelect=function(t){if(!this||!this.length)return e(this);var o=window.isOldBrowser&&window.isOldBrowser();return null==t&&(t={}),e(this).each((function(){var r=e(this),n=this;if(r.attr('ej-select'))return r.removeAttr('ej-select'),r.trigger('destroy'),void r.decorateSelect(t);r.removeClass('select');var i=r.prop('id');if(''!==i&&null!=i||(i=window.guidIdGenerator('id',14),r.prop('id',i)),o){r.addClass('select');var l=t.size||r.attr('size');return l&&r.addClass('select--'+l),r.off('change.decorate'),t.redirect&&r.on('change.decorate',(function(){if(!r.is('[multiple]')){var e=this.value;e&&e!==window.location.href&&(window.location.href=e)}})),void r.off('hideSelect').on('hideSelect',(function(){r.hideClassy()})).off('showSelect').on('showSelect',(function(){r.showClassy()}))}r.attr('width')&&(t.width=r.attr('width')),t.style=t.width?'width:'+t.width:null;var a=t.threshold?t.threshold:20,s=r.attr('class'),c=s?s.trim().replace(/\s+/gi,' ').split(' '):[];if(c&&c.length){['is-eljur-select','is-eljur-select-hover','is-eljur-select-hover-href','select'].forEach((function(e){var t=c.indexOf(e);t>-1&&c.splice(t,1)}))}var d,u=t.multiple||n.hasAttribute('multiple'),h=window.createElementString('ej-select',{disabled:n.disabled,class:c.join(' '),id:i+eljurSelectHandlerPostfix,fill:!!(t.width||n.hasAttribute('fill')||n.hasAttribute('width'))||null,multiple:u,options:i,placeholder:t.placeholder||n.getAttribute('placeholder'),redirect:t.redirect||n.hasAttribute('redirect'),search:!!(t.search||n.childElementCount>a||n.hasAttribute('search'))||null,searchThreshold:t.searchThreshold||n.getAttribute('search-threshold'),size:t.size||n.getAttribute('size'),style:t.style,value:r.val(),width:t.width||n.getAttribute('width')},''),f=e(h),p=f.get(0);function m(){var e=n.childElementCount>a,t=r.val();f.prop('disabled',r.is(':disabled')),f.attr('search',e),f.innerHTML=n.innerHTML,f.toggleClass('fl',r.hasClass('fl')),f.toggleClass('fr',r.hasClass('fr')),setTimeout((function(){f.val(t)}),300)}r.addClass('hide'),f.insertAfter(r),r.attr('ej-select',!0),u&&setTimeout((function(){var e=r.val();f.val(e)}),300),r.off('hideSelect').on('hideSelect',(function(){f.hideClassy()})).off('showSelect').on('showSelect',(function(){f.showClassy()})),r.off('destroy').on('destroy',(function(){d&&d.disconnect&&d.disconnect(),r.removeAttr('ej-select'),r.removeClass('hide');try{p.vueComponent.$destroy()}catch(e){}f.remove()})),setTimeout((function(){r.on('change',(function(){(u?f.val().sort().join('~')!==r.val().sort().join('~'):r.val()!==f.val())&&f.val(r.val())})),r.on('refresh',(function(){(u?f.val().sort().join('~')!==r.val().sort().join('~'):r.val()!==f.val())&&f.val(r.val())})),f.on('change',(function(){if(u?f.val().sort().join('~')!==r.val().sort().join('~'):r.val()!==f.val()){r.val(f.val()),r.trigger('change');var e=document.createEvent('HTMLEvents');e.initEvent('change',!1,!0),n.dispatchEvent(e)}})),d&&d.disconnect&&d.disconnect(),(d=new MutationObserver(m)).observe(n,{attributes:!0,attributeFilter:['disabled','search','placeholder']})}),800)}))}}(jQuery),window.Grid=void 0,window.EljurGrid=function(e,t){if(0!==e.length){var o={};o.defaults={cellSize:32,fixedHeader:!0,hoverCross:!0,minScreenResize:window.isMobile&&window.isMobile()?0:900,maxScreenResize:2e3,catchResize:!0,isJournal:!1,allowedTags:['div']},o.catchResize=!0,o.groups=[],o.group=void 0,o.groupsControllers=[],o.firstRun=!0,o.guid=window.guidIdGenerator(),o.previousWidth=window.innerWidth,o.init=function(t){window.hasEljurGrid=!0,void 0!==t&&t instanceof Object||(t={}),o.options=$.extend(!0,o.defaults,t),e.hasClass('grid--calendar-mini')?o.options.cellSize=72:e.hasClass('grid--calendar')?o.options.cellSize=100:e.hasClass('grid--double')||e.hasClass('grid--double_width')?o.options.cellSize=64:(e.hasClass('grid--one_and_half')||e.hasClass('grid--one_and_half_width'))&&(o.options.cellSize=48),t.cellSize=o.options.cellSize,o.$loading=e.find('[data-grid-control="loading"]'),o.$groups=e.find('.grid-group[data-grid-group]'),o.$scrollbar=e.find('[data-grid-control="scrollbar"]'),o.$loading.showClassy(),o.$groups.addClass('hide'),o.$after=$('<div class="grid__after"></div>').insertAfter(e);var r=o.options.group?String(o.options.group):void 0;o.options.group=void 0,o.$groups.each((function(e){var n=this.getAttribute('data-grid-group');n=String(n),-1===o.groups.indexOf(n)&&(o.groups.push(n),(void 0===o.options.group&&0===e||r&&r===n)&&(t.group=n))})),o.$loading.hideClassy(),o.$groups.removeClass('hide'),o.groups.length>0&&o.firstRun&&(o.changeGroup(t.group),o.groupsControllers[t.group].scroll('end')),o.firstRun=!1,o.setupResizeEvent()};var r,n=!1;return o.scrollEventListener=function(){r&&clearTimeout(r),r=setTimeout((function(){o.catchResize&&window.innerWidth!==o.previousWidth&&!o.firstRun&&setTimeout((function(){o.groupsControllers[o.group].refresh(!1)}),200),o.previousWidth=window.innerWidth,o.previousHeight=window.innerHeight}),50)},o.setupResizeEvent=function(){n||(window.removeEventListener('scroll',o.scrollEventListener,{passive:!0}),window.addEventListener('scroll',o.scrollEventListener,{passive:!0}),n=!0)},o.changeGroup=function(r){var n=o.group;r=String(r);var i=window.scrollY,l=o.firstRun?310:e.height();if(e.css({minHeight:l+'px'}),'function'==typeof window.hookGridBeforeChangeGroup)try{window.hookGridBeforeChangeGroup(r,n)}catch(e){console.error(e)}if(Context.hide(),r&&o.groups.length>0&&o.group!==r&&-1!==o.groups.indexOf(r)){var a=o.$groups.filter('[data-grid-group="'+r+'"]');if(o.group&&o.groupsControllers[o.group]&&o.groupsControllers[o.group].freeze(),o.group=r,o.$groups.filter(':not([data-grid-group="'+r+'"])').addClass('hide'),a.removeClass('hide'),'function'==typeof window.hookGridChangeGroup)try{window.hookGridChangeGroup(r,n)}catch(e){console.error(e)}o.options.gridId=e.attr('id'),void 0===o.groupsControllers[r]?(o.options.group=r,o.groupsControllers[r]=new EljurGridGroup(a,t,o.$after)):(o.groupsControllers[r].fixedHeaderReset(),o.groupsControllers[r].melt());var s=parseInt(r),c=0!==window.curgrp&&window.curgrp!==s;window.curgrp=s,'function'==typeof window.journalChangeGrp&&t.isJournal&&journalChangeGrp(window.curgrp,!0,c)}if('function'==typeof window.hookGridAfterChangeGroup)try{window.hookGridAfterChangeGroup(r,n)}catch(e){console.error(e)}setTimeout((function(){!o.firstRun&&i&&(window.scroll(0,i),o.groupsControllers&&o.groupsControllers[r]&&o.groupsControllers[r].onScroll(i)),e.css({minHeight:0})}),300)},o.init(t),setTimeout((function(){e.trigger('gridReady')}),100),{get:function(e){return null!=e&&(void 0!==o[e]&&'function'!==(o[e],!1)?o[e]:o.group&&void 0!==o.groupsControllers[o.group]?o.groupsControllers[o.group].get(e):void 0)},setOption:function(e,t){return null!=e&&(o.options[e]=t,Object.values(o.groups).forEach((function(r){o.groupsControllers[r]&&o.groupsControllers[r].setOption(e,t)})),o.options)},scroll:function(e){o.groupsControllers[o.group].scroll(e)},scrollTo:function(e){o.groupsControllers[o.group].scrollTo(e)},getElement:function(){return e},getScrollPosition:function(){return o.groupsControllers[o.group].getScrollPosition()},getScrollLength:function(){return o.groupsControllers[o.group].getScrollLength()},getScrollStep:function(){return o.groupsControllers[o.group].getScrollStep()},refresh:function(e,t){o.groupsControllers[o.group].refresh(e,t)},refreshHover:function(){o.groupsControllers[o.group].refreshHover()},changeGroup:function(e){o.changeGroup(e)},freeze:function(){o.groupsControllers[o.group].freeze()},melt:function(){o.groupsControllers[o.group].melt()}}}},window.EljurGridGroup=function(e,t,o){if(0===e.length)return!1;var r={},n=$(document);return r.defaults={cellSize:32,fixedHeader:!1,hoverCross:!0},r.init=function(t){if(r.$element=e,r.$header=r.$element.find('[data-grid-control="header"]'),r.$headerInside=r.$header.children('.inside'),r.$body=r.$element.find('[data-grid-control="body"]'),r.$columnsContainerHeader=r.$header.find('[data-grid-control="columns-header"]'),r.$columnsContainerBody=r.$body.find('[data-grid-control="columns-body"]'),r.$scrollHeader=r.$header.find('[data-grid-control="scroll-header"]'),r.$scrollHeaderInside=r.$scrollHeader.find('[data-grid-control="scroll-header-inside"]'),r.$scrollBody=r.$body.find('[data-grid-control="scroll-body"]'),r.$scrollBodyInside=r.$scrollBody.find('[data-grid-control="scroll-body-inside"]'),r.$buttonScrollLeft=r.$header.find('[data-grid-control="button-scroll-left"]'),r.$buttonScrollLeftBlock=r.$buttonScrollLeft.parent().parent(),r.$buttonScrollRight=r.$header.find('[data-grid-control="button-scroll-right"]'),r.$buttonScrollRightBlock=r.$buttonScrollRight.parent().parent(),r.$shadow=r.$header.find('[data-grid-control="shadow"]'),r.$scrollbarContainer=r.$element.find('[data-grid-control="scrollbar"]'),r.$scrollbarSlider=r.$scrollbarContainer.find('ej-slider'),r.$selectType=r.$element.find('select[data-grid-control="mtype"]'),r.$marker=$('<div class="grid__marker"></div>').insertAfter(r.$body),0===r.$marker.length&&(r.$marker=r.$element.find('div.grid__marker')),r.catchResize=!0,r.mtype=!1,r.mtypeOld=!1,r.options=$.extend(!0,r.defaults,t||{}),r.$body.off('.grid'),!0===r.options.fixedHeader){var o=!1;function n(){o||(o=!0,r.fixedHeaderReset(),r.fixedHeaderController&&r.fixedHeaderController.refresh(),setTimeout((function(){o=!1}),120))}r.$body.off('focusout.grid').on('focusout.grid',n).off('mouseup.grid').on('mouseup.grid',n).off('click.grid').on('click.grid',n)}if(!0===r.options.hoverCross&&(r._prepareNames(),!0===r.options.hoverCross&&r.$body.on('mouseover.grid','.cell[name]',(function(){var e=this.getAttribute('name');e!==r.hoverCrossName&&(r.hoverCrossName&&r.$lines&&r.$lines[r.hoverCrossName]&&r.$lines[r.hoverCrossName].length>0&&r.$lines[r.hoverCrossName].removeClass('cell--hover'),r.hoverCrossName=e,r.hoverCrossName&&r.$lines&&r.$lines[r.hoverCrossName]&&r.$lines[r.hoverCrossName].length>0&&r.$lines[r.hoverCrossName].addClass('cell--hover'))})).on('mouseleave.grid',(function(){r.hoverCrossName&&r.$lines&&r.$lines[r.hoverCrossName]&&r.$lines[r.hoverCrossName].length>0&&(r.$lines[r.hoverCrossName].removeClass('cell--hover'),r.hoverCrossName=void 0)}))),r.buttonsTimeout=200,r.$buttonScrollLeft&&r.$buttonScrollLeft.off('click mousedown mouseup').on('mousedown',(function(e){e.preventDefault(),r.scrollTimeout2=setTimeout((function(){r.scrollDown(-1)}),r.buttonsTimeout)})).on('mouseup',(function(e){e.preventDefault(),r.scrollUp(-1)})).on('click',(function(e){e.preventDefault()})),r.$buttonScrollRight&&r.$buttonScrollRight.off('click mousedown mouseup').on('mousedown',(function(e){e.preventDefault(),r.scrollTimeout2=setTimeout((function(){r.scrollDown(1)}),r.buttonsTimeout)})).on('mouseup',(function(e){e.preventDefault(),r.scrollUp(1)})).on('click',(function(e){e.preventDefault()})),r.$selectType.length>0&&r.$selectType.off('change.grid').on('change.grid',(function(){var e=this.value;e!=r.mtypeOld&&(r.filter(e),r.refresh())})),window.isMobile&&window.isMobile()){var i=!1,l=-1;function a(){if(i){i=!1;var e=r.$scrollBody.scrollLeft(),t=Math.round(e/32);r.scrollPosition=t,r.scroll(0,!0)}}r.$scrollBody[0].addEventListener('scroll',(function(e){i&&(r.$scrollHeader.scrollLeft(r.$scrollBody.scrollLeft()),-1!==l&&clearTimeout(l),l=window.setTimeout(a,80))}),{passive:!0}),r.$scrollBody[0].addEventListener('touchstart',(function(e){i=!0}),{passive:!0}),r.$scrollBody.css('overflow-x','auto')}r._selectorVisibleColumn(),r.refresh()},r._prepareNames=function(){r.$lines={};try{r.__prepareNamesForCells(r.$columnsContainerBody.children()),r.__prepareNamesForCells(r.$scrollBody.children().children())}catch(e){r.options.hoverCross=!1}},r.__prepareNamesForCells=function(e,t){if(!0!==t&&e.length<30)r.__prepareNamesForCell(e.children());else for(var o=Math.ceil(e.length/50),n=0;n<o;n++){var i=50*n,l=e.slice(i,i+50).children();r.__prepareNamesForCell(l)}},r.__prepareNamesForCell=function(e){e.each((function(){var e=this.getAttribute('name');e&&(void 0===r.$lines[e]?r.$lines[e]=$(this):r.$lines[e]=r.$lines[e].add(this))}))},r.scrollTimeout1=void 0,r.scrollTimeout2=void 0,r.scrollCheck=!1,r.scrollDown=function(e){r.scrollCheck=!0,r.scroll(e)&&(r.scrollTimeout1=setTimeout((function(){r.scrollDown(e)}),50))},r.scrollUp=function(e){r.scrollCheck?r.scrollCheck=!1:r.scroll(e),clearTimeout(r.scrollTimeout1),clearTimeout(r.scrollTimeout2)},r.scroll=function(e,t,o){var n=r.scrollPosition+e;if(!0!==t&&(t=!1),!0!==o&&(o=!1),'begin'===e||e<-r.scrollPosition?(t=!0,e=0-r.scrollPosition):'end'===e||e>r.columnsNum-r.columnsNumOnScreen-r.scrollPosition?(t=!0,e=r.columnsNum-r.columnsNumOnScreen-r.scrollPosition):isNaN(parseInt(e))&&(e=0),t||r.scrollPosition+e!==r.scrollPosition){r.scrollPosition+e+r.columnsNumOnScreen>r.columnsNum&&(r.scrollPosition=r.columnsNum-r.columnsNumOnScreen),r.scrollPosition+e<0&&(r.scrollPosition=0),r.scrollPosition+=e;var i=r.scrollPosition*r.options.cellSize;r.$scrollHeader.scrollLeft(i),r.$scrollBody.scrollLeft(i),!1===o&&r.$scrollbarSlider&&r.$scrollbarSlider.attr('value',r.scrollPosition),r.scrollCheck=!1}return'function'==typeof r.options.onScroll&&r.options.onScroll(),r.$scrollbarSlider.attr('value',r.scrollPosition),r.scrollPosition===n},r._selectorVisibleColumn=function(e){r.options.filter?(r.selectorVisibleColumn=r.options.filter,r.selectorInvisibleColumn=':not('+r.options.filter+')'):e&&'null'!==e&&'undefined'!==e?(r.selectorVisibleColumn='div.cells[mt_id="'+e+'"]',r.selectorInvisibleColumn=':not('+r.selectorVisibleColumn+')'):(r.selectorVisibleColumn=':not(.cell):not(.cells_hidden)',r.selectorInvisibleColumn='.hide,.cells_invisible,.cells_hidden')},r.filter=function(e){var t=r.$scrollHeaderInside.children(':not(script)'),o=r.$scrollBodyInside.children(':not(script)');r._selectorVisibleColumn(e);var n=t.filter(r.selectorVisibleColumn);n.length>0?(r.mtypeOld=r.mtype=e,n.find('.megadate').addClass('megadate--fixw'),n.showClassy(),t.filter(r.selectorInvisibleColumn).hideClassy(),o.filter(r.selectorVisibleColumn).showClassy(),o.filter(r.selectorInvisibleColumn).hideClassy(),n.find('.megadate').toggleClass('megadate--fixw','null'!==r.mtype&&null!==r.mtype),r.refresh()):(r._selectorVisibleColumn(r.mtypeOld),r.mtype=r.mtypeOld,r.$selectType.val(r.mtype).trigger('refresh'),'undefined'!=typeof errormsg_type&&alert(errormsg_type,!0))},r.refresh=function(e){r.$element.css('width','auto'),r.selectorVisible=':not(.hide,.cells_invisible,.cells_hidden)',r.selectorInvisible='.hide,.cells_invisible,.cells_hidden';var i=window.isMobile&&window.isMobile(),l=r.$columnsContainerHeader.children(':not(script)'),a=r.$columnsContainerBody.children(':not(script)'),s=l.filter(r.selectorVisible),c=a.filter(r.selectorVisible),d=l.filter(r.selectorInvisible),u=a.filter(r.selectorInvisible),h=0,f=0;s.each((function(e){var t=$(this);if(t.showClassy(),u.eq(e).showClassy(),t.is('[data-grid-control="scroll-header"]')||i&&t.is('.cells_scroll_control'))return!0;var o=t.attr(i?'data-grid-width-mobile':'data-grid-width');(o=parseInt(o))&&!isNaN(o)?(t.width(o),c.eq(e).width(o)):o=t.is('.cells_num,.cells_custom_width')?Math.ceil(t.width()):t.is('.cells_one_and_half_width')?Math.ceil(1.5*r.options.cellSize):t.is('.cells_double_width')?2*r.options.cellSize:r.options.cellSize,t.is('[data-grid-option="exclude"]')&&(f+=o),h+=o})),requestAnimationFrame((function(){r.$header.hideClassy(),r.$body.hideClassy(),d.each((function(e){$(this).hideClassy(),u.eq(e).hideClassy()}));var l=Math.floor(o.width()-3);i&&(l+=32),r.columnsNum=r.$scrollHeaderInside.children(r.selectorVisibleColumn).filter(':not(script)').length,r.columnsNumOnScreen=Math.floor((l-h)/r.options.cellSize);var a=r.columnsNum*r.options.cellSize,s=Math.min(r.columnsNumOnScreen,r.columnsNum)*r.options.cellSize,c=s+h-f;r.columnsNumOnScreen===r.columnsNum-1&&(r.columnsNumOnScreen,r.options.cellSize),r.$scrollHeader.width(s),r.$scrollHeaderInside.width(a),r.$scrollBody.width(s),r.$scrollBodyInside.width(a),r.$shadow.width(c),void 0===r.scrollPosition||r.scrollPosition>r.columnsNum-r.columnsNumOnScreen?r.scrollPosition=r.columnsNum-r.columnsNumOnScreen:r.scrollPosition=0;var p=r.columnsNum>r.columnsNumOnScreen,m=!i&&p;r.$buttonScrollLeft.toggleClassy(m),r.$buttonScrollRightBlock.toggleClassy(m),requestAnimationFrame((function(){if(r.$header.showClassy(),r.$body.showClassy(),p){var o=r.$scrollBody.position().left-r.$element.position().left;r.$scrollbarContainer.showClassy().width(c),r.$scrollbarSlider.width(s).css('marginLeft',o).attr('max',r.columnsNum-r.columnsNumOnScreen).attr('value',r.scrollPosition).off('change').on('change',(function(){r.scrollPosition=this.value,r.scroll(0,!0,!0)})),r.scroll('end',!0)}else r.$scrollbarSlider.off('change'),r.$scrollbarContainer.hideClassy(),r.scrollbarInstance=!1;r.$element.width(l),!0===r.options.fixedHeader&&r.$scrollBody.height()>4*window.cell_size&&(r.fixedHeaderReset(),void 0===r.fixedHeaderController?r.fixedHeaderController=EljurFixedHeaderGroup(t.group,r.$headerInside,r.$header,r.$shadow,r.$marker,n,r.$scrollbarContainer,r.$body,!0):(r.fixedHeaderController.melt(),e&&r.fixedHeaderController.refresh()))})),setTimeout((function(){$(document.documentElement).trigger('eljurGridFinishPaint')}),300)}))},r.fixedHeaderReset=function(){r.posMode=-1,r.posModeScrollbar=-1,r.scrollCurrent=-1,r.$header.attr('style',''),r.$headerInside.attr('style','').removeClass('table_header_absolute').removeClass('table_header_fixed'),requestAnimationFrame((function(){var e=r.$headerInside.width(),t=Math.max(r.$header.height(),r.$headerInside.height());r.$headerInside.width(e).height(t),r.$header.width(e).height(t)}))},r.freeze=function(){r.catchResize=!1,r.fixedHeaderController&&r.fixedHeaderController.freeze()},r.melt=function(){r.catchResize=!1,r.fixedHeaderController&&r.fixedHeaderController.melt()},r.init(t),{get:function(e){return void 0!==r[e]&&'function'!=typeof r[e]?r[e]:void 0},setOption:function(e,t){return null!=e&&(r.options[e]=t,r.options)},scroll:function(e){r.scroll(e)},scrollTo:function(e){r.scroll(e-r.scrollPosition)},getScrollPosition:function(e){return r.scrollPosition},getScrollLength:function(e){return r.columnsNum},getScrollStep:function(e){return r.columnsNumOnScreen},refresh:function(e,t){r.refresh(t),!0===e&&!0===r.options.hoverCross&&r._prepareNames()},refreshHover:function(){!0===r.options.hoverCross&&r._prepareNames()},fixedHeaderReset:function(){r.fixedHeaderReset()},freeze:function(){r.freeze()},melt:function(){r.melt()},onScroll:function(e){r.fixedHeaderController&&r.fixedHeaderController.onScroll(e)}}},window.EljurFixedHeaderGroup=function(e,t,o,r,n,i,l,a,s,c){if(void 0!==t&&void 0!==o&&0!==t.length&&0!==o.length){e=parseInt(e);$(window);var d=window,u={isGrid:!!s,catchScroll:!0};void 0!==a&&!1!==a&&1===a.length||(a=$('#g'+e+'_journal')),u.refresh=function(){u.isGrid||o.attr('style',''),_scrollRemoveFixation(t),u.heightContainer=u.isGrid?parseInt(o.css('height').replace('px','')):o.height(),u.startPosition=o.offset().top,u.endPosition=u.startPosition+a.height()-1.5*cell_size,u.posMode=0,u.scrollbarEnabled=l&&!l.hasClass('hide'),u.startPositionScrollbar=!!u.scrollbarEnabled&&u.startPosition+u.heightContainer+l.height()+cell_size,u.endPositionScrollbar=!!u.scrollbarEnabled&&n.offset().top+l.height(),u.posModeScrollbar=0,u.isGrid||(u.heightContainer+=2,e===curgrp&&(window.startPosition=u.startPosition,window.endPosition=u.endPosition),o.height(u.heightContainer))};var h=null,f=0,p=0;return u.scrollEventListener=function(e){f++;var t=d.scrollY,o=Math.abs(t-p)>64,r=f>(o?1:33)?1:66;h&&clearTimeout(h),h=setTimeout((function(){p=t,u.onScroll(t),f=0}),r)},u.init=function(){u.isGrid||(window.first_run&&fixedHeaderSet(e,o,n,a),r&&r.width(t.children('.table_header').children().filter(':not(script)').width())),window.removeEventListener('scroll',u.scrollEventListener,{passive:!0}),window.addEventListener('scroll',u.scrollEventListener,{passive:!0}),u.onScroll(window.scrollY)},u.onScroll=function(e){if(!1===u.catchScroll||document.body&&'no'===document.body.getAttribute('scroll')||'number'!=typeof e)return!1;var n,i;if(u.scrollCurrent=e,e>u.startPosition)e>u.endPosition+2?o.length>0&&(n=2):n=1;else{if(0===u.posMode&&(!u.scrollbarEnabled||0===u.posModeScrollbar))return;n=0}if(!u.isGrid&&($('#day_container').remove(),$('#content').find('.type_sel_hover').removeClass('type_sel_hover'),1===n||2===n)){var a=!0;e<u.startPosition+22&&(a=!1),r.toggleClass('table_shadow_visible',a)}if(n!==u.posMode){switch(n){case 0:_scrollRemoveFixation(t);break;case 1:_scrollAddFixation(t);break;case 2:_scrollAddFixationAbsolute(u.endPosition-o.position().top,t)}Context.is('in-grid')&&Context.alignGrid(1===n?'fixed':'absolute')}u.scrollbarEnabled&&(i=e+window.innerHeight>=u.startPositionScrollbar&&e+window.innerHeight<u.endPositionScrollbar?1:0,u.posModeScrollbar===i&&u.posMode===n||l.toggleClass('grid__scrollbar--fixed',1===i),u.posModeScrollbar=i);u.isGrid&&void 0!==window.Grid?(Grid.posMode=n,Grid.fixedHeaderHeight=0===u.posMode?0:u.heightContainer):window.posMode=n,u.posMode=n,Context.set('fixedHeaderHeight',1===n?u.heightContainer:0)},u.refresh(),u.init(),{freeze:function(){u.catchScroll=!1},melt:function(){u.catchScroll=!0},onScroll:function(e){u.onScroll(e)},refresh:function(){var e=window.scrollY;u.refresh(),requestAnimationFrame((function(){u.onScroll(e)}))}}}},window.EljurCounterRequest=function(e,t){return fetch('https://img.eljur.ru/img-app/a.'+e+'/id.'+t)},window.EljurCounter=function(e){return e instanceof Object&&null!=e.id&&{show:function(){return EljurCounterRequest('show',e.id)},click:function(){return EljurCounterRequest('click',e.id)}}},window.EljurNotice=function(e,t){var o=$('[id="notice-'+e+'"]'),r=($('[id="notice-content-'+e+'"]'),$('[id="notice-collapse-'+e+'"]'));return $('[id="notice-close-'+e+'"]').on('click',(function(t){t.preventDefault(),o.slideUp(),JournalCommon.setPref(e,'no')})),$('[id="notice-title-'+e+'"]').length>0?r.on('click',(function(t){t.preventDefault();var r,n,i=$(this);o.toggleClass('notice--collapsed'),!o.hasClass('notice--collapsed')?(r='no',n='свернуть'):(r='yes',n='развернуть'),JournalCommon.setPref(e+'collapse',r),i.attr('title',n)})):r.remove(),o},function(){function e(e,t,o){if(e.addEventListener)e.addEventListener(t,o,!1);else{if(!e.attachEvent)throw new Error('not supported or DOM not loaded');e.attachEvent('on'+t,(function(){o.call(e)}))}}if(document.documentElement.getBoundingClientRect)var t=function(e){var t=e.getBoundingClientRect(),o=e.ownerDocument,r=o.body,n=o.documentElement,i=n.clientTop||r.clientTop||0,l=n.clientLeft||r.clientLeft||0,a=1;if(r.getBoundingClientRect){var s=r.getBoundingClientRect();a=(s.right-s.left)/r.clientWidth}return a>1&&(i=0,l=0),{top:t.top/a+(window.pageYOffset||n&&n.scrollTop/a||r.scrollTop/a)-i,left:t.left/a+(window.pageXOffset||n&&n.scrollLeft/a||r.scrollLeft/a)-l}};else t=function(e){var t=0,o=0;do{t+=e.offsetTop||0,o+=e.offsetLeft||0,e=e.offsetParent}while(e);return{left:o,top:t}};function o(e,t){for(var o in t)t.hasOwnProperty(o)&&(e.style[o]=t[o])}function r(e,r){var n,i,l,a,s=(a=t(n=e),i=a.left,l=a.top,{left:i,right:i+n.offsetWidth,top:l,bottom:l+n.offsetHeight});o(r,{position:'absolute',left:s.left+'px',top:s.top+'px',width:e.offsetWidth+'px',height:e.offsetHeight+'px'})}var n,i,l=(n=document.createElement('div'),function(e){n.innerHTML=e;var t=n.firstChild;return n.removeChild(t)}),a=(i=0,function(){return'ValumsAjaxUpload'+i++});function s(e){return e.replace(/.*(\/|\\)/,'')}function c(e){return-1!==e.indexOf('.')?e.replace(/.*[.]/,''):''}function d(e,t){(function(e,t){return new RegExp('\\b'+t+'\\b').test(e.className)})(e,t)||(e.className+=' '+t)}function u(e,t){var o=new RegExp('\\b'+t+'\\b');e.className=e.className.replace(o,'')}function h(e){e.parentNode.removeChild(e)}window.AjaxUpload=function(t,o){for(var r in this._settings={action:'upload.php',name:'userfile',multipleUploadersFix:!1,data:{},autoSubmit:!0,responseType:!1,hoverClass:'hover',disabledClass:'disabled',onChange:function(e,t){},onSubmit:function(e,t){},onComplete:function(e,t){}},o)o.hasOwnProperty(r)&&(this._settings[r]=o[r]);t.jquery?t=t[0]:'string'==typeof t&&(/^#.*/.test(t)&&(t=t.slice(1)),t=document.getElementById(t)),t&&1===t.nodeType&&('A'==t.nodeName.toUpperCase()&&e(t,'click',(function(e){e&&e.preventDefault?e.preventDefault():window.event&&(window.event.returnValue=!1)})),t.id&&e(t,'click',(function(){$('.'+t.id).trigger('click')})),this._button=t,this._input=null,this._disabled=!1,this.enable(),this._rerouteClicks())},AjaxUpload.prototype={setData:function(e){this._settings.data=e},disable:function(){d(this._button,this._settings.disabledClass),this._disabled=!0;var e=this._button.nodeName.toUpperCase();'INPUT'!=e&&'BUTTON'!=e||this._button.setAttribute('disabled','disabled'),this._input&&(this._input.parentNode.style.visibility='hidden')},enable:function(){u(this._button,this._settings.disabledClass),$(this._button).prop('disabled',!1),this._disabled=!1},_createInput:function(){var t=this,r=document.createElement('input');r.setAttribute('type','file'),r.setAttribute('name',this._settings.name),r.setAttribute('class','illegitimateAjaxUploadInput'),t._button.id&&r.setAttribute('class',t._button.id),o(r,{'position':'absolute','right':0,'margin':0,'padding':0,'fontSize':'480px','cursor':'pointer'});var n=document.createElement('div');o(n,{'display':'block','position':'absolute','overflow':'hidden','margin':0,'padding':0,'opacity':0,'cursor':'pointer','direction':'ltr'}),e(r,'change',(function(){if(r&&''!==r.value){var e=s(r.value);!1!==t._settings.onChange.call(t,e,c(e))?t._settings.autoSubmit&&t.submit():t._clearInput()}})),e(r,'mouseover',(function(){d(t._button,t._settings.hoverClass),!0===t._settings.multipleUploadersFix&&($(r).parent().attr('id','h'+$(t._button).attr('id')).attr('hometaskArea',!0),$('.illegitimateAjaxUploadInput').on('mouseover',(function(){})).on('mouseout',(function(){$(r).parent().hide()})))})),e(r,'mouseout',(function(){u(t._button,t._settings.hoverClass)})),n.appendChild(r),document.body.appendChild(n),this._input=r},_clearInput:function(){this._input&&(h(this._input.parentNode),this._input=null,this._createInput(),u(this._button,this._settings.hoverClass))},_rerouteClicks:function(){var t=this;e(t._button,'mouseover',(function(){if(!t._disabled){t._input||t._createInput();var e=t._input.parentNode;r(t._button,e),e.style.visibility='visible'}}))},_createIframe:function(){var e=a(),t=l('<iframe src="javascript:false;" name="'+e+'" />');return t.setAttribute('id',e),t.style.display='none',document.body.appendChild(t),t},_createForm:function(){var e=this._settings,t=l('<form method="post" enctype="multipart/form-data"></form>'),o=a();for(var r in t.setAttribute('action',e.action),t.setAttribute('target',o),t.style.display='none',document.body.appendChild(t),e.data)if(e.data.hasOwnProperty(r)){var n=document.createElement('input');n.setAttribute('type','hidden'),n.setAttribute('name',r),n.setAttribute('value',e.data[r]),t.appendChild(n)}return t},submit:function(){var e=this,t=this._settings;if(this._input&&''!==this._input.value){var o=s(this._input.value);if(!1!==t.onSubmit.call(this,o,c(o))){var r=this._createForm();h(this._input.parentNode),u(e._button,e._settings.hoverClass);var n=new FormData;n.append('userfile',this._input.files[0]),fetch(r.getAttribute('action'),{method:'POST',body:n,mode:'cors',credentials:'same-origin'}).then((function(e){return e.json()})).then((function(n){t.onComplete.call(e,o,n),e._createInput(),h(r),r=null,h(e._input),e._input=null}),(function(e){console.error(e)})).catch((function(e){console.error(e)}))}else this._clearInput()}}}}();var jrpc=new rpc(!0),JournalCommon={url:'/journal-index-rpc-action',gotourl:'',setPref:function(e,t,o,r,n){jrpc.post(window.theOnlyWayToGenerateUrlForMethodCall('user.set_pref',{pref:e,value:t},JournalCommon.url),(function(e){e&&0!=e.result&&null!=e.result?e.result&&o instanceof Function&&o(e):r instanceof Function&&r(),n instanceof Function&&n()}))}};function journalInsertChar(e,t){var o,r;t?(o='i',r=3):(o='',r=2),o+=e.parentNode.id.substr(r);var n=$('#ubel'+o);n.off('focusout');var i=getCaretPosition(n.get(0)),l=n.val();l===n.attr('placeholder')&&(l='',i=0);var a=e.getAttribute('realchar'),s=a||$(e).text(),c=$(e).parent().parent().find('input[name="htminutes"], input[name^="htiminutes"]');if('button-wh'===e.getAttribute('button-type'))n.val(s).removeClass('placeholder'),c.val(0);else{var d=(l.substr(0,i)+s+l.substr(i)).replace($('button[button-type="button-wh"]').first().text(),'');n.val(d).removeClass('placeholder'),setCaretPosition(n.get(0),i+s.length)}return!1}function journalUserButtons(e,t){t&&(e='i'+e);var o=document.querySelector('#ub'+e);o&&o.classList.add('user_buttons--hidden'),$('.user_buttons').not('.user_buttons--individual').addClass('user_buttons--hidden'),t||$('#ubel'+e).on('focus',(function(){o&&$(o).removeClass('user_buttons--hidden'),$(document).on('focusin.ub'+e+' click.ub'+e,(function(t){$(t.target).closest('#ub'+e+', #ubel'+e).length||($(document).off('.ub'+e),$(o).addClass('user_buttons--hidden'))}))}))}var hover_timer,prev_hover_name='',namecache={},namecache_i={},hover_timeout=3;function journalHover(e,t,o,r){o=o||!1,t=t||!1,e=e||!1,r=r||!1;var n=$(e).attr('name');if(e&&''!=n&&null!=n){if(n!=prev_hover_name){if(''!=prev_hover_name&&(namecache[prev_hover_name].removeClass('trhover'),null!=namecache_i[prev_hover_name]&&namecache_i[prev_hover_name].removeClass('trhover')),null==namecache[n]&&(o?namecache[n]=$('td[name="'+n+'"]'):(namecache[n]=$('div.cells').children('div.cell[name="'+n+'"]'),namecache_i[n]=$('i.cells').children('div.cell[name="'+n+'"]'))),o)namecache[n].addClass('trhover');else{var i;i=$('div.cells_num').length>0?2:1;var l=0;namecache[n].each((function(e,t){var o,r=$(this.parentNode),a=r.attr('mt_id'),s=null==a||a==current_mtype||'null'==current_mtype||null==current_mtype||r.hasClass('skip');o=current_mtype>0&&s?l++:e,s&&(o<=i||o>=scroll_position+i-1&&o<=scroll_position+scroll_display+i-1||o>=scrollbar_max+scroll_display+i)&&($(t).addClass('trhover'),isExpanded&&$(namecache_i[n][e]).addClass('trhover'))}))}$('.rep_num,.rep_per').removeClass('trhover'),prev_hover_name=n}}else''!=prev_hover_name&&(null!=namecache[prev_hover_name]&&namecache[prev_hover_name].removeClass('trhover'),null!=namecache_i[prev_hover_name]&&namecache_i[prev_hover_name].removeClass('trhover')),prev_hover_name=''}function journalSelect(e,t){if(t=t||!1,e=e||!1,$('#user_note_editor').hide(),$('.trselect').removeClass('trselect'),e)if(t)$(e).addClass('trselect');else{var o=$(e).attr('name');if(''==o||null==o){var r=$(e).find('input').get(0);if(!r)return;o=r.name}$('div.cell[name=\''+o+'\']').addClass('trselect')}}var scrollt,scrolli,cell_size=32,swidth=900,width_fio_min=220,noMarkTypes=!1,markTypeAttr='mt_id';function journalSetScrollerW(e,t){e||(e=window.curgrp);var o=window.current_mtype,r=o,n=$('#g'+e+'_mtypes');n.length>0&&(o=$('#g'+e+'_mtypes').val());var i=$('#g'+e+'_marks_header, #g'+e+'_marks'),l=$(i[0]),a=$(i[1]);if('null'!=o&&null!=o&&null!=o&&o>=0){var s='['+markTypeAttr+'='+o+']';$('#g'+e+'_marks').find('div'+s).length>0?(markType='['+markTypeAttr+'='+o+']',notMarkType='['+markTypeAttr+'!='+o+']',r!=o&&(window.first_run=!0,markTypeSwitch=!0),l.find('.megadate').addClass('megadate--fixw')):(n.val(r),o=r,alert(window.errormsg_type,!0))}else markType='',notMarkType='',l.find('.megadate').removeClass('megadate--fixw');window.first_run&&(scroll_length=0,scroll_position=0,scroll_display=0,scrollbar_step=0,scrollbar_max=0,width_fio=0,width_scroll=0,$('#g'+e+'_fio_header,#g'+e+'_fio,#g'+e+'_scroller,#g'+e+'_scroller_header').removeAttr('style'),o>=0&&(i.children('div'+notMarkType).hideClassy(),i.children('div'+markType).showClassy())),alwaysSeenNum=null!=markType&&''!=markType?l.children('.cells-always-show'+markType).length:0,scroll_length=l.children('div'+markType+',i.cells_visible').length;var c=$('#g'+e+'_num').width()||0,d=($('#g0_rb').width()||0)+($('#g0_ru').width()||0)+($('#g0_rn').width()||0),u=$('#right_scroll_header_'+e).width()||0;if(first_run)width_fio=$('#g'+e+'_fio').width()||0;else{var h=$('#g'+e+'_fio').width()||0;h>width_fio&&(width_fio=h)}width_fio<width_fio_min&&(width_fio=width_fio_min),$('#g'+e+'_fio_header,#g'+e+'_fio').width(width_fio-1),width_scroll=void 0!==window.scrollwidth?window.scrollwidth:swidth,width_scroll+=-c-width_fio-u+d,width_scroll-=width_scroll%cell_size;var f,p=0;return p=window.hometask_journal||window.extday_journal||window.cw_codifier_journal||window.noMarkTypes?a.children('div.cells,i.cells.cells_hidden.cells_visible').length:o>0?cmarks[e][o]:cmarks[e].all,width_scroll=Math.min(width_scroll,p*cell_size),scroll_display=width_scroll/cell_size,scroll_display-=alwaysSeenNum,scroll_length-=alwaysSeenNum,width_scroll<=504&&(window.hometask_journal||window.cw_codifier_journal)?$('#g'+e+'_scroller,#g'+e+'_scroller_header').width(504):$('#g'+e+'_scroller,#g'+e+'_scroller_header').width(width_scroll),scroll_display<scroll_length?($('#left_scroll_header_'+e+',#lscroll'+e+',#right_scroll_header_'+e+',#rscroll'+e+',#scrollbar_container').show(),first_run&&(scroll_position=scroll_length-scroll_display),scrollbar_max=scroll_length-scroll_display,scrollbar_step=Math.round(scroll_display/scroll_length*cell_size),$('#scrollbar_container').show().css('marginLeft',c+width_fio-3+(showExt?cell_size:0)).width(width_scroll+3),$('#scrollbar_container ej-slider').attr('max',scrollbar_max).val(scroll_position).off('change').on('change',(function(){var e=parseInt(this.value,10);this.scroll_position!=e&&(window.journalScroll(e),window.scroll_position=e)}))):($('#lscroll'+e+', #rscroll'+e).hide(),$('#scrollbar_container').hide()),scroll_length>=scroll_display&&(f=c+width_fio+width_scroll-1+(showExt?cell_size:0)),journalSetShadow(e,f),curgrp=e,null==t&&(t=scroll_length-scroll_display),journalScroll(t),!0}function journalSetShadow(e,t){var o=0;null!=t&&0!=t?o=t:$('#g'+e+'_journal_header').children('[id]:not(.cells_right_scroll_header)').filter(':visible').each((function(){o+=$(this).width()})),$('#table_header_shadow').width(o)}var scrollcheck=!1;function journalScrollDown(e){scrollcheck=!0,scrolli=setTimeout((function(){journalScrollDirection(e)&&journalScrollDown(e)}),50)}function journalScrollUp(e){scrollcheck?scrollcheck=!1:journalScrollDirection(e),clearTimeout(scrolli),clearTimeout(scrollt)}var curgrp=0;function journalScroll(e){window.Grid&&window.Grid.scrollTo(e);var t=$('#g'+curgrp+'_marks_header, #g'+curgrp+'_marks'),o=0,r=$(t.get(0)).children('i.cells_visible, div.cells'+markType),n=$(t.get(1)).children('i.cells_visible, div.cells'+markType);o=null!=markType&&''!=markType?r.filter('.cells-always-show').length:0,(window.hometask_journal||window.cw_codifier_journal)&&isExpanded&&($('.hometask_common').hideClassy(),$('.hometask_file').showClassy(),$('.hometask_num').removeClass('cell_hometask_content__high'),e+scroll_display>scroll_length?e=scroll_length-scroll_display:e<0&&(e=0),isExpanded=!1),o>0&&(r=r.filter(':not(.cells-always-show)'),n=n.filter(':not(.cells-always-show)')),e+scroll_display<=scroll_length&&e>=0?(t.children('i:not(.cells_visible)').attr('style','display:none'),scroll_position=e,$('#user_note_editor').attr('style','display:none'),r.each((function(t){var o=$(this);if(o.is('div.cells')||o.is('i.cells_visible')){var r=e<=t&&e+scroll_display>t?'block':'none';o.css('display',r),$(n[t]).css('display',r)}}))):scroll_length<=scroll_display&&(r.filter('div'+markType+',i.cells_visible').show(),n.filter('div'+markType+',i.cells_visible').show()),o>0&&t.children('.cells-always-show'+markType).css('display','block'),$('#scrollbar_container ej-slider').toggleClassy(scroll_length>scroll_display).attr('value',scroll_position)}function journalScrollDirection(e){var t=scroll_position+e;return journalScroll(t),window.Context.hide(),null!=active_cell&&(active_cell.removeClass('cell_load_edit'),active_cell=void 0),t==scroll_position}var used,isCS=!1,isPercent=!1,isRating=!1,isTen=!1,roundTo=2;function setMultipleSelect(e,t,o,r,n,i,l,a){var s=$('#'+e),c=$('#'+t),d=$('#'+o),u=$('#'+r);i==n&&(u.prop('disabled',!0),c.prop('disabled',!0)),c.on('change',(function(){var e=c.val();d.prop('disabled',null==e||''==e),u.prop('disabled',null==e||''==e)})),$('#'+e+' > a').on('click',(function(e){e.preventDefault();var t=$(this),o=t.attr('name');t.addClass('hide'),c.find('option[value="'+o+'"]').prop('disabled',!1),c.prop('disabled',!1).val('').trigger('change'),u.prop('disabled',!1),a(o)})),d.on('click',(function(e){e.preventDefault();var t=c.val();if(null==t||''==t)return!1;s.find('a[name="'+t+'"]').removeClass('hide'),c.find('option[value="'+t+'"]').prop('disabled',!0),c.val('').trigger('change');var o=s.find('a').not('.hide').length;u.prop('disabled',o>=n),c.prop('disabled',o>=n),o>=n&&(d.prop('disabled',!0),c.val('')),l(t)})),u.on('click',(function(e){return e.preventDefault(),u.prop('disabled')||(s.find('a.hide').each((function(){var e=$(this),t=e.attr('name');e.removeClass('hide'),c.find('option[value="'+t+'"]').prop('disabled',!0),l(t)})),d.prop('disabled',!0),u.prop('disabled',!0),c.prop('disabled',!0).val('')),!1})),c.decorateSelect()}function extToCss(e){return e=e.split('.').pop(),ext={'doc':'doc','docx':'doc','xls':'xls','xlsx':'xls','pdf':'pdf','jpg':'jpg','jpeg':'jpg','gif':'jpg','bmp':'jpg','png':' jpg','tiff':'jpg','rar':'rar','zip':'zip','txt':'att'}[e],ext||'att'}function getJournalElementFromEvent(e){var t=e.target||e.srcElement;return t.classList.contains('cell')||(t=$(t).parents('.cell').first().get(0)),null!=t&&0!=t&&t.parentElement.classList.contains('backdate')&&alert(intl.get('legacy.study.marks_block.period_limited')),!(null==t||0==t||'DIV'!==t.nodeName||t.classList.contains('cells')||(t.classList.contains('cell_inactive')||t.classList.contains('cell--locked'))&&!t.classList.contains('editable')&&''!==window.bmark||t.classList.contains('td1')||t.parentElement.classList.contains('backdate'))&&t}function journalIdSelectorForGroups(e,t){null!=t&&null!==t&&!1!==t||(t=window.grps),t instanceof Array||(t=t instanceof Object?Object.values(t):[t]),e instanceof Array||(e=e instanceof Object?Object.values(e):[e]);var o=[];return e.forEach((function(e){t.forEach((function(t){o.push('#g'+t+'_'+e)}))})),o.join(',')}function journalMarkTemplate(e,t,o,r,n){return n=n||'',''!=(e=null==e||!1===e?'':e.toString().toLowerCase().trim())&&'&nbsp;'!==e||'н'!==n||(e='Н',n=''),'<div class="cell-data">'+e+'</div><div class="cell-corner-1">'+(t=t||'')+'</div><div class="cell-corner-2">'+(o=o||'')+'</div><div class="cell-corner-3">'+(r=r||'')+'</div><div class="cell-corner-4">'+n+'</div>'}var classOrLessonProhibitSymbols=['/','+','=','"','\''];RegExp.escape=function(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,'\\$&')};var hexcase=0,b64pad='';function hex_md5(e){return rstr2hex(rstr_md5(str2rstr_utf8(e)))}function b64_md5(e){return rstr2b64(rstr_md5(str2rstr_utf8(e)))}function any_md5(e,t){return rstr2any(rstr_md5(str2rstr_utf8(e)),t)}function hex_hmac_md5(e,t){return rstr2hex(rstr_hmac_md5(str2rstr_utf8(e),str2rstr_utf8(t)))}function b64_hmac_md5(e,t){return rstr2b64(rstr_hmac_md5(str2rstr_utf8(e),str2rstr_utf8(t)))}function any_hmac_md5(e,t,o){return rstr2any(rstr_hmac_md5(str2rstr_utf8(e),str2rstr_utf8(t)),o)}function md5_vm_test(){return'900150983cd24fb0d6963f7d28e17f72'==hex_md5('abc').toLowerCase()}function rstr_md5(e){return binl2rstr(binl_md5(rstr2binl(e),8*e.length))}function rstr_hmac_md5(e,t){var o=rstr2binl(e);o.length>16&&(o=binl_md5(o,8*e.length));for(var r=Array(16),n=Array(16),i=0;i<16;i++)r[i]=909522486^o[i],n[i]=1549556828^o[i];var l=binl_md5(r.concat(rstr2binl(t)),512+8*t.length);return binl2rstr(binl_md5(n.concat(l),640))}function rstr2hex(e){for(var t,o=hexcase?'0123456789ABCDEF':'0123456789abcdef',r='',n=0;n<e.length;n++)t=e.charCodeAt(n),r+=o.charAt(t>>>4&15)+o.charAt(15&t);return r}function rstr2b64(e){for(var t='',o=e.length,r=0;r<o;r+=3)for(var n=e.charCodeAt(r)<<16|(r+1<o?e.charCodeAt(r+1)<<8:0)|(r+2<o?e.charCodeAt(r+2):0),i=0;i<4;i++)8*r+6*i>8*e.length?t+=b64pad:t+='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'.charAt(n>>>6*(3-i)&63);return t}function rstr2any(e,t){var o,r,n,i,l,a=t.length,s=Array(Math.ceil(e.length/2));for(o=0;o<s.length;o++)s[o]=e.charCodeAt(2*o)<<8|e.charCodeAt(2*o+1);var c=Math.ceil(8*e.length/(Math.log(t.length)/Math.log(2))),d=Array(c);for(r=0;r<c;r++){for(l=[],i=0,o=0;o<s.length;o++)i=(i<<16)+s[o],i-=(n=Math.floor(i/a))*a,(l.length>0||n>0)&&(l[l.length]=n);d[r]=i,s=l}var u='';for(o=d.length-1;o>=0;o--)u+=t.charAt(d[o]);return u}function str2rstr_utf8(e){for(var t,o,r='',n=-1;++n<e.length;)t=e.charCodeAt(n),o=n+1<e.length?e.charCodeAt(n+1):0,55296<=t&&t<=56319&&56320<=o&&o<=57343&&(t=65536+((1023&t)<<10)+(1023&o),n++),t<=127?r+=String.fromCharCode(t):t<=2047?r+=String.fromCharCode(192|t>>>6&31,128|63&t):t<=65535?r+=String.fromCharCode(224|t>>>12&15,128|t>>>6&63,128|63&t):t<=2097151&&(r+=String.fromCharCode(240|t>>>18&7,128|t>>>12&63,128|t>>>6&63,128|63&t));return r}function str2rstr_utf16le(e){for(var t='',o=0;o<e.length;o++)t+=String.fromCharCode(255&e.charCodeAt(o),e.charCodeAt(o)>>>8&255);return t}function str2rstr_utf16be(e){for(var t='',o=0;o<e.length;o++)t+=String.fromCharCode(e.charCodeAt(o)>>>8&255,255&e.charCodeAt(o));return t}function rstr2binl(e){for(var t=Array(e.length>>2),o=0;o<t.length;o++)t[o]=0;for(o=0;o<8*e.length;o+=8)t[o>>5]|=(255&e.charCodeAt(o/8))<<o%32;return t}function binl2rstr(e){for(var t='',o=0;o<32*e.length;o+=8)t+=String.fromCharCode(e[o>>5]>>>o%32&255);return t}function binl_md5(e,t){e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;for(var o=1732584193,r=-271733879,n=-1732584194,i=271733878,l=0;l<e.length;l+=16){var a=o,s=r,c=n,d=i;o=md5_ff(o,r,n,i,e[l+0],7,-680876936),i=md5_ff(i,o,r,n,e[l+1],12,-389564586),n=md5_ff(n,i,o,r,e[l+2],17,606105819),r=md5_ff(r,n,i,o,e[l+3],22,-1044525330),o=md5_ff(o,r,n,i,e[l+4],7,-176418897),i=md5_ff(i,o,r,n,e[l+5],12,1200080426),n=md5_ff(n,i,o,r,e[l+6],17,-1473231341),r=md5_ff(r,n,i,o,e[l+7],22,-45705983),o=md5_ff(o,r,n,i,e[l+8],7,1770035416),i=md5_ff(i,o,r,n,e[l+9],12,-1958414417),n=md5_ff(n,i,o,r,e[l+10],17,-42063),r=md5_ff(r,n,i,o,e[l+11],22,-1990404162),o=md5_ff(o,r,n,i,e[l+12],7,1804603682),i=md5_ff(i,o,r,n,e[l+13],12,-40341101),n=md5_ff(n,i,o,r,e[l+14],17,-1502002290),o=md5_gg(o,r=md5_ff(r,n,i,o,e[l+15],22,1236535329),n,i,e[l+1],5,-165796510),i=md5_gg(i,o,r,n,e[l+6],9,-1069501632),n=md5_gg(n,i,o,r,e[l+11],14,643717713),r=md5_gg(r,n,i,o,e[l+0],20,-373897302),o=md5_gg(o,r,n,i,e[l+5],5,-701558691),i=md5_gg(i,o,r,n,e[l+10],9,38016083),n=md5_gg(n,i,o,r,e[l+15],14,-660478335),r=md5_gg(r,n,i,o,e[l+4],20,-405537848),o=md5_gg(o,r,n,i,e[l+9],5,568446438),i=md5_gg(i,o,r,n,e[l+14],9,-1019803690),n=md5_gg(n,i,o,r,e[l+3],14,-187363961),r=md5_gg(r,n,i,o,e[l+8],20,1163531501),o=md5_gg(o,r,n,i,e[l+13],5,-1444681467),i=md5_gg(i,o,r,n,e[l+2],9,-51403784),n=md5_gg(n,i,o,r,e[l+7],14,1735328473),o=md5_hh(o,r=md5_gg(r,n,i,o,e[l+12],20,-1926607734),n,i,e[l+5],4,-378558),i=md5_hh(i,o,r,n,e[l+8],11,-2022574463),n=md5_hh(n,i,o,r,e[l+11],16,1839030562),r=md5_hh(r,n,i,o,e[l+14],23,-35309556),o=md5_hh(o,r,n,i,e[l+1],4,-1530992060),i=md5_hh(i,o,r,n,e[l+4],11,1272893353),n=md5_hh(n,i,o,r,e[l+7],16,-155497632),r=md5_hh(r,n,i,o,e[l+10],23,-1094730640),o=md5_hh(o,r,n,i,e[l+13],4,681279174),i=md5_hh(i,o,r,n,e[l+0],11,-358537222),n=md5_hh(n,i,o,r,e[l+3],16,-722521979),r=md5_hh(r,n,i,o,e[l+6],23,76029189),o=md5_hh(o,r,n,i,e[l+9],4,-640364487),i=md5_hh(i,o,r,n,e[l+12],11,-421815835),n=md5_hh(n,i,o,r,e[l+15],16,530742520),o=md5_ii(o,r=md5_hh(r,n,i,o,e[l+2],23,-995338651),n,i,e[l+0],6,-198630844),i=md5_ii(i,o,r,n,e[l+7],10,1126891415),n=md5_ii(n,i,o,r,e[l+14],15,-1416354905),r=md5_ii(r,n,i,o,e[l+5],21,-57434055),o=md5_ii(o,r,n,i,e[l+12],6,1700485571),i=md5_ii(i,o,r,n,e[l+3],10,-1894986606),n=md5_ii(n,i,o,r,e[l+10],15,-1051523),r=md5_ii(r,n,i,o,e[l+1],21,-2054922799),o=md5_ii(o,r,n,i,e[l+8],6,1873313359),i=md5_ii(i,o,r,n,e[l+15],10,-30611744),n=md5_ii(n,i,o,r,e[l+6],15,-1560198380),r=md5_ii(r,n,i,o,e[l+13],21,1309151649),o=md5_ii(o,r,n,i,e[l+4],6,-145523070),i=md5_ii(i,o,r,n,e[l+11],10,-1120210379),n=md5_ii(n,i,o,r,e[l+2],15,718787259),r=md5_ii(r,n,i,o,e[l+9],21,-343485551),o=safe_add(o,a),r=safe_add(r,s),n=safe_add(n,c),i=safe_add(i,d)}return Array(o,r,n,i)}function md5_cmn(e,t,o,r,n,i){return safe_add(bit_rol(safe_add(safe_add(t,e),safe_add(r,i)),n),o)}function md5_ff(e,t,o,r,n,i,l){return md5_cmn(t&o|~t&r,e,t,n,i,l)}function md5_gg(e,t,o,r,n,i,l){return md5_cmn(t&r|o&~r,e,t,n,i,l)}function md5_hh(e,t,o,r,n,i,l){return md5_cmn(t^o^r,e,t,n,i,l)}function md5_ii(e,t,o,r,n,i,l){return md5_cmn(o^(t|~r),e,t,n,i,l)}function safe_add(e,t){var o=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(o>>16)<<16|65535&o}function bit_rol(e,t){return e<<t|e>>>32-t}var startPosition=0,height=0,endPosition=0,one_height=36,heightContainer=0,posMode=0,debug=!1,scroll_length=0,scroll_position=0,scroll_display=0,scrollbar_step=0,scrollbar_max=0,first_run=!0,width_fio=0,width_scroll=0,isExpanded=!1,isExpandedCw=!1,hometask_journal=!1,extday_journal=!1,showExt=!1,templateScroll=!0,note_username='',current_mtype=null,markType='',notMarkType='',markTypeSwitch=!1,user_role='anonymous',user_role_old='anonymous',active_cell=void 0,doubleClickIntervalSec=10;window.addEventListener('load',(function(){if(window.$){var e=window.isMobile&&window.isMobile(),t=$(document.documentElement);$.fn.datepickerField&&($('input.datepicker,input.is-eljur-date').datepickerField(),$('input.datepicker-year,input.is-eljur-dateyear').datepickerField({showYear:!0})),$.fn.decorateSelect&&($('select.is-eljur-select').decorateSelect(),$('select.is-eljur-select-hover').decorateSelect({hover:!e}),$('select.is-eljur-select-hover-href').decorateSelect({hover:!e,redirect:!0})),$.fn.checkboxSlider&&$('.eljur-for-checkbox-slider').checkboxSlider(),$.fn.disableBlock&&$('.disable-block').disableBlock(),$.fn.inputNumber&&$('.is-input-number').inputNumber(),$.fn.eljurtabs&&$('#navigation-tabs').find('.navigation-tabs__items').eljurtabs(),$.fn.tooltip&&$('.with-tooltip, .tooltip-title, .widget__tooltip').tooltip(),$.fn.eljurAccordion&&$('.ej-accordions').eljurAccordion(),$.fn.autocompleteOff&&$('form[autocomplete="off"] input[type="text"],input[type="text"][autocomplete="off"]').autocompleteOff(),$('.b-href-outer').on('click touch',(function(e){e.stopPropagation(),e.preventDefault();var t=$(this).data('href');null!=t&&null!=t&&''!=t||(t=$(this).find('a').first().attr('href')),t&&(window.location.href=t)})),$('body').on('click touch','a',(function(){var e=$(this),t=$._data(this).events;function o(){return e.is('[href="#"]')||e.is('.has-modal')||e.is('[has-modal]')||e.is('[onclick]')||t&&t.length>0&&!0!==e.data('rpcControlExit')||t&&t.length>1&&!0===e.data('rpcControlExit')}t=t?t.click:void 0,o()||(e.on('click touch',(function(e){o()||e.preventDefault()})),setTimeout((function(){e.off('click touch')}),1e3*window.doubleClickIntervalSec||1e3))}));var o,r='<a href="/journal-user-preferences-action" class="b-href">'+trans('messages.alert.email.email_not_confirmed')+'</a><br>'+trans('messages.alert.email.while_email_not_confirmed')+'.';$('#email_confirmed').on('click',(o=!1,function(){o||window.Context.show(this,{id:'alert_context',html:r,color:'red',alignHorizontal:'left',notHideOnOutsideClick:!1,overlay:!0,width:500,onClose:function(){o=!1}}),o=!0})),$('.add-context[data-context], .with_context[data-context]').each((function(){var e=this,t=$(this),o=t.data('context');if(o&&o.length>0){var r=document.getElementById('top_nav').contains(e),n={html:o,color:r?'black':'white',dropdown:!0,closable:!1,isFixed:$('body').hasClass('body--fixed')&&r,timeout:0};t.off('click.context, touch.context').on('click.context, touch.context',(function(){Context.toggle(e,n)})),r&&Context.hover(e,n)}})),$('#mainmenu .triangle:not([id])').off('click touch').on('click touch',(function(){Context.toggle(this.parentNode,{id:'mainmenu_context_all',alignHorizontal:'left',topfix:1,dropdown:!0,color:'black'})})),$('#attach_resource').off('click touch').on('click touch',(function(e){e.preventDefault(),window.Modals&&window.Modals.showResources()})),$.fn.addModal&&($('.ajax-modal,.ajax').addModal(),$('.ajax_ht').addModal({tall:!0,wide:!0,mode:'hometask',scroll:'page',footer:!1,onClose:function(){$('#tabs').remove(),window.allTasks=null,window.allPresets=null}}),$('a.ajax_markprint').addModal({tall:!0,footer:!1,white:!0}),$('a.printjournal').addModal({footer:!1,tall:!0,wide:!0,keyboardEscape:!0}),$('.cw_analyse').not('.cw_analyse--gc, .cw_analyse--lms').addModal({footer:!1,white:!0,width:940,scroll:'page'}),$('#add_calendar').addModal({width:400,height:150,footer:!0}),$('#teacher-rebuke-icon, #teacher-rebuke-list').addModal({footer:!1,width:480,scroll:'page'})),t.trigger('onloadJsReady').trigger('onLoadJsReady'),$(window).on('popstate',(function(e){-1===location.href.indexOf('#')&&window.location&&window.location.href!=location.href&&(window.location=location.href)}))}}));