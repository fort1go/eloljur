'use strict';(self.webpackChunkeljur_build_frontend=self.webpackChunkeljur_build_frontend||[]).push([[7885],{43110:function(t,e){e.Z={isTen:!1,isCS:!1,isPercent:!1,isRating:!1,isLetteredTen:!1,debtIsControlLackOfMark:!1,roundResultTo:0,groupBySets:!1,avgControl:{}}},15091:function(t,e,r){r.d(e,{K5:function(){return i},tq:function(){return a}});var n='max-width: 896px';function i(){try{return window.matchMedia(n).matches||window.matchMedia('('.concat(n,')')).matches}catch(t){return!1}}function a(){return function(){try{var t,e,r=document.body||document.querySelector('body');return!(null!=r&&null!==(t=r.classList)&&void 0!==t&&t.contains('body'))||(null==r||null===(e=r.classList)||void 0===e?void 0:e.contains('body--fluid'))}catch(t){return!1}}()&&i()}},46189:function(t,e,r){r.d(e,{V:function(){return u},l:function(){return c}});var n=r(24983);function i(t){return i='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&'function'==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?'symbol':typeof t},i(t)}function a(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function o(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?a(Object(r),!0).forEach((function(e){s(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function s(t,e,r){var n;return n=function(t,e){if('object'!=i(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||'default');if('object'!=i(n))return n;throw new TypeError('@@toPrimitive must return a primitive value.')}return('string'===e?String:Number)(t)}(e,'string'),(e='symbol'==i(n)?n:String(n))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function c(t){var e=t.replace(/(....-..-..).*/,'$1'),r=t.replace(/....-..-..([^N]*)N.*/,'$1'),n=t.replace(/.*N([^_]*)_.*/,'$1');return{date:e,num:r,lessonNum:r,nm:n,columnNum:n}}function u(t,e){var r=e||window.curcol;if(t=t||r&&r.id,!r&&!t)return!1;var i=window.$,a=r.parentNode;if(r){var s=i(r).data('column-title');if(s)return{part:s}}var u=window,l=u.curgrp,f=u.pres;if(t==='g'.concat(l,'_yearly'))return{part:'Годовая'};if('g'.concat(l,'_inner_exams')===t)return{part:n.Z.partName};if(!f){var m=c(t),d=a&&a.getAttribute('nosched'),g=a&&a.getAttribute('twoless');return o(o({},m),{},{nosched:d,twoless:g})}return/\s[0-9]{1,2}\sкл\./.test(t)?{part:t.replace(/([^_]*)\s[0-9]{1,2}\sкл\._.*/,'$1')}:{part:t.replace(/([^_]*)_.*/,'$1')}}},71938:function(t,e,r){function n(t,e){null!=e&&!1!==e||(e=window.grps),Array.isArray(e)||(e=e instanceof Object?Object.values(e):[e]),Array.isArray(t)||(t=t instanceof Object?Object.values(t):[t]);var r=[];return t.forEach((function(t){e.forEach((function(e){r.push('#g'.concat(e,'_').concat(t))}))})),r.join(',')}r.d(e,{e:function(){return n}})},48765:function(t,e,r){function n(t){var e,r=parseFloat(t);switch(!0){case!r:e='color: #808080 !important;';break;case r>0&&r<50:e='color: #DB7093 !important;';break;case r>=50:e='color: #006400 !important;'}return e}r.d(e,{h:function(){return n}})},71967:function(t,e,r){r.d(e,{u:function(){return o}});var n=r(91248),i=r(83886),a=r(45489);function o(t){if(t){var e,r,o,s,c,u,l=window,f=l.journalSelect,m=l.curgrp,d=l.mdate,g=l.all_colors,v=l.part_max_mark_list,b=l.JournalConfig,p=l.mLms,y=l.mcolorname,h=l.mcontrol,w=l.$,k=l.mtype,_=l.part_max_mark_on,A=l.mcomment,S=l.mtype_short,O=l.mmaxmark,j=l.ignore_simple_marks,x=l.mon,P=t.getAttribute('name'),M=t.getAttribute('data-lid');if(void 0===S||t.parentElement.classList.contains('trselect')||(e=w('#g0_marks > .cells_marks > .cell.trselect')),f(t),void 0!==d){var C=w('#g'.concat(m,'_marks_header > div.cells > div.cell')),N=w('#g'.concat(m,'_comments'));N.children().remove();var E='00';if(C.each((function(t){if(!this.parentNode.classList.contains('cells--preset-header')){var e=w(this);e.removeClass(g.join(' '));var r,i,o,s='';if(d[P]&&d[P][t]&&!(0,n.d)(d[P][t],[void 0,''])){var c=d[P][t].replace(/(....)-(..)-(..).*/,'$2'),u='',l='',f='',m='';if(y[P]&&''!=y[P][t]&&(u=y[P][t]),h[P]&&'1'==h[P][t]||k[P]&&!(0,n.d)(k[P][t],[void 0,''])||A[P]&&!(0,n.d)(A[P][t],[void 0,''])){var v;l=d[P][t].replace(/(....)-(..)-(..).*/,'$3.$2'),f='',(0,n.d)(A[P][t],[void 0,''])||(f=A[P][t]),m='',!0===(null==p||null===(v=p[P])||void 0===v?void 0:v[t])&&(m='&middot; <span style="color: green">Курс</span> &middot; ');var _='';if(b&&b.isRating&&b.max_mark_on&&O&&O[P]&&O[P][t]){var M=O[P][t];_='('+(0,a.Iu)('dnevnik.max')+' '+M+' '+(o=(r=M)%10,i=(0,n.d)(r,[11,12,13])?'dnevnik.third_form_of_points':1===o?'dnevnik.first_form_of_points':(0,n.d)(o,[2,3,4])?'dnevnik.second_form_of_points':'dnevnik.third_form_of_points',(0,a.Iu)(i)+')')}N.append('<p><span class="'+u+'">'+l+' - '+k[P][t]+_+'</span> '+m+f+'</p>')}var C='';if(S&&S[P]&&S[P][t]&&(''==(C=S[P][t])||j&&''==k[P][t]||(s+='<div class="cell-day-type '.concat(u,'">')+'<span style="display:block;">'.concat(C,'</span>')+'</div>',e.append(s))),E!==c){E=c;var T=parseInt(d[P][t].replace(/(....)-(..)-(..).*/,'$3'),10),I=d[P][t].replace(/(....)-(..)-(..).*/,'$2'),L=x[I].substr(0,3);s+='<div class="megadate '.concat(u,'"><div class="fulldate">').concat(T,'<div class="fulldate__month">').concat(L,'</div></div></div>')}else s+='<div class="megadate '.concat(u,'"><div class="fulldate">').concat(d[P][t].replace(/(....)-(..)-(..).*/,'$3'),'</div></div>')}e.html(s)}})),void 0!==S){e&&e.length&&e.each((function(){if(!this.parentNode.classList.contains('cells--preset-header')){var t=w(this),e=t.data('dirty-html');e&&t.html(e)}}));var T,I=0,L=0,F=0;if(w('#g0_marks > .cells_marks > .cell[data-lid="'.concat(M,'"]')).each((function(){var t=w(this);t.data('dirty-html',t.html());var e=t.find('.cell-data'),r=t.attr('miss_type'),n=parseFloat(t.attr('max_mark')),a=parseFloat(t.attr('weight'))||1,o=e.length?e.text():t.text(),s=parseFloat(o);if((!j||t.hasClass('has_type'))&&!Number.isNaN(n)&&(I+=n*a,'1'==t.attr('mt_control')?L+=n*a:F+=n*a,!Number.isNaN(s))){var c;c=''.concat(Math.round(s/n*100).toFixed(0),'%');var u='';'late'===r?u=window.late_symbol||'ОП':'miss'===r&&(u=window.miss_symbol||'Н'),t.html((0,i.Z)(o,'','',c,u))}})),w('#g0_max_mark_rating_cw').html(L>0?L:''),w('#g0_max_mark_rating_not_cw').html(F>0?F:''),_)w('#g0_max_mark_current_rating').html(I>0?I:''),null!==(T=window.JournalConfig)&&void 0!==T&&T.isGainedPercentShowInResult||w('#g0_max_mark_rating').html(v[P]>0?v[P]:'');else w('#g0_max_mark_rating').html(I>0?I:'')}}s=t.getAttribute('name')||'',c=null===(o=((null===(r=window.JournalConfig)||void 0===r?void 0:r.count_days)||{})[s])||void 0===o?void 0:o.hours,(u=document.querySelector('.js-extra-hours-count'))&&(u.innerText='number'==typeof c?c:'')}}},24983:function(t,e){var r,n=window,i=n.$,a=n.JournalTeacher,o=n.JournalConfig,s=n.group,c=(null==o||null===(r=o.intl)||void 0===r?void 0:r.inner_exam)||i('#inner_exam').val(),u=i('#inner_exam_short').val();e.Z={autoSet:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:'marks';if(s=null!==(t=s)&&void 0!==t?t:window.curgrp,'marks'===e){var r=document.querySelectorAll('#g'.concat(s,'_journal [id$=_avg_cw_years] div.cell:not(.cell_inactive)')),n=document.querySelectorAll('#g'.concat(s,'_journal [id$=_inner_exams] div.cell:not(.cell_inactive)'));r.forEach((function(t,e){var r=i(t).attr('name'),o=parseFloat(t.textContent);if(!Number.isNaN(o)&&o>0){o=o.toFixed();var s=i(n[e]);s.text(o),a.setPartMark(r,c,o,'',null,s)}}))}else if('results'===e){var u=document.querySelectorAll('#g'.concat(s,'_marks .id_inner_exam div.cell:not(.cell_inactive)')),l=o.journalAvgCwYearMarks[s]||[];u.forEach((function(t,e){var r=i(t),n=r.attr('name'),o=parseFloat(l[n]);!Number.isNaN(o)&&o>0&&(o=o.toFixed(),r.text(o),a.setPartMark(n,c,o,'',null,r))}))}},partName:c,partShortName:u}},37573:function(t,e,r){var n=r(8849),i=r(71938),a=r(17595);var o=r(15769);function s(t){return s='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&'function'==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?'symbol':typeof t},s(t)}function c(t){return function(t){if(Array.isArray(t))return u(t)}(t)||function(t){if('undefined'!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t['@@iterator'])return Array.from(t)}(t)||function(t,e){if(!t)return;if('string'==typeof t)return u(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);'Object'===r&&t.constructor&&(r=t.constructor.name);if('Map'===r||'Set'===r)return Array.from(t);if('Arguments'===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return u(t,e)}(t)||function(){throw new TypeError('Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.')}()}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function l(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function f(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?l(Object(r),!0).forEach((function(e){m(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function m(t,e,r){var n;return n=function(t,e){if('object'!=s(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||'default');if('object'!=s(n))return n;throw new TypeError('@@toPrimitive must return a primitive value.')}return('string'===e?String:Number)(t)}(e,'string'),(e='symbol'==s(n)?n:String(n))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function d(t){var e=window.JournalConfig,r=[],n=[],i=document.querySelector('.grid-group'),a=i?i.querySelectorAll('.cell[name="'.concat(function(t){if(null==t)return'';var e=String(t);return e?window.CSS&&'function'==typeof window.CSS.escape?window.CSS.escape(e):e.replace(/["']/g,(function(t){return'\\'.concat(t)})):''}(t),'"]')):[],s=Array.from(a).map((function(t){if(null===t)return{};var r=t.parentElement;if(null===r)return{};var n,i=null!==t.getAttribute('weight')?Number(t.getAttribute('weight')):1,a={weight:null!==(n=t).getAttribute('weight')?Number(n.getAttribute('weight')):1,max_mark:Number(n.getAttribute('max_mark')),control:n.classList.contains('cont')?1:0,required:Number(n.getAttribute('mt_required')),id:Number(n.getAttribute('mt_id')),set_id:Number(n.getAttribute('set_id')),date:n.getAttribute('id'),maxMarkToCut:0,miss:'',substruct:!1},s=t.querySelector('.cell-corner-4'),c=s&&s.textContent?s.textContent.toLowerCase():'',u=t.querySelector('.cell-data');t.classList.contains('has_type')||t.classList.contains('cont')||((a={}).weight=i,a.id=Number(t.getAttribute('mt_id'))||0,a.set_id=Number(t.getAttribute('set_id')),a.required=Number(t.getAttribute('mt_required')),a.date=t.getAttribute('id'));var l=u?u.cloneNode(!0):null;if(l&&l.querySelector('.small')&&l.removeChild(l.querySelector('.small')),t.classList.contains('transition')&&(a.maxMarkToCut=a.max_mark*a.weight),!!l&&('н'===l.textContent.toLowerCase()||s&&'н'===c||s&&'оп'===c)){var m=t.getAttribute('miss_reason')||t.getAttribute('miss_type');a.miss=m,'b'===m||'u'===m?a.maxMarkToCut=a.max_mark*a.weight:'n'===m&&(a.substruct=!0,a.maxMarkToCut=0)}var d=t.getAttribute('lms_type');d&&(a.lms_type=d);var g='';if(l?g=l.textContent:t.querySelector('input')&&(g=t.querySelector('input').value),g&&g.indexOf('н')>-1){var v=g;g=v.slice(0,v.indexOf('н'))+v.slice(v.indexOf('н')+1)}s&&'н'===c&&''===g&&Number.isNaN(parseFloat(c))&&(g=s.textContent);var b=r.getAttribute('id');if(r&&b&&b.indexOf('_avg')>-1)return{};var p={mark:g,set:f({},a)};return''!==g.trim()&&(0,o.Z)(p,t,e),p})),u=s.filter((function(t){return t.set&&t.set.maxMarkToCut&&0!==t.set.id||t.mark||t.set&&0!==Number(t.set.id)||t.set&&0===t.set.maxMarkToCut&&0!==t.set.id}));n.push.apply(n,c(u));var l={id:t,data:n,dataRaw:c(s)};return r.push(l),r}var g=r(45221);function v(t){return v='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&'function'==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?'symbol':typeof t},v(t)}function b(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function p(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?b(Object(r),!0).forEach((function(e){y(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function y(t,e,r){var n;return n=function(t,e){if('object'!=v(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||'default');if('object'!=v(n))return n;throw new TypeError('@@toPrimitive must return a primitive value.')}return('string'===e?String:Number)(t)}(e,'string'),(e='symbol'==v(n)?n:String(n))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function h(t){var e=window.JournalConfig,r=e.allowTwoMarksByLesson,n=window.allow_marks_all,o={},s=t?[t]:Array.from(document.querySelectorAll('#g0_fio .cell')).map((function(t){return t.getAttribute('name')||''})).filter(Boolean),c=document.querySelectorAll((0,i.e)('journal [id*=_avg][mt_id] div.cell')),u=Array.from(c).map((function(t){return t.getAttribute('mt_id')||''})).filter(Boolean);return s.forEach((function(t){var i,s,l,f,m=p(p({},e),{},{allowTwoMarks:r&&void 0!==r[t]?r[t]:e.allowTwoMarks}),v=n[t],b=d(t),h=b[0].data.map((function(t){return t.set})),w=new g.Z(b[0].data,m,v,1,h,'',t,!1,Boolean(c.length)),k=u.reduce((function(t,e){return p(p({},t),{},y({},e,w.getSetAverage(e)))}),{});(o[t]={cw:w.getCwAverage(),withoutCw:w.getWithoutCwAverage(),total:w.getTotalAverage(),localSets:w.getAverageByLocalSets(),sets:k},e.show.const_avg_with_debts_enabled)&&(o[t].cwWithDebts=(0,a.QE)(null!==(i=null===(s=b[0])||void 0===s?void 0:s.dataRaw)&&void 0!==i?i:[],null!==(l=null===(f=e.avgControl)||void 0===f?void 0:f.round)&&void 0!==l?l:1,e.isIgnoreMarkZeroForAvg))})),o}var w=r(58579),k=r(71967);function _(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:'undefined'!=typeof Symbol&&t[Symbol.iterator]||t['@@iterator'];if(null!=r){var n,i,a,o,s=[],c=!0,u=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(s.push(n.value),s.length!==e);c=!0);}catch(t){u=!0,i=t}finally{try{if(!c&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return s}}(t,e)||function(t,e){if(!t)return;if('string'==typeof t)return A(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);'Object'===r&&t.constructor&&(r=t.constructor.name);if('Map'===r||'Set'===r)return Array.from(t);if('Arguments'===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return A(t,e)}(t,e)||function(){throw new TypeError('Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.')}()}function A(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}window.addEventListener('load',(function(){var t=h(),e=window,r=e.$,a=e.JournalConfig,o=e.isPrint,s=e.curgrp,c=e.teacher;if(o||'function'!=typeof r.fn.tooltip||r('#g0_journal div.cell[title], div.cell[data-title], div.cell[data-title2]').tooltip({title2:!0}),a&&a.groupBySets){var u={},l=[],f=[];try{u=Object.values(a.sets).reduce((function(t,e){return t[e.name]?t[e.name].push(e.set_id):t[e.name]=[e.set_id],t}),{}),l=Object.keys(u),f=Object.values(u)}catch(t){u={},l=[]}if(l.length){var m=Object.keys(window.mdate).filter(Boolean),d=/^g\d+_avg\d+_header$/g,g=/^g\d+_avg\d+(?!header)*$/g,v=r('[id^=g'.concat(s,'_avg]')),b=v.filter((function(){return this.id.match(d)})),p=v.filter((function(){return this.id.match(g)}));l.forEach((function(t,e){if(t){var r=t.substr(0,1).toUpperCase();b.eq(e).find('.cell').first().attr('title',t).text(r)}})),m.forEach((function(t,e){var r=(c?(0,w.Z)(t):h(t))[t].localSets,n=r.sets;Object.entries(n).forEach((function(t){var n,i=_(t,2),a=i[0];i[1];r[a]&&r[a].totalAverage&&(n=r[a]);var o=f.findIndex((function(t){return t.indexOf(a)>-1})),s=n&&n.totalAverage||'';p.eq(o).children('.cell').eq(e).text(s)}))}))}}r('#g0_avg_current div.cell').each((function(){(0,n.Fw)(this,t)})),r('#g0_avg div.cell').each((function(){(0,n.jO)(this,t)})),r('#g0_avg_cw div.cell').each((function(){(0,n.nG)(this,t)})),r('#g0_avg_not_cw div.cell').each((function(){(0,n.On)(this,t)})),r('#g0_const_avg_with_debts div.cell').each((function(){(0,n.pj)(this,t)})),a.extra_rating_on&&r((0,i.e)('journal [id$=_extra] div.cell')).each((function(){var t=r(this).parents('.cells').attr('id').replace(/g([0-9]*)\_.*/,'$1'),e=r('#g'.concat(t,'_pmarks div.cell[name="').concat(r(this).attr('name'),'"]'));e.find('.cell-data').length>0&&(e=e.find('.cell-data'));var n=parseInt(e.hasClass('markedit')?e.find('input').val():e.text(),10);if(!Number.isNaN(n)){(e=r('#g'.concat(t,'_avg')).find('.cell[name="'.concat(r(this).attr('name'),'"]'))).find('.cell-data').length>0&&(e=e.find('.cell-data'));var i=parseInt(e.hasClass('markedit')?e.find('input').val():e.text(),10),a=r('#g'.concat(t,'_avg_cw')).find('.cell[name="'.concat(r(this).attr('name'),'"]'));a.find('.cell-corner-3').length>0&&(a=a.find('.cell-corner-3'));var o=parseInt(a.hasClass('markedit')?a.find('input').val():a.text(),10),s=n-(Number.isNaN(i)?0:i);r(this).html(s>0&&i>=30&&o>=30?s:0)}})),r((0,i.e)('journal')).off('click','div.cell').on('click','div.cell',(function(){(0,k.u)(this)})).off('replaceSmile').on('replaceSmile',(function(){r('#g'.concat(s,'_marks > .cells > .cell, #g').concat(s,'_avg > .cell')).each((function(){var t,e=r(this);(t=e.hasClass('markedit')?e.find('input').val():e.text())&&(t=t.trim()),e.toggleClass('cell-smile-happy',':-)'===t).toggleClass('cell-smile-sad',':-('===t).toggleClass('cell-smile-neutral',':-|'===t).toggleClass('cell-smile-cap',':!'===t).toggleClass('cell-smile-award',':+'===t).toggleClass('cell-smile-bell',':...'===t)}))})).trigger('replaceSmile')}))},17595:function(t,e,r){function n(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=0,a=0;(e=t,function(t){return t.filter((function(t){var e,r;return!(null===(e=t.set)||void 0===e||!e.control||null===(r=t.set)||void 0===r||!r.lms_type||'mark'===t.set.lms_type&&''===t.mark)}))}(e).map((function(t){return'debt'===t.set.lms_type&&(t.mark=1),t}))).forEach((function(t){var e=t.set;if(!e||!e.inactive){var r=Number(e.weight)||1,o=parseFloat(t.mark)*r;if(!n||0!==o){var s=1;Number.isNaN(o)&&!Number(t.set.control)&&1!==Number(t.set.control)||(s=r),i+=s,a+=o}}}));var o=0;return i>0&&(o=a/i),{marksNumber:i,sum:a,totalAverage:0!==o?o.toFixed(r):o}}r.d(e,{QE:function(){return n}})},45221:function(t,e,r){r.d(e,{Z:function(){return M}});var n=r(64082),i=r(46189);var a=r(50361),o=r.n(a);function s(t){return s='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&'function'==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?'symbol':typeof t},s(t)}function c(t){return function(t){if(Array.isArray(t))return u(t)}(t)||function(t){if('undefined'!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t['@@iterator'])return Array.from(t)}(t)||function(t,e){if(!t)return;if('string'==typeof t)return u(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);'Object'===r&&t.constructor&&(r=t.constructor.name);if('Map'===r||'Set'===r)return Array.from(t);if('Arguments'===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return u(t,e)}(t)||function(){throw new TypeError('Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.')}()}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function l(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function f(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?l(Object(r),!0).forEach((function(e){m(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function m(t,e,r){var n;return n=function(t,e){if('object'!=s(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||'default');if('object'!=s(n))return n;throw new TypeError('@@toPrimitive must return a primitive value.')}return('string'===e?String:Number)(t)}(e,'string'),(e='symbol'==s(n)?n:String(n))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var d={sum:0,marksNumber:0,gainedPercent:0,maxPossibleMark:0,substruct:0,notInRatingScale:!1,moreMiss:!1,moreMinMarks:!1,partMarkPercent:''},g={withoutCwAcc:f({},d),cwAcc:f({},d),totalAverageAcc:f({},d),cwWithDebts:f({},d)};function v(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return t.reduce((function(t,n){var i=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=!(!t.set||!t.set.weight||0===Number(t.set.weight)),i=n?t.set.weight:r,a=window;i=a.weight_on?i:1,i=a.weight_float?i:Number(i);var s=parseFloat(t.mark),c=s*i,u=o()(g);return i=0===c&&0===i?0:i,t.set.id&&0===t.set.weight&&e.isIgnoreMarkWeightZeroForAvg||(t.set&&t.set.control?(u.cwAcc.sum+=c||0,u.cwAcc.marksNumber+=i):e.countAvgNotCwIfTypeWithWeightZero&&!n?(u.withoutCwAcc.sum+=s,u.withoutCwAcc.marksNumber+=1):e.countAvgNotCwIfTypeWithWeightZero||(u.withoutCwAcc.sum+=c||0,u.withoutCwAcc.marksNumber+=i),u.totalAverageAcc.sum+=c||0,u.totalAverageAcc.marksNumber+=i),u}(n,e,r);return Object.keys(t).forEach((function(e){Object.keys(t[e]).forEach((function(r){Number.isNaN(i[e][r])||(t[e][r]+=i[e][r])}))})),t}),o()(g))}function b(t,e,r){var n=r.usualWeight,i=v(t,e,n),a=t.filter((function(t){return Number(t.set.control)})),o=t.filter((function(t){return!Number(t.set.control)})),s=t.map((function(t){return t.set}));t.forEach((function(t,e){s[e].value=t.mark}));var c=function(t,e,r){var n={cwAcc:{maxPossibleMark:0},withoutCwAcc:{maxPossibleMark:0},totalAverageAcc:{maxPossibleMark:0}};return t.reduce((function(t,i){var a=window,o=a.weight_on,s=a.weight_float,c=i.weight||0===i.weight?i.weight:e;o||(c=1),s||(c=parseInt(String(c),10));var u=i.max_mark*c;return i.inactive||Number.isNaN(i.value)&&r.ignore_justifiable_miss&&i.miss&&('b'===i.miss||'u'===i.miss)&&!Number(i.control)||Number.isNaN(u)?t:(Number(i.control)?n.cwAcc.maxPossibleMark+=u:n.withoutCwAcc.maxPossibleMark+=u,r.required_works_on&&!i.required||(n.totalAverageAcc.maxPossibleMark+=u),n)}),n)}(s,n,e);return i.cwAcc.maxPossibleMark=c.cwAcc.maxPossibleMark,i.withoutCwAcc.maxPossibleMark=c.withoutCwAcc.maxPossibleMark,i.totalAverageAcc.maxPossibleMark=c.totalAverageAcc.maxPossibleMark,t.forEach((function(t){t.set&&t.set.substruct&&(i.totalAverageAcc.substruct+=1)})),Object.keys(i).forEach((function(t){var e=i[t];e.gainedPercent=e.sum/e.maxPossibleMark*100||0,(e.gainedPercent>100||e.gainedPercent<0)&&(e.gainedPercent=100)})),(0===i.withoutCwAcc.maxPossibleMark&&0===i.withoutCwAcc.sum&&o.length&&i.withoutCwAcc.maxPossibleMark||0===i.withoutCwAcc.maxPossibleMark&&o.length)&&(i.withoutCwAcc.gainedPercent=100),(0===i.cwAcc.maxPossibleMark&&0===i.cwAcc.sum&&a.length&&i.cwAcc.maxPossibleMark||0===i.cwAcc.maxPossibleMark&&a.length)&&(i.cwAcc.gainedPercent=100),(0===i.totalAverageAcc.maxPossibleMark&&0===i.totalAverageAcc.sum&&(a.length||o.length)&&i.totalAverageAcc.maxPossibleMark||0===i.totalAverageAcc.maxPossibleMark&&(a.length||o.length))&&(i.totalAverageAcc.gainedPercent=100),e.calc_avg_rating&&(i.withoutCwAcc.maxPossibleMark||i.withoutCwAcc.gainedPercent?i.cwAcc.maxPossibleMark||i.cwAcc.gainedPercent?i.totalAverageAcc.gainedPercent=Math.round((i.withoutCwAcc.gainedPercent+i.cwAcc.gainedPercent)/2).toFixed(0):i.totalAverageAcc.gainedPercent=Math.round(i.withoutCwAcc.gainedPercent):i.totalAverageAcc.gainedPercent=Math.round(i.cwAcc.gainedPercent)),i}function p(t,e,r,n){var i=n.typesForMaxMark,a=n.incomingMarks;return e.declaring_marks_on?function(t,e,r,n,i){var a={calc_avg_rating:r.calc_avg_rating,usualWeight:n,required_works_on:r.required_works_on,typesForMaxMark:i,ignore_justifiable_miss:r.ignore_justifiable_miss},o=b(t,r,a),s=o.cwAcc;(s.gainedPercent>100||0===s.sum&&0===s.maxPossibleMark)&&(s.gainedPercent=100);var u=0,l=t.reduce((function(e,i,a){var o=i.set.control,s=i.set.declaring_ignore,l=i.set.weight||n;if(o){var f=l*Number(i.mark)/(Number(i.set.max_mark)*l)*100,m=t.slice(u,a);u=a;var d=f>=r.declaring_marks_percent||s?m.filter((function(t){return!t.set.control})):[];return[].concat(c(e),c(d))}return c(e)}),[]),f=0===u?u:u+1,m=t.slice(f).filter((function(t){return!Number(t.set.control)}));l.push.apply(l,c(m.filter((function(t){return!t.set.transition})))),l.push.apply(l,c(t.filter((function(t){return t.set.transition&&!Number(t.set.control)}))));var d=b(l,r,a).withoutCwAcc;d.maxPossibleMark=o.withoutCwAcc.maxPossibleMark,d.gainedPercent=d.maxPossibleMark>0?Number((d.sum/d.maxPossibleMark*100).toFixed(0)):'100',(d.gainedPercent>100||0===d.sum&&0===d.maxPossibleMark)&&(d.gainedPercent=100);var g=b([].concat(c(l),c(t.filter((function(t){return Number(t.set.control)})))),r,a).totalAverageAcc;g.maxPossibleMark=o.totalAverageAcc.maxPossibleMark,g.gainedPercent=g.maxPossibleMark>0?Number((g.sum/g.maxPossibleMark*100).toFixed(0)):'100',(g.gainedPercent>100||0===g.sum&&0===g.maxPossibleMark)&&(g.gainedPercent=100),g.marksNumber=o.totalAverageAcc.marksNumber;var v=i.some((function(t){var r=(t.date||'').slice(0,10),n=e.find((function(t){return t.set&&t.set.date&&t.set.date.includes(r)}));return!(n&&n.set&&Number(n.set.control)&&n.set.transition||!Number(t.control))})),p=t.some((function(t){return!!Number(t.set.control)})),y={cwAcc:s,withoutCwAcc:d,totalAverageAcc:g};return v&&!p&&Object.keys(y).forEach((function(t){Object.keys(y[t]).forEach((function(e){y[t][e]=0}))})),y}(t,a,e,r,i):b(t,e,{calc_avg_rating:e.calc_avg_rating,required_works_on:e.required_works_on,ignore_justifiable_miss:e.ignore_justifiable_miss,usualWeight:r,typesForMaxMark:i})}function y(t){return Object.keys(t).forEach((function(e){if('id'!==e){var r=t[e].sum/t[e].marksNumber||0;t[e].totalAverage=r}})),t}function h(t,e){var r=Math.pow(10,e);return(Math.round(t*r)/r).toFixed(e)}function w(t){return w='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&'function'==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?'symbol':typeof t},w(t)}function k(t){return function(t){if(Array.isArray(t))return _(t)}(t)||function(t){if('undefined'!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t['@@iterator'])return Array.from(t)}(t)||function(t,e){if(!t)return;if('string'==typeof t)return _(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);'Object'===r&&t.constructor&&(r=t.constructor.name);if('Map'===r||'Set'===r)return Array.from(t);if('Arguments'===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _(t,e)}(t)||function(){throw new TypeError('Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.')}()}function _(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function A(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function S(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?A(Object(r),!0).forEach((function(e){O(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):A(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function O(t,e,r){return(e=x(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function j(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,'value'in n&&(n.writable=!0),Object.defineProperty(t,x(n.key),n)}}function x(t){var e=function(t,e){if('object'!=w(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||'default');if('object'!=w(n))return n;throw new TypeError('@@toPrimitive must return a primitive value.')}return('string'===e?String:Number)(t)}(t,'string');return'symbol'==w(e)?e:String(e)}var P=function(){function t(e,r,n,i,a,o,s,c,u,l){var f;!function(t,e){if(!(t instanceof e))throw new TypeError('Cannot call a class as a function')}(this,t),this.marks=[],this.sets=[],this.allowedMarks=[],this.usualWeight=1,this.markSystem='',this.currentSystemMethod=null,this.typesForMaxMark=[],this.studentId='',this.localSets=[],this.CSPeriodIsStarted=!1,this.marksRaw=[],this.marktype=!1,this.incomingMarks=[],this.missCount=0,this.lescount=0,this.countLessons=0,this.countLessonsWithoutMiss=0,this.marks=e,this.incomingMarks=e,this.sets=this.marks.map((function(t){return t.set})),this.allowedMarks=n,this.config=r,this.usualWeight=i,this.currentSystemMethod=null,this.typesForMaxMark=a,this.groupId=String(o),this.studentId=String(s),this.currentAcc={},this.localSets=[],this.CSPeriodIsStarted=u,this.marksRaw=l||[],this.marktype=c,window.teacher?this.localSets=this.config.groupsData?this.config.groupsData[this.groupId].sets:[]:void 0!==this.config.sets_by_lessons&&void 0!==this.config.sets_by_lessons[this.studentId]&&(this.localSets=this.config.sets_by_lessons[this.studentId]),this.parseMarks(),this.defineMarkSystem(),f=this.config.groupBySets?this.getAverageBySets():this.currentSystemMethod(),this.currentAcc=this.finalTransformsWithResult(f);var m=this.getCountLessons(),d=m.countLessons,g=m.countLessonsWithoutMiss;this.countLessons='default'===this.config.type_calc_miss_in_part?d:this.lescount,this.countLessonsWithoutMiss=g}var e,r,a;return e=t,r=[{key:'roundTo',get:function(){var t=2,e=this.config.avgControl;return t=void 0===e||void 0===e.round?t:e.round,(void 0!==this.config.isPercent&&this.config.isPercent||void 0!==this.config.isRating&&this.config.isRating)&&(t=1),this.config.isCS&&this.marktype&&(t=0),t}},{key:'acuniq',get:function(){return this.marks?this.marks.length:0}},{key:'parseMarks',value:function(){var t=this,e=this.marks.map((function(e){e.set.lescount&&(t.lescount+=1),e.set.misscount&&(t.missCount+=1);var r=(0,n.p)(e,t.config,t.allowedMarks);return r?(e.parsed=r,e):e})).reduce((function(t,e){if(!(e&&e.parsed&&e.parsed.marks&&e.parsed.marks.length))return t;var r=2===e.parsed.marks.length?[e,{mark:e.mark,parsed:S({},e.parsed),set:S({},e.set)}]:[e];return r.forEach((function(t,e){if(t&&t.parsed){var r=t.parsed.marks;t.mark=0===e?parseFloat(r[0]):parseFloat(r[1])}})),[].concat(k(t),r)}),[]);if(this.config.required_works_on&&(this.config.groupBySets||this.config.isRating)){var r=this.sets.filter((function(e){return 1===Number(e.required)&&(!t.config.groupBySets||0!==Number(e.set_id))}));r.forEach((function(i,a){var o=i.date,s=e.some((function(t){return t.set.date===o}));if(!s&&(1===Number(i.control)||!t.config.ignore_justifiable_miss||'u'!==i.miss&&'b'!==i.miss)){var c={mark:0,parsed:(0,n.p)(0,t.config,t.allowedMarks),set:r[a]};e.push(c)}}))}this.config.countAvgWithTypesOnly&&(e=e.filter((function(t){return t.set.id>0}))),this.config.countAvgNotCwIfTypeWithWeightZero&&(e=e.map((function(t){return t.set.id>0&&0===t.set.weight&&(t.set.control=!1),t}))),this.marks=e}},{key:'defineMarkSystem',value:function(){var t=this;this.config.isCS?(this.markSystem='criterial',this.currentSystemMethod=this.getCriterialAverage):this.config.isRating?(this.markSystem='rating',this.currentSystemMethod=this.getRatingAverage,this.marks=this.marks.filter((function(t){return t.set}))):(this.markSystem='ariphmetic',this.currentSystemMethod=this.getAriphmeticAverage),this.marks=this.marks.filter((function(e){return!!(!Number.isNaN(parseFloat(e.mark))||t.config.isRating&&t.config.max_mark_on&&e.set&&0!==e.set.id||t.config.groupBySets)&&(t.config.isRating&&e.set&&0===e.set.id&&(e.set.max_mark=0),!0)}))}},{key:'resetAccValues',value:function(t){var e=['sum','totalAverage','gainedPercent','notInRatingScale'];Object.keys(t).forEach((function(r){e.forEach((function(e){t[r].marksNumber&&!String(t[r][e]).includes('NaN')||Object.keys(t[r]).includes(e)&&(t[r][e]='')}))}))}},{key:'isKrMark',value:function(t){return 1===Number(t.set.control)&&0!==Number(t.set.set_id)}},{key:'getAverageBySets',value:function(){var t=this,e=[],r=[];this.marks.forEach((function(n){t.isKrMark(n)?e.push(n):r.push(n)}));var n=this.marks.reduce((function(t,e){var r=e.set.set_id;return t[r]||(t[r]=[]),t[r].push(e),t}),{}),i=this.getAverageData(e),a=this.getAverageData(r),o=Object.keys(n).reduce((function(e,r){return S(S({},e),{},O({},r,t.getAverageData(n[r])))}),{}),s=this.getSetsAverage(o,this.localSets);return o.sets=this.localSets,{totalAverageAcc:S({},s),cwAcc:S({},i),withoutCwAcc:S({},a),localSets:o}}},{key:'getSetsAverage',value:function(t,e){var r=this,n=0,i=0;Object.keys(e).forEach((function(a){var o=e[a],s=Number(o.weight)||1;t[a]&&Number(t[a].totalAverage)&&(i+=parseFloat(h(t[a].totalAverage,r.roundTo))*s),n+=s}));var a=0;return n>0&&(a=i/n),{marksNumber:n,sum:i,totalAverage:a}}},{key:'getAverageData',value:function(t){var e=this,r=0,n=0;t.forEach((function(t){var i=t.set;if(!i||!i.inactive){var a=Number(i.weight)||1,o=parseFloat(t.mark)*a;e.config.isRating&&e.config.max_mark_on&&Number(t.set.id)&&(o*=100/Number(i.max_mark));var s=1;Number.isNaN(o)&&!Number(t.set.control)&&1!==Number(t.set.control)||(s=a),r+=s,n+=o}}));var i=0;return r>0&&(i=n/r),{marksNumber:r,sum:n,totalAverage:i}}},{key:'checkMiss',value:function(t){var e=this.config.avgControl,r=e&&e.min_presence_percent,n=e&&void 0!==e.min_marks?e.min_marks:3;this.acuniq<n&&(t.moreMinMarks=!0),r&&Math.round(100*this.missCount/this.countLessons)>100-r&&(t.moreMiss=!0)}},{key:'getCriterialAverage',value:function(){var t=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=c(Array.from(new Set(t.filter((function(t){return t.set&&(t.set.id||0===Number(t.set.id))&&t.set.control})))).map((function(t){return t.set.id}))).reduce((function(e,r){return f(f({},e),{},m({},r,t.filter((function(t){return t.set&&t.set.id===r}))))}),{}),i=Object.keys(n).map((function(t){return v(n[t],e,r)}));return Object.keys(n).forEach((function(t,e){i[e].id=Number(t)})),i}(this.marks,this.config,this.usualWeight);t.forEach((function(t){y(t)}));var e=this.getAriphmeticAverage();return this.CSPeriodIsStarted||Object.keys(e.totalAverageAcc).forEach((function(t){e.totalAverageAcc[t]=e.withoutCwAcc[t]})),S(S({},e),{},{sets:t})}},{key:'getAriphmeticAverage',value:function(){var t=v(this.marks,this.config,this.usualWeight);return this.config.countAvgTotalCWOnly&&(t.totalAverageAcc=S({},t.cwAcc)),y(t)}},{key:'getRatingAverage',value:function(){var t=y(p(this.config.ignore_simple_marks?this.marks.filter((function(t){return t.set&&Object.keys(t.set).length&&(t.set.id||t.set.mtype&&t.set.mtype.length)||t.set.old_trs&&t.set.mdate})):this.marks,this.config,this.usualWeight,{typesForMaxMark:this.typesForMaxMark,incomingMarks:this.incomingMarks})),e=30;if(this.config.isRating&&void 0!==window.rating_scale&&(e=window.rating_scale[3].min),Object.keys(t).forEach((function(r){var n=t[r].gainedPercent;parseInt(n,10)<e&&(t[r].notInRatingScale=!0)})),window.part_max_mark_on){var r=window.journal_part_max_marks?Number(window.journal_part_max_marks[this.groupId]):Number(this.config.part_max_mark_list[this.studentId]),n=t.totalAverageAcc,i=n.sum>=r?100:Math.round(n.sum/r*100);n.partMarkPercent=i?''.concat(i,'%'):''}return t}},{key:'finalTransformsWithResult',value:function(t){var e=this;return t=this.round(t,this.roundTo),Object.keys(t).forEach((function(r){e.config.groupBySets&&'totalAverageAcc'===r&&(t[r].gainedPercent=t[r].sum),e.config.groupBySets&&'withoutCwAcc'===r&&(t[r].sum=t[r].totalAverage),t[r].gainedPercent=''.concat(Math.round(parseFloat(t[r].gainedPercent)),'%'),t[r].sum=h(t[r].sum,e.roundTo),t[r].totalAverage=h(t[r].totalAverage,e.roundTo)})),t}},{key:'returnTotalValues',value:function(t,e){if(this.resetAccValues(t),'totalAverageAcc'===e&&this.checkMiss(t[e]),this.config&&this.config.isLetteredTen){var r=function(t,e){if(!e&&!Array.isArray(e))return t.toString();var r=e[(t=Math.round(t))-1];return String(t>0&&t<11?r:t)}(t[e].totalAverage,this.config.letteredTenMarks||[]);r=r?r.toString().toUpperCase():r,t[e].totalAverage=r}return this.deletePrivateKeys(t[e])}},{key:'getCells',value:function(){var t=this.marksRaw.filter((function(t){return t.set&&!Number.isNaN(t.set.id)})).reduce((function(t,e){var r,n=(0,i.l)(e.set.date);return S(S({},t),{},O({},n.date,S(S({},(null==t?void 0:t[n.date])||{}),{},O({},n.num||'0',[].concat(k((null==t||null===(r=t[n.date])||void 0===r?void 0:r[n.num||'0'])||[]),[e])))))}),{});return Object.keys(t).forEach((function(e){Object.prototype.hasOwnProperty.call(t,e)&&(t[e]=Object.values(t[e]))})),Object.values(t)}},{key:'getCountLessons',value:function(){return this.getCells().reduce((function(t,e){return t.countLessons+=e.length,t.countLessonsWithoutMiss+=e.filter((function(t){return t.every((function(t){return'miss'!==t.set.missType}))})).length,t}),{countLessons:0,countLessonsWithoutMiss:0})}},{key:'getTotalExtraHours',value:function(){return this.countLessonsWithoutMiss}},{key:'getAverageByLocalSets',value:function(){return this.currentAcc.localSets}},{key:'getCwAverage',value:function(){return this.returnTotalValues(this.currentAcc,'cwAcc')}},{key:'getWithoutCwAverage',value:function(){return this.returnTotalValues(this.currentAcc,'withoutCwAcc')}},{key:'getTotalAverage',value:function(){if(this.config.subtract_rating_ball_for_miss){var t=Number(this.config.subtract_rating_ball_for_miss)*this.currentAcc.totalAverageAcc.substruct;this.currentAcc.totalAverageAcc.gainedPercent=''.concat(parseInt(this.currentAcc.totalAverageAcc.gainedPercent,10)-t,'%')}return this.returnTotalValues(this.currentAcc,'totalAverageAcc')}},{key:'getSetAverage',value:function(t){var e=this.getCriterialAverage().sets.find((function(e){return e.id===Number(t)}))||{};delete e.id;var r=this.round(e,0).totalAverageAcc||{};return this.deletePrivateKeys(r)}},{key:'deletePrivateKeys',value:function(t){var e=[];switch(this.markSystem){case'ariphmetic':case'criterial':e=['maxPossibleMark','gainedPercent','substruct','gainedPercent','notInRatingScale','partMarkPercent'];break;case'rating':e=['totalAverage','substruct'];break;default:e=[]}var r=t;return Object.keys(r).forEach((function(t){e.indexOf(t)>-1&&delete r[t]})),r}},{key:'round',value:function(t,e){var r=this,n=void 0===e?this.roundTo:e,i=t;return Object.keys(i).forEach((function(t){if('sets'!==t&&'localSets'!==t){var e=i[t];e.sum=h(e.sum,n),e.totalAverage=h(e.totalAverage,n)}else'localSets'===t&&(i[t]=r.round(i[t],n))})),i}}],r&&j(e.prototype,r),a&&j(e,a),Object.defineProperty(e,'prototype',{writable:!1}),t}(),M=P},8849:function(t,e,r){r.d(e,{Fw:function(){return l},it:function(){return v},jO:function(){return b},nG:function(){return f},pj:function(){return d},c:function(){return g},On:function(){return m}});var n=r(83886),i=r(48765);function a(t,e){var r='undefined'!=typeof Symbol&&t[Symbol.iterator]||t['@@iterator'];if(!r){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if('string'==typeof t)return o(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);'Object'===r&&t.constructor&&(r=t.constructor.name);if('Map'===r||'Set'===r)return Array.from(t);if('Arguments'===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o(t,e)}(t))||e&&t&&'number'==typeof t.length){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError('Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.')}var a,s=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return s=t.done,t},e:function(t){c=!0,a=t},f:function(){try{s||null==r.return||r.return()}finally{if(c)throw a}}}}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function s(t,e,r){var n,i=null==r||null===(n=r.lessonIdsByName)||void 0===n?void 0:n[e];if(!i)return'';var o=null==r?void 0:r.paletteScalesByLessonId[i];if(!o)return'';var s,c=-Math.round(-parseFloat(t)),u=a(o);try{for(u.s();!(s=u.n()).done;){var l=s.value;if(c>=l.min&&c<=l.max)return'color: '.concat(l.color,' !important;')}}catch(t){u.e(t)}finally{u.f()}return''}function c(t,e,r){return r?t&&r[t]&&r[t][e]?r[t][e]:r[e]:null}function u(t){t.classList.remove('cell_avg_not_enough'),t.classList.remove('notclosed'),t.removeAttribute('min_marks'),t.removeAttribute('last_two'),t.removeAttribute('miss')}function l(t,e,r){var n;if(t){var a=window,o=a.$,l=a.JournalConfig,f=l.isSpecialColorfulMarksEnabled,m=c((o(t).parent().parent().attr('id')||'').replace(/g([0-9]*)\_.*/,'$1'),t.getAttribute('name')||'',e);if(m){u(t);var d=m.total,g=l.compute_rating_percent?d.gainedPercent:d.sum;if(null!==(n=window.JournalConfig.palette)&&void 0!==n&&n.isGradationMarksEnabled){var v=s(g,String(t.getAttribute('name')),window.JournalConfig.palette);t.setAttribute('style',v)}else f&&(t.style=(0,i.h)(g));t.innerText=g}}}function f(t,e,r){if(t){var a=window.$,o=r||window.JournalConfig,l=o.isRating,f=o.isSpecialColorfulMarksEnabled,m=c((a(t).parent().parent().attr('id')||'').replace(/g([0-9]*)\_.*/,'$1'),t.getAttribute('name')||'',e);if(m){u(t);var d=!1,g=m.cw,v=l?g.sum:g.totalAverage;if(l){t.innerHTML=(0,n.Z)(v,'','',g.gainedPercent,''),g.notInRatingScale&&(d=!0)}else{var b;if(null!==(b=window.JournalConfig.palette)&&void 0!==b&&b.isGradationMarksEnabled){var p=s(v,String(t.getAttribute('name')),o.palette);t.setAttribute('style',p)}else f&&(t.style=(0,i.h)(v));t.innerText=v}t.classList.toggle('notclosed',d)}}}function m(t,e,r){if(t){var a=window.$,o=r||window.JournalConfig,l=o.isRating,f=o.isSpecialColorfulMarksEnabled,m=c((a(t).parent().parent().attr('id')||'').replace(/g([0-9]*)\_.*/,'$1'),t.getAttribute('name')||'',e);if(m){u(t);var d=!1,g=m.withoutCw,v=l?g.sum:g.totalAverage;if(l){t.innerHTML=(0,n.Z)(v,'','',g.gainedPercent,''),g.notInRatingScale&&(d=!0)}else{var b;if(null!==(b=window.JournalConfig.palette)&&void 0!==b&&b.isGradationMarksEnabled){var p=s(v,String(t.getAttribute('name')),window.JournalConfig.palette);t.setAttribute('style',p)}else f&&(t.style=(0,i.h)(v));t.innerText=v}t.classList.toggle('notclosed',d)}}}function d(t,e,r){var n;if(t){var a=window.$,o=r||window.JournalConfig,l=o.isSpecialColorfulMarksEnabled;if(o.show.const_avg_with_debts_enabled){var f=c((a(t).parent().parent().attr('id')||'').replace(/g([0-9]*)\_.*/,'$1'),t.getAttribute('name')||'',e);if(f){u(t);var m=f.cwWithDebts.totalAverage;if(m){if(null!==(n=window.JournalConfig.palette)&&void 0!==n&&n.isGradationMarksEnabled){var d=s(m,String(t.getAttribute('name')),window.JournalConfig.palette);t.setAttribute('style',d)}else l&&(t.style=(0,i.h)(m));t.innerText=m,t.classList.toggle('notclosed',!1)}}}}}function g(t,e,r){var n;if(t){var a=window.$,o=r||window.JournalConfig,l=(a(t).parent().parent().attr('id')||'').replace(/g([0-9]*)\_.*/,'$1'),f=a(t).parent().attr('mt_id')||'',m=c(l,t.getAttribute('name')||'',e);if(m){u(t);var d=m.sets[f]||{},g=d.totalAverage?(Math.round(d.totalAverage*Math.pow(10,o.roundAverageTo))/Math.pow(10,o.roundAverageTo)).toFixed(o.roundAverageTo):'';if(null!==(n=window.JournalConfig.palette)&&void 0!==n&&n.isGradationMarksEnabled){var v=s(g,String(t.getAttribute('name')),window.JournalConfig.palette);t.setAttribute('style',v)}else o.isSpecialColorfulMarksEnabled&&(t.style=(0,i.h)(g));t.innerText=g}}}function v(t,e){var r=($(t).parent().parent().attr('id')||'').replace(/g([0-9]*)\_.*/,'$1'),n=c(r,t.getAttribute('name')||'',e),i=window.JournalConfig.groupsData[r];if($(t).removeClass('cell--extra-hours-notenough').removeClass('cell--extra-hours-enough'),i&&i.isExtra&&i.extraHours){var a=i.extraHours||0;n.totalExtraHours<a?$(t).addClass('cell--extra-hours-notenough'):$(t).addClass('cell--extra-hours-enough'),t.innerText=n.totalExtraHours}}function b(t,e,r){if(t){var a=window,o=a.$,l=a.JournalConfig,f=l.isExtday,m=l.studentId,d=l.currentGroup,g=f&&m?m:t.getAttribute('name')||'',v=f&&d?d:(o(t).parent().parent().attr('id')||'').replace(/g([0-9]*)\_.*/,'$1'),b=!1,p=r||window.JournalConfig,y=!!window.part_max_mark_list&&window.part_max_mark_list[g],h=c(v,g,e);if(h){u(t);var w=h.total,k=h.localSets,_=function(t){return t.isRating?t.compute_rating_percent?'gainedPercent':'sum':'totalAverage'}(window.JournalConfig),A=w[_];p.isRating&&w&&w.notInRatingScale&&!p.part_max_mark_on&&!y&&(b=!0),p.isRating&&p.isGainedPercentShowInResult&&(w.partMarkPercent=w.gainedPercent),function(t,e,r,a){var o=a.part_max_mark_on;if(a.isRating&&o)t.innerHTML=(0,n.Z)(e.sum,'','',e.partMarkPercent,'');else{var c,u=e.sum?r:'';if(null!==(c=a.palette)&&void 0!==c&&c.isGradationMarksEnabled){var l=s(u,String(t.getAttribute('name')),a.palette);t.setAttribute('style',l)}else a.isSpecialColorfulMarksEnabled&&(t.style=(0,i.h)(u));t.textContent=u}}(t,w,A,p),w.moreMiss&&(t.classList.add('cell_avg_not_enough'),t.setAttribute('miss','yes')),w.moreMinMarks&&(t.classList.add('cell_avg_not_enough'),t.setAttribute('min_marks','yes')),(document.querySelectorAll('.cells[data-column-type=avg]')||[]).forEach((function(t){var e=t.getAttribute('set_id'),r=t.querySelector('.cell[name="'.concat(g,'"]'));if(e&&r){var n='';e&&k&&k[e]&&k[e]&&(n=k[e].totalAverage),r.innerHTML=n}})),t.classList.toggle('notclosed',b)}else t.classList.remove('notclosed')}}},58579:function(t,e,r){r.d(e,{Z:function(){return O}});var n=r(17595),i=r(43110),a=r(15769),o={color:'#000',colorname:'black',control:!1,declaring_ignore:!1,global:!1,id:0,max_mark:'',mtype:'',mtype_short:'',required:!1,set_id:0,weight:1};function s(t){return s='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&'function'==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?'symbol':typeof t},s(t)}function c(t){return function(t){if(Array.isArray(t))return u(t)}(t)||function(t){if('undefined'!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t['@@iterator'])return Array.from(t)}(t)||function(t,e){if(!t)return;if('string'==typeof t)return u(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);'Object'===r&&t.constructor&&(r=t.constructor.name);if('Map'===r||'Set'===r)return Array.from(t);if('Arguments'===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return u(t,e)}(t)||function(){throw new TypeError('Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.')}()}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function l(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function f(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?l(Object(r),!0).forEach((function(e){m(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function m(t,e,r){var n;return n=function(t,e){if('object'!=s(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||'default');if('object'!=s(n))return n;throw new TypeError('@@toPrimitive must return a primitive value.')}return('string'===e?String:Number)(t)}(e,'string'),(e='symbol'==s(n)?n:String(n))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function d(t){return d='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&'function'==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?'symbol':typeof t},d(t)}function g(t){return function(t){if(Array.isArray(t))return v(t)}(t)||function(t){if('undefined'!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t['@@iterator'])return Array.from(t)}(t)||function(t,e){if(!t)return;if('string'==typeof t)return v(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);'Object'===r&&t.constructor&&(r=t.constructor.name);if('Map'===r||'Set'===r)return Array.from(t);if('Arguments'===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return v(t,e)}(t)||function(){throw new TypeError('Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.')}()}function v(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function b(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function p(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?b(Object(r),!0).forEach((function(e){y(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function y(t,e,r){var n;return n=function(t,e){if('object'!=d(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||'default');if('object'!=d(n))return n;throw new TypeError('@@toPrimitive must return a primitive value.')}return('string'===e?String:Number)(t)}(e,'string'),(e='symbol'==d(n)?n:String(n))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function h(t,e){var r=window.JournalConfig,n=(r||i.Z).avgControl;n=n||{};var s=document.querySelector('.grid-group[data-grid-group="'.concat(r.isExtday?0:e,'"]')),u=s?s.querySelectorAll('.cell[name="'.concat(r.isExtday?e:t,'"]')):[],l=[],m=[],d=null,v=Array.from(u).map((function(t){if(null===t)return{};var e=t.parentElement;if(null===e)return{};var i,s,c,u,l,f,m,g,v,b,y=(i=e.getAttribute('mt_id'),u=window.mtypes||{},Object.keys(u).map(Number).some((function(t){return void 0!==(s=Object.keys(u[t]).find((function(t){return Number(t)===Number(i)})))&&(c=t,!0)})),void 0!==c&&void 0!==s?u[c][s]:o),h=(l=t,m=y,g=(f=e).getAttribute('max_mark'),v=f.getAttribute('weight'),b=null!==v?Number(v):1,{weight:parseFloat(m.weight||b),max_mark:parseFloat(g||m.max_mark),required:parseFloat(m.required||f.getAttribute('mt_required')),id:parseFloat(m.id||f.getAttribute('mt_id')),set_id:parseFloat(f.getAttribute('set_id')),control:parseFloat(m.control||f.getAttribute('mt_control'))||l.classList.contains('cont')?1:0,date:f.getAttribute('id'),transition:l.classList.contains('transition'),maxMarkToCut:0,inactive:!1,substruct:!1,miss:'',lescount:!1,misscount:!1}),w=t.querySelector('.cell-data'),k=p({},h),_=t.classList.contains('transition')&&t.classList.contains('with_marks');if(k.inactive=t.classList.contains('cell_inactive')&&!t.classList.contains('cell--locked'),e.classList.contains('cells_hanging')||e.classList.contains('skip'))return{};_&&(k.maxMarkToCut=k.max_mark*k.weight);var A=t.getAttribute('miss_reason')||t.getAttribute('miss_type');A&&(k.miss=A,k.missType=t.getAttribute('miss_type'),'b'===A||'u'===A?k.maxMarkToCut=k.max_mark*k.weight:'n'!==A&&'miss'!==A||(k.substruct=!0,h.maxMarkToCut=0));var S=t.getAttribute('lms_type');S&&(k.lms_type=S);var O='';if(w?O=w.textContent:t.querySelector('input')&&(O=t.querySelector('input').value),O.indexOf('н')>-1&&O.trim().length>1){var j=O;O=j.slice(0,j.indexOf('н'))+j.slice(j.indexOf('н')+1)}var x=e.getAttribute('id');x&&n&&void 0!==n.min_presence_percent&&e&&'0'===String(x).replace(/.*N(.*)_.*/,'$1')&&(k.lescount=!0,O.toLowerCase().includes('н')&&(k.misscount=!0));var P={mark:O,set:p({},k)};return''!==O.trim()&&(d=(0,a.Z)(P,t,r,d)),P})),b=v.filter((function(t){return t.mark||t.set&&t.set.maxMarkToCut&&0!==t.set.id&&!Number.isNaN(t.set.id)||t.set&&0===t.set.maxMarkToCut&&0!==t.set.id&&!Number.isNaN(t.set.id)||r.isRating&&t.set&&t.set.id&&!Number.isNaN(t.set.id)||r.groupBySets&&t.set&&Number(t.set.control)})).reduce((function(t,e){var r,n=null==e||null===(r=e.set)||void 0===r||null===(r=r.date)||void 0===r?void 0:r.replace(/(.*)(N.+)/,'$1');return Object.prototype.hasOwnProperty.call(t,n)?t[n].push(e):t[n]=[e],t}),{}),y=Object.values(b).map((function(t){var e=t.some((function(t){return t.mark&&'н'!==String(t.mark).toLowerCase()||t.set.required&&'0'===String(t.mark)&&''===String(t.mark).trim()})),r=!e&&t.some((function(t){return t.mark&&('н'===String(t.mark).toLowerCase()||'miss'===t.set.miss)})),n=t.some((function(t){return t.set.required}));return t.map((function(t,i){return t.set.misscount=!1,t.set.lescount=!1,i||(t.set.misscount=r,t.set.lescount=e||r||n),t}))}));m.push.apply(m,g(y.flat()));var h={data:m,dataRaw:g(v),id:t};return l.push(h),function(t,e){return window.old_marks?(t.forEach((function(t){Object.keys(window.old_marks).forEach((function(r){if(Number(r)===e){var n=window.old_marks[r];if(Object.keys(n).indexOf(t.id)>-1&&n[t.id]&&n[t.id].length){var i=n[t.id].map((function(t){var e=f(f({},t),{},{required:parseFloat(t.required||0),id:parseFloat(t.id||0),set_id:parseFloat(t.set_id||0),control:parseFloat(t.control||0),weight:parseFloat(t.weight||1)});return e.weight=parseFloat(e.weight),{mark:e.mark,set:e}}));t.data=[].concat(c(i),c(t.data))}}}))})),t):t}(l,e)}var w=r(45221);function k(t){return k='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&'function'==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?'symbol':typeof t},k(t)}function _(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function A(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?_(Object(r),!0).forEach((function(e){S(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function S(t,e,r){var n;return n=function(t,e){if('object'!=k(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||'default');if('object'!=k(n))return n;throw new TypeError('@@toPrimitive must return a primitive value.')}return('string'===e?String:Number)(t)}(e,'string'),(e='symbol'==k(n)?n:String(n))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function O(t,e){var r=window,i=r.JournalConfig,a=r.allow_marks,o=void 0!==t?[Number(t)]:window.groups,s={},c=document.querySelectorAll('.grid-group');i&&i.isRating&&c.length&&c.forEach((function(t){var e=t.dataset.gridGroup;if(void 0!==e){var r=Array.from(t.querySelectorAll('.cells_header')||[]).map((function(t){return{id:t.getAttribute('mt_id'),date:t.getAttribute('id'),max_mark:parseFloat(t.getAttribute('max_mark')||''),weight:t.getAttribute('weight'),required:t.getAttribute('mt_required'),control:t.getAttribute('mt_control')}})).filter((function(t){return'0'!==t.id}));s[e]=r}}));var u={};return o&&o.length&&o.forEach((function(t){var r=document.querySelector('.grid-group[data-grid-group="'.concat(i.isExtday&&e?0:t,'"]'))||null;if(null!==r){u[t]={};var o=void 0===e?Array.from(r.querySelectorAll('#g'.concat(t,'_fio .cell[name]'))).map((function(t){var e;return null!==(e=t.getAttribute('name'))&&void 0!==e?e:''})).filter(Boolean):[String(e)],c=document.querySelectorAll('#g'.concat(t,'_journal [id*=_avg][mt_id] div.cell')),l=[];Array.from(c).forEach((function(t){var e=t.parentElement&&t.parentElement.getAttribute('mt_id');e&&l.push(e)})),o.forEach((function(e){var r=h(e,t),o=new w.Z(r[0].data,i,i.isExtday?a[t]:a,1,s?s[t]:[],t,e,!1,Boolean(c.length),r[0].dataRaw),f=l.reduce((function(t,e){return A(A({},t),{},S({},e,o.getSetAverage(e)))}),{});if(u[t][e]={cw:o.getCwAverage(),withoutCw:o.getWithoutCwAverage(),total:o.getTotalAverage(),localSets:o.getAverageByLocalSets(),totalExtraHours:o.getTotalExtraHours(),sets:f},i.show.const_avg_with_debts_enabled){var m,d,g=(0,n.QE)(r[0].dataRaw,null!==(m=null===(d=i.avgControl)||void 0===d?void 0:d.round)&&void 0!==m?m:1,i.isIgnoreMarkZeroForAvg);u[t][e].cwWithDebts=g}}))}})),u}},15769:function(t,e,r){r.d(e,{Z:function(){return i}});var n=r(43110);function i(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:n.Z,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=t.mark,o=r.isRating?0:2,s=window,c=s.teacher,u=s.additionalColumnForCW,l=r.avgControl,f=i,m=!(!(l=l||{})||void 0===l.last_two_show)&&Boolean(l.last_two_show),d=!1;return(Number(a)===o||parseFloat(a)<o)&&(1===a.length||a<=o||a.includes('/'))||a<=o?(r.isRating&&r.max_mark_on&&r.required_works_on&&!t.set.required||(d=!0),t.set.control&&(d=!0,f=e)):Number.isNaN(a)||(t.set.control&&r.isRating&&r.max_mark_on&&a/t.set.max_mark<.3&&!r.debtIsControlLackOfMark&&(d=!0,f=e),a>o&&(!f||!c||!1!==u&&u!=t.set.id||r.isRating&&r.max_mark_on||(d=!1))),e.classList.toggle('debts',d),m||r.isRating||(d=!1),e.classList.toggle('notclosed',d),f}},91248:function(t,e,r){function n(t,e){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!e)return!1;var n=Array.isArray(e)?e:Object.values(e)||[];return 0!==n.length&&(r?n.indexOf(t)>-1:n.some((function(e){return String(e)===String(t)})))}r.d(e,{d:function(){return n}})},83886:function(t,e,r){r.d(e,{Z:function(){return i}});var n=r(48765);function i(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:'',r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:'',i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:'',a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:'',o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:'';if((e=null==e?'':e.toString().toLowerCase().trim())&&'&nbsp;'!==e||o!==(window.miss_symbol_small||'н')||(e=window.miss_symbol||'Н',o=''),window.isSpecialColorfulMarksEnabled){var s=(0,n.h)(e||o||a||i||r);t='<div class="cell-data" style="'.concat(s,'">').concat(e,'</div>')+'<div class="cell-corner-1" style="'.concat(s,'">').concat(r,'</div>')+'<div class="cell-corner-2" style="'.concat(s,'">').concat(i,'</div>')+'<div class="cell-corner-3" style="'.concat(s,'">').concat(a,'</div>')+'<div class="cell-corner-4" style="'.concat(s,'">').concat(o,'</div>')}else t='<div class="cell-data">'.concat(e,'</div>')+'<div class="cell-corner-1">'.concat(r,'</div>')+'<div class="cell-corner-2">'.concat(i,'</div>')+'<div class="cell-corner-3">'.concat(a,'</div>')+'<div class="cell-corner-4">'.concat(o,'</div>');return t}},64082:function(t,e,r){r.d(e,{p:function(){return y}});var n=r(91248);var i=r(97398),a=r.n(i),o=r(81763),s=r.n(o);function c(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:'undefined'!=typeof Symbol&&t[Symbol.iterator]||t['@@iterator'];if(null!=r){var n,i,a,o,s=[],c=!0,u=!1;try{if(a=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(s.push(n.value),s.length!==e);c=!0);}catch(t){u=!0,i=t}finally{try{if(!c&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return s}}(t,e)||f(t,e)||function(){throw new TypeError('Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.')}()}function u(t){return u='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&'function'==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?'symbol':typeof t},u(t)}function l(t){return function(t){if(Array.isArray(t))return m(t)}(t)||function(t){if('undefined'!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t['@@iterator'])return Array.from(t)}(t)||f(t)||function(){throw new TypeError('Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.')}()}function f(t,e){if(t){if('string'==typeof t)return m(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return'Object'===r&&t.constructor&&(r=t.constructor.name),'Map'===r||'Set'===r?Array.from(t):'Arguments'===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?m(t,e):void 0}}function m(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function d(t){var e=Number(t);return s()(e)&&a()(e)}function g(t,e){return t.some((function(t){return!(0,n.d)(t,e)||''===String(t).trim()}))}function v(t){return t&&t.length?Math.min.apply(Math,l(t)):0}function b(t){return t&&t.length?Math.max.apply(Math,l(t)):0}function p(t,e,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return r&&e>0?Number(t)<=e:(0,n.d)(t,i)}function y(t,e){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(!i||!i.length)return!1;if('string'==typeof t||'number'==typeof t)r={mark:t};else{if('object'!==u(t)||null===t||void 0===t.mark)return!1;r=t}var o=r.mark.toString().trim().toLowerCase(),s=r.miss;if(s=s||!1,''===o)return{mark:'',display:'',marks:[],miss:s};if('0'===o&&null!=e&&e.isIgnoreMarkZeroForAvg)return{mark:'',display:o,marks:[],miss:s};var l=[],f=parseInt(o,10),m=parseFloat(o),y=e&&e.isPercent||!1,h=e&&e.isRating||!1,w=e&&e.isCS||!1,k=r.isPartMark||!1,_=k&&e&&e.isPrePart||!1,A=e&&e.isLetteredTen||!1,S=r.isExam||!1,O=!1;'ЕГЭ'!==S&&'ЕГЭ (п)'!==S&&'ЕГЭ (б)'!==S||(S=!1,O=!0);var j,x,P,M,C=e&&e.max_allow_mark||0,N=e&&e.max_mark_on||!1,E=e&&e.weight_on||!1,T=e&&e.allow_missmark||!1,I=e&&e.allow_markmark||!1,L=e&&e.allowplus||!1,F=e&&e.allowTwoMarks||!1,q=e&&e.allow_count_float_marks||!1,$=e&&e.roundResultTo?e.roundResultTo:0,R=(0,n.d)(o,i);if('нн'===o)return!1;if(o===(window.miss_symbol_small||'н'))return!((k||S||O)&&!R)&&(s=s||!0,h&&null!=e&&e.declaring_marks_on&&'object'===u(t)&&null!==(j=t.set)&&void 0!==j&&j.control&&null!==(x=t.set)&&void 0!==x&&x.required?{mark:0,display:o,marks:[0],miss:s}:{mark:'',display:'',marks:[],miss:s});if(!R&&o.length>1&&(o[0]===(window.miss_symbol_small||'н')||o[o.length-1]===(window.miss_symbol_small||'н'))){if(!T)return!1;o=o[0]===(window.miss_symbol_small||'н')?o.substr(1):o.substr(0,o.length-1),R=(0,n.d)(o,i);var D=t,W=Number(null==D?void 0:D.max_mark);if(F&&o.indexOf('/')>-1){if(o.split('/').some((function(t){return!p(t,W,N,i)})))return!1}else if(2===o.length){var J=c(o.split(''),2),B=J[0],Z=J[1];if(B===Z||g([B,Z],i))return!1}else if(!p(o,W,N,i))return!1;d(f)&&(f=parseInt(o,10),m=parseFloat(o)),s=s||!0}if(h&&(k||_||S))return!!(!s&&R||d(f)&&f>=0&&f<=100)&&{mark:o,display:o,marks:[f],miss:s};if(A&&e&&e.letteredTenMarks&&(P=o,((M=e.letteredTenMarks)||Array.isArray(M))&&M.some((function(t){return t===P.toString()})))){var G=function(t,e){if(e&&Array.isArray(e)){var r=e.map((function(t){return t.toString()})).indexOf(t.toString())+1;return String(''!==t&&r>0?r:t)}return t.toString()}(o,e.letteredTenMarks);return{mark:G,display:o,marks:[G],miss:s}}var H,U,V=function(t){var e=[];return Object.values(t).forEach((function(t){var r=parseFloat(t);d(t)&&e.push(r)})),e}(i);if((k||_||S)&&!y&&d(m)&&$>0){var K,Q;if(V.length&&(K=v(V),Q=b(V)),void 0!==K&&void 0!==Q&&m>=K&&m<=Q){var Y=m.toFixed($);return{mark:Y,display:Y,marks:[Y],miss:s}}return!1}if(!r.markType&&a)if(r.markTypeId){var z=Number(r.markTypeId);a&&a[z]&&(r.markType=a[z])}else if(r.obj){var X=r.obj;if(X){var tt=X.parentElement;if(tt){var et=tt.parentElement;if(et){var rt=Number(et.getAttribute('mt_id'))||0;a&&a[rt]&&(r.markType=a[rt])}}}}if(h){if(N&&d(o)){var nt;if(void 0!==r.obj){var it=window.$;nt=Number(it(r.obj).parents('.cells_marks').attr('max_mark'))}else nt=void 0!==r.max_mark?Number(r.max_mark):r.markType&&r.markType.id&&'0'!==String(r.markType.id)&&void 0!==r.markType.max_mark?Number(r.markType.max_mark):r.set&&r.set.id&&'0'!==String(r.set.id)&&void 0!==r.set.max_mark?Number(r.set.max_mark):b(V);if(void 0!==nt&&0===nt&&(nt=b(V)),void 0!==nt&&d(nt))return!(f<0||f>parseInt(nt,10))&&(!('0.'===o.toString()||o.toString().length>1&&'0'===o.toString().slice(0,1)&&'.'!==o.toString().slice(1,2))&&{mark:o,display:o,marks:[o],miss:s})}if((0,n.d)(o,i)||''===o)return{mark:o,display:o,marks:[o],miss:s};if(!d(o))return!1;if(void 0!==C&&0!==C||(C=b(V)),!(k||_||S)&&E){var at;if(r.obj)at=(0,window.$)(r.obj).parents('.cells_marks').attr('weight');else void 0!==r.weight&&(at=r.weight);if(void 0!==at){var ot=parseInt(at,10);return m>=0&&m<=ot&&{mark:o,display:o,marks:[o],miss:s}}}if(m>=0&&m<=C&&1===o.length)return{mark:o,display:o,marks:[o],miss:s};if(1===o.length&&d(m))return{mark:o,display:o,marks:[o],miss:s}}if((0,n.d)(o,i)||'н/а'===o||O&&f.toString()===o&&f>=0&&f<=100)return(!k||o!==(window.miss_symbol_small||'н'))&&{mark:o,display:o,marks:[o],miss:s};if(y&&L&&!k&&('-'===o.slice(-1)||'+'===o.slice(-1)||'.'===o.slice(-1))&&(0,n.d)(o.slice(0,-1),i))return{mark:o,display:o,marks:[parseFloat(o)],miss:s};if((''===o||L&&!k&&(0,n.d)(o.substr(0,1),i))&&('-'===o.substr(1,1)||'+'===o.substr(1,1)||'.'===o.substr(1,1))&&'/'!==o.substr(2,1)&&o.length<3)return{mark:o,display:o,marks:[parseFloat(o)],miss:s};if(q&&d(m))return V.length&&(H=v(V),U=b(V)),void 0!==H&&void 0!==U&&m>=H&&m<=U&&{mark:o,display:o,marks:[m],miss:s};if(I&&(!k||S)&&!w&&-1===o.indexOf('/')&&2===o.length&&!k&&!h){if(g(l=[o.substr(0,1),o.substr(1,1)],i))return!1;if(l[0]===l[1]&&l[0]!==(window.miss_symbol_small||'н'))return!1;var st=[String((parseInt(l[0],10)+parseInt(l[1],10))/2)];return{mark:o,display:o,marks:l=[].concat(st),miss:s}}return(l=F&&(!k||S)&&o.indexOf('/')>-1?o.split('/'):_&&o.indexOf('-')>0?o.split('-'):[o]).length<=2&&(!g(l,i)&&((!y&&!h||-1===o.indexOf('/'))&&{mark:o,display:o,marks:l,miss:s}))}window.journalParseMark||(window.journalParseMark=y)}},function(t){t.O(0,[4684,5743],(function(){return e=37573,t(t.s=e);var e}));t.O()}]);